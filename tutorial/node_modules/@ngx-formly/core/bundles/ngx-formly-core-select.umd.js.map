{"version":3,"file":"ngx-formly-core-select.umd.js","sources":["@ngx-formly/core/select/select-options.pipe.ts","@ngx-formly/core/select/select.module.ts"],"names":["Observable","observableOf","map","Pipe","NgModule"],"mappings":"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AAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AACA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AACA,AAAA,AAAA,AAEA,AAAA,AAAA,AAAA,AACA,AAEA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AACA,AAEA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAEA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAEA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAEA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAEA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAEA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAEA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAEA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAEA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAEA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AACA,AA5FAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AA6FA,AAAA,AA7FA,ACLA,AAGA,AAIA,AAJAC,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AAAA,AAAA,AAAA,AAAA,AAAA,AACA,AACA,AAAA,AAJA","sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\nimport { Observable, of as observableOf } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { FormlyFieldConfig } from '@ngx-formly/core';\n\n@Pipe({ name: 'formlySelectOptions' })\nexport class FormlySelectOptionsPipe implements PipeTransform {\n  transform(options, field?: FormlyFieldConfig) {\n    if (!(options instanceof Observable)) {\n      options = observableOf(options);\n    }\n\n    return (options as Observable<any>).pipe(\n      map(value => this.toOptions(value, field || {})),\n    );\n  }\n\n  private toOptions(options, field: FormlyFieldConfig) {\n    const gOptions: any[] = [],\n      groups: { [key: string]: any[] } = {},\n      to = field.templateOptions || {};\n\n    to._flatOptions = true;\n    options.map((option: any) => {\n      if (!this.getGroupProp(option, to)) {\n        gOptions.push(this.toOption(option, to));\n      } else {\n        to._flatOptions = false;\n        if (!groups[this.getGroupProp(option, to)]) {\n          groups[this.getGroupProp(option, to)] = [];\n          gOptions.push({\n            label: this.getGroupProp(option, to),\n            group: groups[this.getGroupProp(option, to)],\n          });\n        }\n        groups[this.getGroupProp(option, to)].push(this.toOption(option, to));\n      }\n    });\n\n    return gOptions;\n  }\n\n  private toOption(item, to) {\n    return {\n      label: this.getLabelProp(item, to),\n      value: this.getValueProp(item, to),\n      disabled: this.getDisabledProp(item, to) || false,\n    };\n  }\n\n  private getLabelProp(item, to): string {\n    if (typeof to.labelProp === 'function') {\n      return to.labelProp(item);\n    }\n\n    if (this.shouldUseLegacyOption(item, to)) {\n      console.warn(`NgxFormly: legacy select option '{key, value}' is deprecated since v5.5, use '{value, label}' instead.`);\n      return item.value;\n    }\n\n    return item[to.labelProp || 'label'];\n  }\n\n  private getValueProp(item, to): string {\n    if (typeof to.valueProp === 'function') {\n      return to.valueProp(item);\n    }\n\n    if (this.shouldUseLegacyOption(item, to)) {\n      return item.key;\n    }\n\n    return item[to.valueProp || 'value'];\n  }\n\n  private getDisabledProp(item, to): string {\n    if (typeof to.disabledProp === 'function') {\n      return to.disabledProp(item);\n    }\n    return item[to.disabledProp || 'disabled'];\n  }\n\n  private getGroupProp(item, to): string {\n    if (typeof to.groupProp === 'function') {\n      return to.groupProp(item);\n    }\n\n    return item[to.groupProp || 'group'];\n  }\n\n  private shouldUseLegacyOption(item, to) {\n    return !to.valueProp\n      && !to.labelProp\n      && item != null\n      && typeof item === 'object'\n      && 'key' in item\n      && 'value' in item;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { FormlySelectOptionsPipe } from './select-options.pipe';\n\n@NgModule({\n  declarations: [FormlySelectOptionsPipe],\n  exports: [FormlySelectOptionsPipe],\n})\nexport class FormlySelectModule { }\n"]}