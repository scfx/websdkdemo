{"version":3,"file":"c8y-ngx-components-child-devices.js","sources":["../../child-devices/child-devices.component.ts","../../child-devices/child-devices.guard.ts","../../child-devices/child-devices.module.ts","../../child-devices/c8y-ngx-components-child-devices.ts"],"sourcesContent":["import { Component, OnInit, EventEmitter } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { IManagedObject } from '@c8y/client';\nimport { ManagedObjectRealtimeService } from '@c8y/ngx-components';\n\n@Component({\n  selector: 'c8y-child-devices',\n  templateUrl: './child-devices.component.html',\n  providers: [ManagedObjectRealtimeService]\n})\nexport class ChildDevicesComponent implements OnInit {\n  id: string;\n\n  constructor(private route: ActivatedRoute) {}\n\n  async ngOnInit() {\n    await this.getAllDevices();\n  }\n\n  async getAllDevices() {\n    this.id = this.route.snapshot.parent.data.contextData;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\nimport { InventoryService } from '@c8y/client';\n\n@Injectable()\nexport class ChildDevicesTabGuard implements CanActivate {\n  constructor(private inventory: InventoryService) {}\n\n  async canActivate(route: ActivatedRouteSnapshot): Promise<boolean> {\n    const contextData = route.data.contextData;\n    const filter: object = {\n      pageSize: 1\n    };\n    if (!contextData) {\n      return true;\n    }\n    const device = await this.inventory.childDevicesList(contextData.id, filter);\n    const hasChildren = device.data.length;\n    const isVendme = route.data.contextData.type === 'com_nsn_startups_vendme_VendingMachine';\n    return hasChildren && !isVendme;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CoreModule, gettext, HOOK_ONCE_ROUTE, ViewContext } from '@c8y/ngx-components';\nimport { DeviceGridModule } from '@c8y/ngx-components/device-grid';\nimport { PopoverModule } from 'ngx-bootstrap/popover';\nimport { ChildDevicesComponent } from './child-devices.component';\nimport { ChildDevicesTabGuard } from './child-devices.guard';\n\n@NgModule({\n  declarations: [ChildDevicesComponent],\n  imports: [CoreModule, DeviceGridModule, PopoverModule],\n  entryComponents: [ChildDevicesComponent],\n  providers: [\n    ChildDevicesTabGuard,\n    {\n      provide: HOOK_ONCE_ROUTE,\n      useValue: [\n        {\n          context: ViewContext.Device,\n          path: 'child-devices',\n          priority: 1000,\n          icon: 'code-fork',\n          label: gettext('Child devices'),\n          component: ChildDevicesComponent,\n          canActivate: [ChildDevicesTabGuard]\n        }\n      ],\n      multi: true\n    }\n  ]\n})\nexport class ChildDevicesModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {ChildDevicesTabGuard as Éµa} from './child-devices.guard';"],"names":[],"mappings":";;;;;;;;MAUa,qBAAqB;IAGhC,YAAoB,KAAqB;QAArB,UAAK,GAAL,KAAK,CAAgB;KAAI;IAEvC,QAAQ;;YACZ,MAAM,IAAI,CAAC,aAAa,EAAE,CAAC;SAC5B;KAAA;IAEK,aAAa;;YACjB,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;SACvD;KAAA;;;YAhBF,SAAS,SAAC;gBACT,QAAQ,EAAE,mBAAmB;gBAC7B,ucAA6C;gBAC7C,SAAS,EAAE,CAAC,4BAA4B,CAAC;aAC1C;;;YARQ,cAAc;;;MCIV,oBAAoB;IAC/B,YAAoB,SAA2B;QAA3B,cAAS,GAAT,SAAS,CAAkB;KAAI;IAE7C,WAAW,CAAC,KAA6B;;YAC7C,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC;YAC3C,MAAM,MAAM,GAAW;gBACrB,QAAQ,EAAE,CAAC;aACZ,CAAC;YACF,IAAI,CAAC,WAAW,EAAE;gBAChB,OAAO,IAAI,CAAC;aACb;YACD,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,WAAW,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;YAC7E,MAAM,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACvC,MAAM,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,KAAK,wCAAwC,CAAC;YAC1F,OAAO,WAAW,IAAI,CAAC,QAAQ,CAAC;SACjC;KAAA;;;YAhBF,UAAU;;;YAFF,gBAAgB;;;WCaT;IACR;QACE,OAAO,EAAE,WAAW,CAAC,MAAM;QAC3B,IAAI,EAAE,eAAe;QACrB,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,WAAW;QACjB,KAAK,EAAE,OAAO,CAAC,eAAe,CAAC;QAC/B,SAAS,EAAE,qBAAqB;QAChC,WAAW,EAAE,CAAC,oBAAoB,CAAC;KACpC;;MAMI,kBAAkB;;;YAvB9B,QAAQ,SAAC;gBACR,YAAY,EAAE,CAAC,qBAAqB,CAAC;gBACrC,OAAO,EAAE,CAAC,UAAU,EAAE,gBAAgB,EAAE,aAAa,CAAC;gBACtD,eAAe,EAAE,CAAC,qBAAqB,CAAC;gBACxC,SAAS,EAAE;oBACT,oBAAoB;oBACpB;wBACE,OAAO,EAAE,eAAe;wBACxB,QAAQ,IAUP;wBACD,KAAK,EAAE,IAAI;qBACZ;iBACF;aACF;;;AC7BD;;;;;;"}