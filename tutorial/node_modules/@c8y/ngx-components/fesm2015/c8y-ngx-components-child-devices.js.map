{"version":3,"file":"c8y-ngx-components-child-devices.js","sources":["../../child-devices/child-devices.component.ts","../../child-devices/child-devices.guard.ts","../../child-devices/child-devices.module.ts","../../child-devices/c8y-ngx-components-child-devices.ts"],"names":[],"mappings":";;;;;;;;;;;;;MAUa,qBAAqB;AAAG,IAGnC,YAAoB,KAAqB;AAAI,QAAzB,UAAK,GAAL,KAAK,CAAgB;AAAC,KAAG;AAC/C,IACQ,QAAQ;AAChB;AAGyB,YAHrB,MAAM,IAAI,CAAC,aAAa,EAAE,CAAC;AAC/B,SAAG;AAEF,KAFE;AACH,IACQ,aAAa;AACrB;AACG,YADC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;AAC1D,SAAG;AAEH,KAFG;AACH;iDAjBC,SAAS,SAAC,kBACT,QAAQ,EAAE,mBAAmB,kBAC7B;qaAA6C,kBAC7C,SAAS,EAAE,CAAC;2BAA4B,CAAC,cAC1C;;;;;;;;;;;;;;;;;;;;;;;;+HACI;AAAC;AAA+C,YAT5C,cAAc;AAAG;;;;;;;;+EAAE;AAAC;AAAC,MCIjB,oBAAoB;AAAG,IAClC,YAAoB,SAA2B;AAAI,QAA/B,cAAS,GAAT,SAAS,CAAkB;AAAC,KAAG;AACrD,IACQ,WAAW,CAAC,KAA6B;AAAI;AACT,YAAxC,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC;AAC/C,YAAI,MAAM,MAAM,GAAW;AAC3B,gBAAM,QAAQ,EAAE,CAAC;AACjB,aAAK,CAAC;AACN,YAAI,IAAI,CAAC,WAAW,EAAE;AACtB,gBAAM,OAAO,IAAI,CAAC;AAClB,aAAK;AACL,YAAI,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,WAAW,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;AACjF,YAAI,MAAM,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;AAC3C,YAAI,MAAM,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,KAAK,wCAAwC,CAAC;AAC9F,YAAI,OAAO,WAAW,IAAI,CAAC,QAAQ,CAAC;AACpC,SAAG;AAEH,KAFG;AACH;gDAjBC,UAAU;0IACT;AAAC;AAA8C,YAHxC,gBAAgB;AAAG;;;iFAAE;AAAC;AAAC,WCahB;AAChB,IAAQ;AACR,QAAU,OAAO,EAAE,WAAW,CAAC,MAAM;AACrC,QAAU,IAAI,EAAE,eAAe;AAC/B,QAAU,QAAQ,EAAE,IAAI;AACxB,QAAU,IAAI,EAAE,WAAW;AAC3B,QAAU,KAAK,EAAE,OAAO,CAAC,eAAe,CAAC;AACzC,QAAU,SAAS,EAAE,qBAAqB;AAC1C,QAAU,WAAW,EAAE,CAAC,oBAAoB,CAAC;AAC7C,KAAS;AACT;AAAG,MAKU,kBAAkB;AAAG;8CAvBjC,QAAQ,SAAC,kBACR,YAAY,EAAE,CAAC;OAAqB,CAAC,kBACrC,OAAO,EAAE,CAAC,UAAU,EAAE,gBAAgB,EAAE,aAAa,CAAC;GACtD,eAAe,EAAE,CAAC,qBAAqB,CAAC,kBACxC,SAAS,EAAE;eACT;KAAoB;iBACpB;KACE,OAAO,EAAE;GAAe;KACxB;GAAQ,IAUP,0BACD,KAAK,EAAE,IAAI,sBACZ;gBACF,cACF;;;;;;;;;;;;;;;;yQACI;AAAC;AC9BN;AACA;AACA;AACA;AACA;AAE4D","sourcesContent":["import { Component, OnInit, EventEmitter } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { IManagedObject } from '@c8y/client';\nimport { ManagedObjectRealtimeService } from '@c8y/ngx-components';\n\n@Component({\n  selector: 'c8y-child-devices',\n  templateUrl: './child-devices.component.html',\n  providers: [ManagedObjectRealtimeService]\n})\nexport class ChildDevicesComponent implements OnInit {\n  id: string;\n\n  constructor(private route: ActivatedRoute) {}\n\n  async ngOnInit() {\n    await this.getAllDevices();\n  }\n\n  async getAllDevices() {\n    this.id = this.route.snapshot.parent.data.contextData;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\nimport { InventoryService } from '@c8y/client';\n\n@Injectable()\nexport class ChildDevicesTabGuard implements CanActivate {\n  constructor(private inventory: InventoryService) {}\n\n  async canActivate(route: ActivatedRouteSnapshot): Promise<boolean> {\n    const contextData = route.data.contextData;\n    const filter: object = {\n      pageSize: 1\n    };\n    if (!contextData) {\n      return true;\n    }\n    const device = await this.inventory.childDevicesList(contextData.id, filter);\n    const hasChildren = device.data.length;\n    const isVendme = route.data.contextData.type === 'com_nsn_startups_vendme_VendingMachine';\n    return hasChildren && !isVendme;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CoreModule, gettext, HOOK_ONCE_ROUTE, ViewContext } from '@c8y/ngx-components';\nimport { DeviceGridModule } from '@c8y/ngx-components/device-grid';\nimport { PopoverModule } from 'ngx-bootstrap/popover';\nimport { ChildDevicesComponent } from './child-devices.component';\nimport { ChildDevicesTabGuard } from './child-devices.guard';\n\n@NgModule({\n  declarations: [ChildDevicesComponent],\n  imports: [CoreModule, DeviceGridModule, PopoverModule],\n  entryComponents: [ChildDevicesComponent],\n  providers: [\n    ChildDevicesTabGuard,\n    {\n      provide: HOOK_ONCE_ROUTE,\n      useValue: [\n        {\n          context: ViewContext.Device,\n          path: 'child-devices',\n          priority: 1000,\n          icon: 'code-fork',\n          label: gettext('Child devices'),\n          component: ChildDevicesComponent,\n          canActivate: [ChildDevicesTabGuard]\n        }\n      ],\n      multi: true\n    }\n  ]\n})\nexport class ChildDevicesModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {ChildDevicesTabGuard as Éµa} from './child-devices.guard';"]}