{"version":3,"file":"c8y-ngx-components-ecosystem.js","sources":["../../ecosystem/ecosystem.model.ts","../../ecosystem/ecosystem.constants.ts","../../ecosystem/ecosystem.service.ts","../../ecosystem/applications/add-web-application/add-web-application.component.ts","../../ecosystem/shared/application-properties-form.component.ts","../../ecosystem/applications/install-from-package/install-from-package.component.ts","../../ecosystem/applications/duplicate-application/duplicate-application-list/duplicate-application-list.component.ts","../../ecosystem/applications/duplicate-application/duplicate-application-properties/duplicate-application-properties.component.ts","../../ecosystem/applications/duplicate-application/duplicate-application.component.ts","../../ecosystem/applications/add-external-applicaiton/add-external-application.component.ts","../../ecosystem/microservices/add-microservice.component.ts","../../ecosystem/applications/application-list/application-list.component.ts","../../ecosystem/applications/application-plugins/install-plugin.component.ts","../../ecosystem/applications/application-plugins/application-plugins.component.ts","../../ecosystem/applications/application-plugins/application-plugins.guard.ts","../../ecosystem/applications/application-plugins/plugin-list-item.component.ts","../../ecosystem/applications/application-plugins/plugin-list.component.ts","../../ecosystem/activity-log/activity-log.component.ts","../../ecosystem/application-properties/application-properties.component.ts","../../ecosystem/ecosystem-navigation.factory.ts","../../ecosystem/ecosystem.guard.ts","../../ecosystem/ecosystem-tabs.factory.ts","../../ecosystem/microservices/microservice-list.component.ts","../../ecosystem/packages/package-list/packages-list.component.ts","../../ecosystem/packages/add-package.component.ts","../../ecosystem/packages/package-details/package-details.component.ts","../../ecosystem/packages/deploy-application/deploy-application.component.ts","../../ecosystem/shared/add-application.component.ts","../../ecosystem/packages/package.guard.ts","../../ecosystem/shared/application-card.component.ts","../../ecosystem/application-properties/application-properties.guard.ts","../../ecosystem/features/feature-list.component.ts","../../ecosystem/packages/package-archives/package-archives.component.ts","../../ecosystem/ecosystem-wizard.factory.ts","../../ecosystem/shared/upload-archive.component.ts","../../ecosystem/ecosystem.module.ts","../../ecosystem/c8y-ngx-components-ecosystem.ts"],"names":["markedLexer","markedParser"],"mappings":";;;;;;;;;;;;;;;;;AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","sourcesContent":["export interface ApplicationState {\n  label: string;\n  class: string;\n}\n\n/** Wizard types  */\nexport enum Wizards {\n  APPLICATION_UPLOAD = 'applicationUpload',\n  MICROSERVICE_UPLOAD = 'microserviceUpload'\n}\n\nexport enum ERROR_TYPE {\n  TYPE_VALIDATION = 'TYPE_VALIDATION',\n  ALREADY_SUBSCRIBED = 'ALREADY_SUBSCRIBED',\n  INTERNAL_ERROR = 'INTERNAL_ERROR',\n  NO_MANIFEST_FILE = 'NO_MANIFEST_FILE',\n  INVALID_PACKAGE = 'INVALID_PACKAGE',\n  INVALID_APPLICATION = 'INVALID_APPLICATION'\n}\n\nexport interface ApplicationPlugin {\n  id: string;\n  name?: string;\n  module: string;\n  path: string;\n  description?: string;\n  version?: string;\n  scope?: string;\n  installed?: boolean;\n  contextPath?: string;\n}\n","import { ERROR_TYPE } from './ecosystem.model';\nimport { gettext, PropertiesListItem } from '@c8y/ngx-components';\n\nexport const ERROR_MESSAGES = {\n  [ERROR_TYPE.TYPE_VALIDATION]: gettext(\n    'Wrong file format. Expected a *.zip file with a valid manifest.'\n  ),\n  [ERROR_TYPE.ALREADY_SUBSCRIBED]: gettext(\n    'Could not subscribe to the microservice because another application with the same context path is already subscribed.'\n  ),\n  [ERROR_TYPE.NO_MANIFEST_FILE]: gettext('Could not find a manifest.'),\n  [ERROR_TYPE.INVALID_PACKAGE]: gettext('You have not uploaded a valid package.'),\n  [ERROR_TYPE.INVALID_APPLICATION]: gettext('You have not uploaded a valid application.'),\n  [ERROR_TYPE.INTERNAL_ERROR]: gettext('An internal error occurred, try to upload again.')\n};\n\nexport const APP_STATE = {\n  SUBSCRIBED: {\n    label: gettext('Subscribed`application`'),\n    class: 'label-primary'\n  },\n  CUSTOM: {\n    label: gettext('Custom`application`'),\n    class: 'label-info'\n  },\n  EXTERNAL: {\n    label: gettext('External`application`'),\n    class: 'label-warning'\n  },\n  UNPACKED: {\n    label: gettext('Unpacked`application`'),\n    class: 'label-success'\n  },\n  PACKAGE_APP: {\n    label: gettext('Application'),\n    class: 'label-success'\n  },\n  PACKAGE_PLUGIN: {\n    label: gettext('Plugins'),\n    class: 'label-info'\n  }\n};\n\nexport const packageProperties: PropertiesListItem[] = [\n  {\n    label: gettext('Version'),\n    key: 'version'\n  },\n  {\n    label: gettext('Author'),\n    key: 'author'\n  },\n  {\n    label: gettext('Keywords'),\n    key: 'keywords'\n  },\n  {\n    label: gettext('Source'),\n    key: 'repository',\n    transform: (repository: any) => (repository?.url ? repository.url : repository),\n    type: 'link',\n    action: (e, link) => window.open(link.value as string, '_blank', 'noopener,noreferrer')\n  },\n  {\n    label: gettext('Homepage'),\n    key: 'homepage',\n    type: 'link',\n    action: (e, link) => window.open(link.value as string, '_blank', 'noopener,noreferrer')\n  },\n  {\n    label: gettext('Required platform version'),\n    key: 'requiredPlatformVersion'\n  },\n  {\n    label: gettext('License'),\n    key: 'license'\n  }\n];\n","import { EventEmitter, Injectable } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport {\n  ApplicationService,\n  ApplicationType,\n  IApplication,\n  IApplicationBinary,\n  ICurrentTenant,\n  IdReference,\n  IFetchResponse,\n  IManifest,\n  IResult,\n  IResultList,\n  TenantService\n} from '@c8y/client';\nimport {\n  AlertService,\n  AppStateService,\n  gettext,\n  HumanizeAppNamePipe,\n  ModalService,\n  Status,\n  ZipService\n} from '@c8y/ngx-components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { saveAs } from 'file-saver/FileSaver';\nimport { cloneDeep, get, groupBy, kebabCase, pick } from 'lodash-es';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { debounceTime, take } from 'rxjs/operators';\nimport { APP_STATE } from './ecosystem.constants';\nimport { ApplicationState, ERROR_TYPE } from './ecosystem.model';\n\nconst CUMULOCITY_JSON = 'cumulocity.json';\n\n@Injectable()\nexport class EcosystemService {\n  appDeleted = new EventEmitter<IApplication>();\n  progress: BehaviorSubject<number> = new BehaviorSubject<number>(null);\n  private appsGroupedByContextPath: any[];\n  private xhr: XMLHttpRequest;\n\n  constructor(\n    private modal: ModalService,\n    private alertService: AlertService,\n    private humanizeAppName: HumanizeAppNamePipe,\n    private translateService: TranslateService,\n    private applicationService: ApplicationService,\n    private appStateService: AppStateService,\n    private zipService: ZipService,\n    private tenantService: TenantService\n  ) {}\n\n  getUniqueAppConfig(srcApp: IApplication, existingApps: IApplication[]): IApplication {\n    let app: IApplication = {\n      name: srcApp.name,\n      key: srcApp.key,\n      contextPath: srcApp.contextPath\n    };\n    for (let retryNo = 0; retryNo < 9; ) {\n      if (this.checkIfAppNameKeyPathExists(existingApps, app, retryNo)) {\n        retryNo++;\n        app = {\n          name: [srcApp.name, retryNo].join('-'),\n          key: [srcApp.key, retryNo].join('-'),\n          contextPath: [srcApp.contextPath, retryNo].join('-')\n        };\n      } else {\n        return app;\n      }\n    }\n    return app;\n  }\n\n  getApplication(appId: IdReference): IApplication {\n    return this.applicationService.detail(appId).then((res) => res.data);\n  }\n\n  getApplications(customFilter: any = {}): Promise<IResultList<IApplication>> {\n    const filter: object = {\n      pageSize: 2000,\n      withTotalPages: true\n    };\n    Object.assign(filter, customFilter);\n    const currentTenant = this.appStateService.currentTenant.value;\n    return this.applicationService.listByTenant(currentTenant.name, filter);\n  }\n\n  async getMicroservices(): Promise<IApplication[]> {\n    const apps = (await this.getApplications()).data;\n    const microservices = apps.filter((app) => this.isMicroservice(app));\n    return microservices.sort((a, b) => a.name.localeCompare(b.name));\n  }\n\n  async getWebApplications(customFilter: any = {}): Promise<IApplication[]> {\n    const apps = (await this.getApplications(customFilter)).data;\n    const webApps = apps.filter((app) => this.isApplication(app));\n    this.appsGroupedByContextPath = groupBy(webApps, 'contextPath');\n    return webApps.sort((a, b) => a.name.localeCompare(b.name));\n  }\n\n  async getFeatureApplications(customFilter: any = {}): Promise<IApplication[]> {\n    const apps = (await this.getApplications(customFilter)).data;\n    const webApps = apps.filter((app) => this.isFeature(app));\n    return webApps.sort((a, b) => a.name.localeCompare(b.name));\n  }\n\n  async getPackageApplications(customFilter: any = {}): Promise<IApplication[]> {\n    const apps = (await this.getApplications(customFilter)).data;\n    const webApps = apps.filter((app) => this.isPackage(app));\n    return webApps.sort((a, b) => a.name.localeCompare(b.name));\n  }\n\n  async isMicroserviceHostingAllowed(): Promise<boolean> {\n    const { data: apps } = await this.applicationService.listByName('feature-microservice-hosting');\n    return !!apps.filter(app => app.owner?.tenant?.id === 'management').length;\n  }\n\n  canOpenAppInBrowser(app: IApplication): boolean {\n    const isNotAFeature = !this.isFeature(app);\n    const hasProperType = [\n      ApplicationType.HOSTED,\n      ApplicationType.EXTERNAL,\n      ApplicationType.REPOSITORY\n    ].includes(app.type);\n    const isNotAPackage = !this.isPackage(app);\n    return isNotAFeature && hasProperType && isNotAPackage;\n  }\n\n  canDeleteApp(app: IApplication): boolean {\n    return !this.isCurrentApp(app) && this.isOwner(app);\n  }\n\n  isOwner(app: IApplication): boolean {\n    const currentTenant: ICurrentTenant = this.appStateService.currentTenant.value;\n    const appOwner = get(app, 'owner.tenant.id');\n    return currentTenant.name === appOwner;\n  }\n\n  isFeature(app: IApplication): boolean {\n    return !!app.name.match(/feature-/);\n  }\n\n  isMicroservice(app: IApplication): boolean {\n    return app.type === 'MICROSERVICE';\n  }\n\n  isExternal(app: IApplication): boolean {\n    return app.type === 'EXTERNAL';\n  }\n\n  isPackage(app: IApplication): boolean {\n    return app.manifest?.isPackage === true;\n  }\n\n  cancelAppCreation(app: IApplication): void {\n    if (this.xhr) {\n      this.xhr.abort();\n    }\n    if (app) {\n      this.applicationService.delete(app);\n    }\n  }\n\n  updateUploadProgress(event): void {\n    if (event.lengthComputable) {\n      const currentProgress = this.progress.value;\n      this.progress.next(currentProgress + (event.loaded / event.total) * (95 - currentProgress));\n    }\n  }\n\n  setAppActiveVersion(app: IApplication, activeVersionId: string): Promise<IApplication> {\n    return this.applicationService.update({ id: app.id, activeVersionId });\n  }\n\n  getHumanizedAppName(app: IApplication): Promise<string> {\n    return this.humanizeAppName.transform(app.name).pipe(debounceTime(250), take(1)).toPromise();\n  }\n\n  createConfig(app: IApplication, formGroupValue: FormGroup): Partial<FormGroup> {\n    const { id, manifest } = app;\n    let config = pick(formGroupValue, ['name', 'key', 'contextPath']);\n    config = { ...config, setup: true, id, description: manifest.description };\n    return config;\n  }\n\n  async updateAppManifest(\n    application: IApplication,\n    sourcePackage: IApplication\n  ): Promise<{ res: IFetchResponse; data: any }> {\n    const { id } = application;\n    const cleanedApp = this.removeAppProperties(application);\n    cleanedApp.setup = true;\n    cleanedApp.manifest.isPackage = false;\n    cleanedApp.manifest.source = sourcePackage.id;\n\n    return await this.applicationService\n      .binary(id)\n      .updateFiles([{ path: CUMULOCITY_JSON, contents: JSON.stringify(cleanedApp) as any }]);\n  }\n\n  async listArchives(appId: string | number | IApplication): Promise<IApplicationBinary[]> {\n    const filter = {\n      pageSize: 100\n    };\n    return (await this.applicationService.binary(appId).list(filter)).data;\n  }\n\n  async deleteArchive(archive: IApplicationBinary, app: IApplication): Promise<void> {\n    const humanizedArchiveName = await this.getHumanizedAppName(archive);\n    try {\n      await this.modal.confirm(\n        gettext('Delete archive'),\n        this.translateService.instant(\n          gettext(\n            `You are about to delete archive \"{{ humanizedArchiveName }}\". Do you want to proceed?`\n          ),\n          { humanizedArchiveName }\n        ),\n        Status.DANGER,\n        { ok: gettext('Delete'), cancel: gettext('Cancel') }\n      );\n      await this.applicationService.binary(app).delete(archive.id);\n      this.alertService.success(gettext('Archive deleted.'));\n    } catch (ex) {\n      if (ex) {\n        this.alertService.danger(get(ex, 'data.message'), ex.data);\n      }\n      throw new Error('Cancelled');\n    }\n  }\n\n  async downloadArchive(app: IApplication, archive: IApplicationBinary): Promise<void> {\n    try {\n      const binary = await this.getBinary(app, archive);\n      const fileBinary = new Blob([binary], { type: 'application/x-zip-compressed' });\n      saveAs(fileBinary, archive.name);\n    } catch (e) {\n      // empty\n    }\n  }\n\n  async updateApp(app: IApplication, deleteOnFailure: boolean = false): Promise<IResult<IApplication>> {\n    try {\n      return await this.applicationService.update(app);\n    } catch (ex) {\n      this.alertService.addServerFailure(ex);\n      if (deleteOnFailure) {\n        await this.applicationService.delete(app.id);\n        throw new Error('Application creation failed.');\n      }\n    }\n  }\n\n  async deleteApp(app: IApplication): Promise<void> {\n    const humanizedAppName = await this.getHumanizedAppName(app);\n    await this.modal.confirm(\n      gettext('Delete application'),\n      this.translateService.instant(\n        gettext(\n          `You are about to delete application \"{{ humanizedAppName }}\". Do you want to proceed?`\n        ),\n        { humanizedAppName }\n      ),\n      Status.DANGER,\n      { ok: gettext('Delete'), cancel: gettext('Cancel') }\n    );\n    await this.applicationService.delete(app.id);\n    this.alertService.success(gettext('Application deleted.'));\n    this.appDeleted.emit(app);\n  }\n\n  async checkIfSubscribed(app: IApplication): Promise<boolean> {\n    const currentTenant = await this.tenantService.current();\n    const subscribedApps = currentTenant.data.applications.references;\n    return subscribedApps.some((application) => application.application.id === app.id);\n  }\n\n  async subscribeApp(app: IApplication): Promise<void> {\n    const currentTenant: ICurrentTenant = this.appStateService.currentTenant.value;\n    try {\n      await this.tenantService.subscribeApplication(currentTenant, app);\n      this.alertService.success(gettext('Successfully subscribed to application.'));\n    } catch (ex) {\n      this.alertService.addServerFailure(ex);\n    }\n  }\n\n  async unsubscribeApp(app: IApplication): Promise<void> {\n    const currentTenant: ICurrentTenant = this.appStateService.currentTenant.value;\n    try {\n      await this.tenantService.unsubscribeApplication(currentTenant, app);\n      this.alertService.success(gettext('Successfully unsubscribed from application.'));\n    } catch (ex) {\n      this.alertService.addServerFailure(ex);\n    }\n  }\n\n  async isValidAppType(archive: File, appType: ApplicationType): Promise<boolean> {\n    try {\n      const currentType = await this.getAppType(archive);\n      if (currentType !== appType) {\n        throw new Error(ERROR_TYPE.TYPE_VALIDATION);\n      } else {\n        this.progress.next(this.progress.value + 10);\n        return true;\n      }\n    } catch (ex) {\n      throw new Error(ERROR_TYPE.TYPE_VALIDATION);\n    }\n  }\n\n  async uploadArchiveToApp(archive: File, app: IApplication): Promise<IApplication> {\n    const binaryService = this.applicationService.binary(app);\n    this.xhr = binaryService.uploadWithProgressXhr(archive, this.updateUploadProgress.bind(this));\n\n    const binaryMo = await binaryService.getXMLHttpResponse(this.xhr);\n    return (await this.setAppActiveVersion(app, binaryMo.id as string)).data;\n  }\n\n  async createAppForArchive(archive, isPackageTypeArchive: boolean = false): Promise<IApplication> {\n    let isPackage: boolean = false;\n    const appType = await this.getAppType(archive);\n    let appModel: any = {};\n\n    if (appType === ApplicationType.HOSTED) {\n      try {\n        appModel = await this.getCumulocityJson(archive).toPromise();\n        isPackage = appModel.isPackage;\n      } catch (e) {\n        // do nothing, we allow having HOSTED applications without the manifest file\n      }\n    }\n    const name = this.getBaseNameFromArchiveOrAppModel(archive, appType, appModel);\n    const clearedName = this.removeForbiddenCharacters(name);\n    const key = this.getAppKey(appModel, clearedName);\n    const contextPath = this.getContextPath(appModel, name);\n\n    const appToSave = {\n      resourcesUrl: '/',\n      type: appType,\n      name,\n      key,\n      contextPath\n    };\n\n    if (isPackageTypeArchive && !isPackage) {\n      throw new Error(ERROR_TYPE.INVALID_PACKAGE);\n    } else if (!isPackageTypeArchive && isPackage) {\n      throw new Error(ERROR_TYPE.INVALID_APPLICATION);\n    }\n    return (\n      await this.applicationService.create({\n        ...appToSave,\n        manifest: { isPackage } as unknown as IManifest\n      })\n    ).data;\n  }\n\n  async reactivateArchive(app: IApplication): Promise<void> {\n    try {\n      await this.applicationService.reactivateArchive(app.id);\n      this.alertService.success(gettext('Application reactivated.'));\n    } catch (ex) {\n      this.alertService.addServerFailure(ex);\n    }\n  }\n\n  async removeOldestArchive(app: IApplication, archives: IApplicationBinary[]): Promise<void> {\n    try {\n      await this.modal.confirm(\n        gettext('Delete oldest archive and continue'),\n        gettext(\n          'Up to 6 archives can be saved in the platform. If you upload a new archive, the oldest archive that is not active will be deleted. Do you want to proceed?'\n        ),\n        Status.INFO,\n        { ok: gettext('Delete and continue') }\n      );\n      const archiveToDelete = archives[archives.length - 2];\n      await this.applicationService.binary(app).delete(archiveToDelete.id);\n      this.alertService.success(gettext('Archive deleted.'));\n    } catch (ex) {\n      this.alertService.addServerFailure(ex);\n    }\n  }\n\n  getAppState(app: IApplication): ApplicationState {\n    if (!this.isOwner(app)) {\n      return APP_STATE.SUBSCRIBED;\n    } else if (this.isUnpacked(app)) {\n      return APP_STATE.UNPACKED;\n    } else if (app.type === ApplicationType.EXTERNAL) {\n      return APP_STATE.EXTERNAL;\n    } else if (this.isApplicationPackage(app)) {\n      return APP_STATE.PACKAGE_APP;\n    } else if (this.isPluginsPackage(app)) {\n      return APP_STATE.PACKAGE_PLUGIN;\n    }\n    return APP_STATE.CUSTOM;\n  }\n\n  isApplicationPackage(app: IApplication): boolean {\n    return this.isPackage(app) && app.manifest.package === 'application';\n  }\n\n  isPluginsPackage(app: IApplication): boolean {\n    return this.isPackage(app) && app.manifest.package === 'plugin';\n  }\n\n  isUnpacked(app: IApplication): boolean {\n    return !!app.manifest?.source;\n  }\n\n  hasExports(app: IApplication): boolean {\n    return !!app.manifest?.exports?.length;\n  }\n\n  isApplication(app: IApplication): boolean {\n    return (\n      app.type !== ApplicationType.MICROSERVICE && !this.isFeature(app) && !this.isPackage(app)\n    );\n  }\n\n  isCustomMicroservice(app: IApplication) {\n    return this.isOwner(app) && app.type === ApplicationType.MICROSERVICE;\n  }\n\n  async isOverwrittenByCustomApp(app: IApplication): Promise<boolean> {\n    if (!this.appsGroupedByContextPath) {\n      await this.getWebApplications();\n    }\n    return (\n      app.contextPath &&\n      this.appsGroupedByContextPath[app.contextPath].length === 2 &&\n      !this.isOwner(app)\n    );\n  }\n\n  private getAppKey(appModel: IApplication, name: string): string {\n    let key = appModel?.key;\n    if (!key) {\n      key = `${kebabCase(name)}-key`;\n    }\n    return key;\n  }\n\n  private getContextPath(appModel: IApplication, name: string): string {\n    return appModel?.contextPath || name.toLowerCase();\n  }\n\n  private removeForbiddenCharacters(str: string): string {\n    return str.replace(/[^a-zA-Z0-9-_]/g, '');\n  }\n\n  private isCurrentApp(app: IApplication): boolean {\n    const currentApp = this.appStateService.state.app;\n    return currentApp.contextPath === app.contextPath;\n  }\n\n  private getCumulocityJson(archive: File): Observable<any> {\n    return this.zipService.getJsonData(archive, {\n      filename: CUMULOCITY_JSON\n    });\n  }\n\n  private getAppType(archive: File): Promise<ApplicationType> {\n    return this.getCumulocityJson(archive)\n      .toPromise()\n      .then(\n        (data) =>\n          get(data, 'type') ||\n          (get(data, 'apiVersion') ? ApplicationType.MICROSERVICE : ApplicationType.HOSTED)\n      )\n      .catch(() => ApplicationType.HOSTED);\n  }\n\n  private async getBinary(app: IApplication, archive: IApplicationBinary): Promise<ArrayBuffer> {\n    let binary;\n    try {\n      const res = await this.applicationService.binary(app).downloadArchive(archive.id);\n      binary = await res.arrayBuffer();\n    } catch (ex) {\n      const msg = gettext('Could not get the binary.');\n      this.alertService.danger(msg);\n    }\n    return binary;\n  }\n\n  private getBaseNameFromArchiveOrAppModel(\n    archive: any,\n    appType: ApplicationType,\n    appModel?: IApplication\n  ): string {\n    let baseName = appModel?.name || archive.name.replace(/\\.zip$/i, '');\n    if (appType === 'MICROSERVICE') {\n      baseName = baseName.replace(/-\\d+\\.\\d+\\.\\d+(-SNAPSHOT)?$/, '');\n    }\n    return baseName;\n  }\n\n  private checkIfAppNameKeyPathExists(existingApps: IApplication[], app: IApplication, retryNo: number): IApplication {\n    return existingApps.find(\n      (existingApp) =>\n        existingApp.name === app.name ||\n        existingApp.key === app.key ||\n        existingApp.contextPath === app.contextPath ||\n        existingApp.name === [app.name, retryNo].join('-') ||\n        existingApp.key === [app.key, retryNo].join('-') ||\n        existingApp.contextPath === [app.contextPath, retryNo].join('-')\n    );\n  }\n\n  private removeAppProperties(app: IApplication): IApplication {\n    const tempApp = cloneDeep(app);\n    const propertiesToRemove = ['id', 'owner', 'activeVersionId'];\n\n    propertiesToRemove.forEach(prop => delete tempApp[prop]);\n    return tempApp;\n  }\n}\n","import { Component } from '@angular/core';\nimport { ApplicationType, IApplication } from '@c8y/client';\nimport { gettext } from '@c8y/ngx-components';\nimport { EcosystemService } from '../../ecosystem.service';\n\n@Component({\n  selector: 'c8y-add-web-application',\n  template: `<c8y-add-application\n    [headerText]=\"headerText\"\n    [headerIcon]=\"'upload'\"\n    [successText]=\"successText\"\n    [createApplicationHandler]=\"createApplicationHandler\"\n    [uploadApplicationHandler]=\"uploadApplicationHandler\"\n    [canGoBack]=\"true\"\n  ></c8y-add-application>`\n})\nexport class AddWebApplicationComponent {\n  headerText: string = gettext('Upload web application');\n  successText: string = gettext('Application created');\n\n  constructor(private ecosystemService: EcosystemService) {}\n\n  createApplicationHandler = (f: File) => this.createApplication(f);\n  uploadApplicationHandler = (f: File, app: IApplication) => this.uploadApplication(f, app);\n\n  async createApplication(file: File): Promise<IApplication> {\n    await this.ecosystemService.isValidAppType(file, ApplicationType.HOSTED);\n    return this.ecosystemService.createAppForArchive(file);\n  }\n\n  async uploadApplication(file: File, app: IApplication): Promise<IApplication> {\n    return this.ecosystemService.uploadArchiveToApp(file, app);\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { IApplication } from '@c8y/client';\n\n@Component({\n  selector: 'c8y-application-properties-form',\n  templateUrl: './application-properties-form.component.html'\n})\nexport class ApplicationPropertiesFormComponent implements OnInit {\n  formGroup: FormGroup;\n  @Input() application: IApplication;\n  @Input() isPackage: boolean;\n\n  constructor(private formBuilder: FormBuilder) {}\n\n  async ngOnInit() {\n    this.initForm();\n    this.setForm(this.application);\n  }\n\n  private initForm() {\n    this.formGroup = this.formBuilder.group({\n      name: [Validators.required, Validators.maxLength(120)],\n      key: [Validators.required, Validators.maxLength(120)],\n      contextPath: [Validators.required, Validators.maxLength(120)]\n    });\n  }\n\n  private setForm(applicationConfig: IApplication) {\n    this.formGroup.patchValue({ ...applicationConfig });\n  }\n}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ApplicationService, IApplication } from '@c8y/client';\nimport { WizardComponent } from '@c8y/ngx-components';\nimport { EcosystemService } from '../../ecosystem.service';\nimport { ApplicationPropertiesFormComponent } from '../../shared/application-properties-form.component';\n\n@Component({\n  selector: 'c8y-install-from-package',\n  templateUrl: './install-from-package.component.html'\n})\nexport class InstallFromPackageComponent implements OnInit {\n  newAppConfig: IApplication;\n  selectedPackage: IApplication;\n  packages: IApplication[];\n  inProgress: boolean;\n  deployedWithSuccess: boolean = false;\n  isDeployed: boolean = false;\n\n  @ViewChild(ApplicationPropertiesFormComponent)\n  applicationPropertiesForm: ApplicationPropertiesFormComponent;\n\n  constructor(\n    private ecosystemService: EcosystemService,\n    private applicationService: ApplicationService,\n    private wizardComponent: WizardComponent\n  ) {}\n\n  async ngOnInit() {\n    this.loadPackages();\n  }\n\n  back() {\n    this.wizardComponent.reset();\n  }\n\n  cancel() {\n    this.wizardComponent.close();\n  }\n\n  async save() {\n    const formGroupValue = this.applicationPropertiesForm.formGroup.getRawValue();\n    this.inProgress = true;\n\n    const { data: clonedPkg } = await this.applicationService.clone(this.selectedPackage);\n    const config = this.ecosystemService.createConfig(clonedPkg, formGroupValue);\n\n    try {\n      const { data: updatedApp } = await this.ecosystemService.updateApp(config, true);\n\n      if (updatedApp) {\n        await this.ecosystemService.updateAppManifest(updatedApp, this.selectedPackage);\n      }\n      this.deployedWithSuccess = true;\n    } catch (error) {\n      this.inProgress = false;\n      await this.applicationService.delete(clonedPkg.id);\n    }\n    this.markAsDeployed();\n  }\n\n  async selectPackage(selectedPackage: IApplication) {\n    const apps = await this.ecosystemService.getWebApplications();\n    this.newAppConfig = this.ecosystemService.getUniqueAppConfig(selectedPackage, apps);\n    this.selectedPackage = selectedPackage;\n  }\n  /* The 'select package version' option will be added later when BE support for multiple app versions has been implemented. MTM-40278\n  // onSelectedArchive(archive) {\n  //   this.formGroup.controls['packageVersion'].setValue(archive.name);\n  // } */\n\n  private markAsDeployed() {\n    this.isDeployed = true;\n    this.inProgress = false;\n  }\n\n  private async loadPackages(): Promise<void> {\n    const applications = await this.ecosystemService.getApplications();\n    this.packages = applications.data.filter((app) =>\n      this.ecosystemService.isApplicationPackage(app)\n    );\n  }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { IApplication } from '@c8y/client';\nimport { C8yStepper, WizardComponent } from '@c8y/ngx-components';\nimport { ApplicationState } from '../../../ecosystem.model';\nimport { EcosystemService } from '../../../ecosystem.service';\n\n@Component({\n  selector: 'c8y-duplicate-application-list',\n  templateUrl: './duplicate-application-list.component.html'\n})\nexport class DuplicateApplicationListComponent {\n  @Input() stepper: C8yStepper;\n  @Input() existingApps: IApplication[];\n  @Output() onSelectedApp = new EventEmitter<IApplication>();\n  appState: ApplicationState;\n\n  constructor(\n    public ecosystemService: EcosystemService,\n    private wizardComponent: WizardComponent\n  ) {}\n\n  select(selectedApp: IApplication) {\n    this.onSelectedApp.emit(selectedApp);\n    this.stepper.next();\n  }\n\n  cancel() {\n    this.wizardComponent.close();\n  }\n\n  back() {\n    this.wizardComponent.reset();\n  }\n}\n","import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';\nimport { ApplicationService, IApplication } from '@c8y/client';\nimport { C8yStepper } from '@c8y/ngx-components';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\nimport { BehaviorSubject } from 'rxjs';\nimport { EcosystemService } from '../../../ecosystem.service';\nimport { ApplicationPropertiesFormComponent } from '../../../shared/application-properties-form.component';\n\n@Component({\n  selector: 'c8y-duplicate-application-properties',\n  templateUrl: './duplicate-application-properties.component.html'\n})\nexport class DuplicateApplicationPropertiesComponent {\n  @Input() stepper: C8yStepper;\n  @Input() existingApps: IApplication[];\n  @Input() selectedApp: BehaviorSubject<IApplication>;\n  @Output() duplicatedApp = new EventEmitter<IApplication>();\n  @ViewChild(ApplicationPropertiesFormComponent)\n  applicationPropertiesForm: ApplicationPropertiesFormComponent;\n  newAppConfig: IApplication;\n\n  inProgress: boolean = false;\n\n  constructor(\n    private bsModalRef: BsModalRef,\n    private ecosystemService: EcosystemService,\n    private applicationService: ApplicationService\n  ) {}\n\n  ngOnInit() {\n    this.newAppConfig = this.ecosystemService.getUniqueAppConfig(\n      this.selectedApp.value,\n      this.existingApps\n    );\n  }\n\n  async duplicateApp() {\n    const formGroupValue = this.applicationPropertiesForm.formGroup.getRawValue();\n    this.inProgress = true;\n    const clonedApp = (await this.applicationService.clone(this.selectedApp.value)).data;\n\n    Object.assign(clonedApp, formGroupValue);\n    delete clonedApp.type;\n\n    await this.updateApp(clonedApp);\n    this.inProgress = false;\n  }\n\n  cancel() {\n    this.bsModalRef.hide();\n  }\n\n  back() {\n    this.stepper.previous();\n  }\n\n  private async updateApp(clonedAppConfig: Partial<IApplication>) {\n    try {\n      const app = (await this.ecosystemService.updateApp(clonedAppConfig, true)).data;\n      this.duplicatedApp.emit(app);\n      this.stepper.next();\n    } catch (err) {\n      this.inProgress = false;\n    }\n  }\n}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ApplicationService, IApplication } from '@c8y/client';\nimport { C8yStepper, WizardComponent } from '@c8y/ngx-components';\nimport { BehaviorSubject, Subject } from 'rxjs';\nimport { EcosystemService } from './../../ecosystem.service';\n\n@Component({\n  selector: 'c8y-duplicate-application',\n  templateUrl: './duplicate-application.component.html'\n})\nexport class DuplicateApplicationComponent implements OnInit {\n  @ViewChild(C8yStepper, { static: true })\n  stepper: C8yStepper;\n  duplicatedApp: IApplication;\n  selectedApp: Subject<IApplication> = new BehaviorSubject<IApplication>(null);\n  existingApps: IApplication[] = [];\n\n  constructor(\n    private ecosystemService: EcosystemService,\n    private applicationService: ApplicationService,\n    private wizardComponent: WizardComponent\n  ) {}\n\n  async ngOnInit() {\n    this.existingApps = await this.ecosystemService.getWebApplications();\n  }\n\n  onSelectedApp(app: IApplication) {\n    this.selectedApp.next(app);\n  }\n\n  getHref(app: IApplication): string {\n    return this.applicationService.getHref(app);\n  }\n\n  done() {\n    this.wizardComponent.close();\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ApplicationService, ApplicationType, IApplication, IManifest } from '@c8y/client';\nimport { AlertService, WizardComponent } from '@c8y/ngx-components';\n\n@Component({\n  selector: 'c8y-add-external-application',\n  templateUrl: './add-external-application.component.html'\n})\nexport class AddExternalApplicationComponent implements OnInit {\n  formGroup: FormGroup;\n  createdApp: IApplication;\n\n  constructor(\n    private applicationService: ApplicationService,\n    private formBuilder: FormBuilder,\n    private alertService: AlertService,\n    private wizardComponent: WizardComponent\n  ) {}\n\n  ngOnInit() {\n    this.initForm();\n  }\n\n  back() {\n    this.wizardComponent.reset();\n  }\n\n  cancel() {\n    this.wizardComponent.close();\n  }\n\n  done() {\n    this.wizardComponent.close();\n  }\n\n  async save(app) {\n    const appToSave = {\n      manifest: {} as IManifest,\n      externalUrl: app.externalUrl,\n      type: ApplicationType.EXTERNAL,\n      name: app.name,\n      key: app.key\n    };\n    try {\n      this.createdApp = await this.applicationService.create(appToSave);\n    } catch (ex) {\n      this.alertService.addServerFailure(ex);\n    }\n  }\n\n  private initForm(): void {\n    this.formGroup = this.formBuilder.group({\n      name: ['', [Validators.required, Validators.maxLength(120)]],\n      key: ['', [Validators.required, Validators.maxLength(120)]],\n      externalUrl: ['', Validators.required]\n    });\n  }\n}\n","import { Component } from '@angular/core';\nimport { gettext, ModalService, Status } from '@c8y/ngx-components';\nimport { ApplicationType, IApplication, TenantService } from '@c8y/client';\nimport { EcosystemService } from '../ecosystem.service';\nimport { ERROR_TYPE } from '../ecosystem.model';\n\n@Component({\n  selector: 'c8y-add-microservice',\n  template: `<c8y-add-application\n    [headerText]=\"headerText\"\n    [headerIcon]=\"'microchip'\"\n    [successText]=\"successText\"\n    [createApplicationHandler]=\"createMicroserviceApplicationHandler\"\n    [uploadApplicationHandler]=\"uploadMicroserviceHandler\"\n  ></c8y-add-application>`\n})\nexport class AddMicroserviceComponent {\n  headerText: string = gettext('Add microservice');\n  successText: string = gettext('Microservice created');\n\n  constructor(\n    private ecosystemService: EcosystemService,\n    private modal: ModalService,\n    private tenantService: TenantService\n  ) {}\n\n  createMicroserviceApplicationHandler = (f: File) => this.createMicroserviceApplication(f);\n  uploadMicroserviceHandler = (f: File, app: IApplication) => this.uploadMicroservice(f, app);\n\n  async createMicroserviceApplication(file: File): Promise<IApplication> {\n    await this.ecosystemService.isValidAppType(file, ApplicationType.MICROSERVICE);\n    return this.ecosystemService.createAppForArchive(file);\n  }\n\n  async uploadMicroservice(file: File, microservice: IApplication): Promise<void> {\n    const subscribeToCurrentTenant = await this.askIfActivationAfterUploadNeeded();\n    await this.ecosystemService.uploadArchiveToApp(file, microservice);\n    await this.subscribeMicroservice(microservice, subscribeToCurrentTenant);\n  }\n\n  private async askIfActivationAfterUploadNeeded(): Promise<boolean> {\n    try {\n      await this.modal.confirm(\n        gettext('Subscribe to microservice'),\n        gettext(\n          'You are about to subscribe to the microservice after upload. Do you want to subscribe to it?'\n        ),\n        Status.INFO,\n        { ok: gettext('Subscribe'), cancel: gettext(\"Don't subscribe\") }\n      );\n      return true;\n    } catch (ex) {\n      return false;\n    }\n  }\n\n  private async subscribeMicroservice(\n    app: IApplication,\n    subscribeToCurrentTenant: boolean\n  ): Promise<any> {\n    const tenant = (await this.tenantService.current()).data;\n    const applications = tenant.applications.references;\n\n    const isSubscribed = applications.some(({ application }) => application.id === app.id);\n    if (!isSubscribed && subscribeToCurrentTenant) {\n      try {\n        return await this.tenantService.subscribeApplication(tenant, app);\n      } catch (res) {\n        if (res.status === 409) {\n          throw Error(ERROR_TYPE.ALREADY_SUBSCRIBED);\n        }\n      }\n    } else if (isSubscribed && !subscribeToCurrentTenant) {\n      return this.tenantService.unsubscribeApplication(tenant, app);\n    }\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { IApplication } from '@c8y/client';\nimport { WizardConfig, WizardService } from '@c8y/ngx-components';\nimport { ModalOptions } from 'ngx-bootstrap/modal';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { shareReplay, switchMap, tap } from 'rxjs/operators';\nimport { EcosystemService } from './../../ecosystem.service';\n\n@Component({\n  selector: 'c8y-application-list',\n  templateUrl: './application-list.component.html'\n})\nexport class ApplicationListComponent implements OnInit {\n  reloading: boolean = false;\n  reload$: BehaviorSubject<void> = new BehaviorSubject(null);\n\n  apps$: Observable<IApplication> = this.reload$.pipe(\n    tap(() => (this.reloading = true)),\n    switchMap(() => this.ecosystemService.getWebApplications()),\n    tap(() => (this.reloading = false)),\n    shareReplay()\n  );\n\n  listClass: string;\n\n  constructor(private ecosystemService: EcosystemService, private wizardService: WizardService) {}\n\n  ngOnInit() {\n    this.loadApplications();\n  }\n\n  loadApplications() {\n    this.reload$.next();\n  }\n\n  addApplication() {\n    const wizardConfig: WizardConfig = {\n      headerText: 'Add Application',\n      headerIcon: 'c8y-atom'\n    };\n\n    const initialState: any = {\n      wizardConfig,\n      id: 'uploadApplication'\n    };\n\n    const modalOptions: ModalOptions = { initialState };\n\n    const modalRef = this.wizardService.show(modalOptions);\n    modalRef.content.onClose.subscribe(() => {\n      this.loadApplications();\n    });\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { ModalService, gettext, Status } from '@c8y/ngx-components';\nimport { ApplicationPlugin } from '../../ecosystem.model';\nimport { BehaviorSubject, combineLatest, Observable } from 'rxjs';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'c8y-install-plugin',\n  templateUrl: './install-plugin.component.html'\n})\nexport class InstallPluginComponent implements OnInit {\n  @Input() plugins$: BehaviorSubject<ApplicationPlugin[]>;\n  filterTerm$: BehaviorSubject<string> = new BehaviorSubject('');\n  filteredPlugins$: Observable<ApplicationPlugin[]> = new BehaviorSubject([]);\n  selectedPlugins: string[] = [];\n  result: Promise<void> = new Promise((resolve, reject) => {\n    this._install = resolve;\n    this._cancel = reject;\n  });\n  private _install;\n  private _cancel;\n\n  constructor(private bsModalRef: BsModalRef, private modal: ModalService) {}\n\n  ngOnInit() {\n    this.filteredPlugins$ = combineLatest(this.plugins$, this.filterTerm$).pipe(\n      map(([plugins, filterTerm]) =>\n        filterTerm.trim().length === 0\n          ? plugins\n          : plugins.filter((plugin: ApplicationPlugin) =>\n              this.filterContainString(plugin.name, filterTerm)\n            )\n      )\n    );\n  }\n\n  cancel() {\n    this.bsModalRef.hide();\n    this._cancel();\n  }\n\n  async install() {\n    await this.modal.confirm(\n      gettext('Install plugins'),\n      gettext(\n        'The operation may take several minutes. During this time the application may be unavailable. Do you want to proceed?'\n      ),\n      Status.INFO,\n      { ok: gettext('Continue') }\n    );\n    this._install(this.selectedPlugins);\n    this.bsModalRef.hide();\n  }\n\n  private filterContainString(name: string, filterTerm: string) {\n    const term = filterTerm.toLowerCase().trim();\n    return name && name.toLowerCase().indexOf(term) > -1;\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { BehaviorSubject, combineLatest, Observable } from 'rxjs';\nimport { ApplicationRemotePlugins, IApplication, IApplicationBinary, IManifest } from '@c8y/client';\nimport { ActivatedRoute } from '@angular/router';\nimport { EcosystemService } from '../../ecosystem.service';\nimport { ApplicationPlugin } from '../../ecosystem.model';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { InstallPluginComponent } from './install-plugin.component';\nimport { AlertService, gettext, ModalService, PluginsService, Status } from '@c8y/ngx-components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { map, shareReplay } from 'rxjs/operators';\n\n@Component({\n  selector: 'c8y-app-plugins',\n  templateUrl: './application-plugins.component.html'\n})\nexport class ApplicationPluginsComponent implements OnInit {\n  exportedPlugins$: BehaviorSubject<ApplicationPlugin[]> = new BehaviorSubject([]);\n  remotePlugins$: BehaviorSubject<ApplicationRemotePlugins> = new BehaviorSubject({});\n  allAvailablePlugins$: BehaviorSubject<ApplicationPlugin[]> = new BehaviorSubject([]);\n\n  installedPlugins$: Observable<ApplicationPlugin[]> = combineLatest([\n    this.remotePlugins$.pipe(map((remotes) => this.getRemotePluginsList(remotes))),\n    this.allAvailablePlugins$\n  ]).pipe(\n    map(([remotePlugins, allPlugins]) => allPlugins.filter((p) => remotePlugins.includes(p.id))),\n    shareReplay(1)\n  );\n  app: IApplication;\n  isLoading: boolean;\n  pluginsToDelete: string[] = [];\n  archives: IApplicationBinary[] = [];\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private ecosystemService: EcosystemService,\n    private bsModalService: BsModalService,\n    private modal: ModalService,\n    private translateService: TranslateService,\n    private pluginsService: PluginsService,\n    private alertService: AlertService\n  ) {}\n\n  async ngOnInit() {\n    const { id } = this.activatedRoute.snapshot.parent.data.contextData;\n    this.app = await this.ecosystemService.getApplication(id);\n    this.archives = await this.ecosystemService.listArchives(this.app.id);\n    this.archives.sort((a, b) => {\n      return (new Date(b.created) as any) - (new Date(a.created) as any);\n    });\n    const manifest: Partial<IManifest> = this.app.manifest;\n    if (manifest) {\n      const exports = manifest.exports || [];\n      this.exportedPlugins$.next(this.extendPluginList(exports, this.app.contextPath));\n      const remotes = manifest.remotes || {};\n      this.remotePlugins$.next(remotes);\n    }\n    this.allAvailablePlugins$.next(await this.getAllPlugins());\n  }\n\n  async installPlugins() {\n    const initialState: any = {\n      plugins$: combineLatest([\n        this.allAvailablePlugins$,\n        this.installedPlugins$.pipe(map((plugins) => plugins.map((p) => p.id))),\n        this.exportedPlugins$.pipe(map((plugins) => plugins.map((p) => p.id)))\n      ]).pipe(\n        map(([allPlugins, installedPlugins, exportedPluginNames]) => {\n          const plugins = [];\n          allPlugins\n            .filter((p) => !exportedPluginNames.includes(p.id))\n            .forEach((p) => plugins.push({ ...p, installed: !!installedPlugins.includes(p.id) }));\n          return plugins;\n        }),\n        shareReplay(1)\n      )\n    };\n\n    try {\n      const pluginsToAdd: string[] = (await (\n        this.bsModalService.show(InstallPluginComponent, {\n          class: 'modal-md',\n          initialState,\n          ignoreBackdropClick: true\n        }).content as InstallPluginComponent\n      ).result) as any as string[];\n\n      const currentRemotes = { ...this.remotePlugins$.value };\n      pluginsToAdd.forEach((pluginId) => {\n        const { contextPath, name } = this.parsePluginId(pluginId);\n        (currentRemotes[contextPath] = currentRemotes[contextPath] || []).push(name);\n      });\n      if (this.archives.length === 6) {\n        await this.ecosystemService.removeOldestArchive(this.app, this.archives);\n      }\n      this.updateApplicationRemotes(currentRemotes);\n    } catch (ex) {\n      // intended empty\n    }\n  }\n\n  async removePlugins() {\n    const humanizedAppName = await this.ecosystemService.getHumanizedAppName(this.app);\n    try {\n      await this.modal.confirm(\n        gettext('Remove plugins'),\n        this.translateService.instant(\n          gettext(\n            `You are about to remove plugins from application \"{{ humanizedAppName }}\". The operation may take several minutes. During this time the application may be unavailable. Do you want to proceed?`\n          ),\n          { humanizedAppName }\n        ),\n        Status.DANGER,\n        {\n          ok: gettext('Remove'),\n          cancel: gettext('Cancel')\n        }\n      );\n\n      const remotes = { ...this.remotePlugins$.value };\n      this.pluginsToDelete.forEach((pluginId) => {\n        const { contextPath, name } = this.parsePluginId(pluginId);\n        remotes[contextPath] = remotes[contextPath].filter((p) => p !== name);\n      });\n      this.updateApplicationRemotes(remotes);\n    } catch (ex) {\n      // do nothing\n    }\n  }\n\n  private async getAllPlugins(): Promise<ApplicationPlugin[]> {\n    const plugins = [];\n    const packages = await this.ecosystemService.getPackageApplications();\n    const apps = [...packages, this.app];\n    apps.forEach((app) => {\n      const exports = (app.manifest && app.manifest.exports) || [];\n      plugins.push(...this.extendPluginList(exports, app.contextPath));\n    });\n    return plugins;\n  }\n\n  private async updateApplicationRemotes(remotes: ApplicationRemotePlugins): Promise<void> {\n    this.isLoading = true;\n    try {\n      await this.pluginsService.updateRemotesInCumulocityJson(this.app, remotes);\n      this.remotePlugins$.next(remotes);\n    } catch (ex) {\n      this.alertService.danger(ex);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private getRemotePluginsList(remotes: ApplicationRemotePlugins): string[] {\n    const importContextPaths = Object.keys(remotes);\n    const plugins = [];\n    importContextPaths.forEach((contextPath) => {\n      const moduleNames = remotes[contextPath];\n      plugins.push(...moduleNames.map((module) => this.createPluginId(contextPath, module)));\n    });\n    return plugins;\n  }\n\n  private extendPluginList(plugins: ApplicationPlugin[], contextPath: string): ApplicationPlugin[] {\n    const extendedPlugins = [];\n    plugins.map((p) => {\n      extendedPlugins.push({\n        ...p,\n        id: this.createPluginId(contextPath, p.name, p.module),\n        contextPath\n      });\n    });\n    return extendedPlugins;\n  }\n\n  private createPluginId(contextPath: string, pluginName: string, pluginModuleName?: string): string {\n    return `${contextPath}/${pluginModuleName || pluginName}`;\n  }\n\n  private parsePluginId(id: string): { contextPath: string; name: string } {\n    const [contextPath, name] = id.split('/');\n    return { contextPath, name };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\nimport { ApplicationType } from '@c8y/client';\nimport { EcosystemService } from '../../ecosystem.service';\n\n@Injectable()\nexport class ApplicationPluginsGuard implements CanActivate {\n  constructor(private ecosystemService: EcosystemService) {}\n\n  canActivate(route: ActivatedRouteSnapshot) {\n    const app = route.data.contextData || route.parent.data.contextData;\n    if (!app) {\n      return false;\n    }\n    return (\n      app.type === ApplicationType.HOSTED &&\n      this.ecosystemService.isOwner(app) &&\n      !this.ecosystemService.isPackage(app)\n    );\n  }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { ApplicationPlugin } from '../../ecosystem.model';\n\n@Component({\n  selector: 'c8y-plugin-list-item',\n  templateUrl: './plugin-list-item.component.html'\n})\nexport class PluginListItemComponent {\n  @Input() plugin: ApplicationPlugin;\n  @Input() selectable: boolean;\n  @Output() isItemSelected: EventEmitter<boolean> = new EventEmitter();\n\n  onChange(event) {\n    this.isItemSelected.next(event);\n  }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { ApplicationPlugin } from '../../ecosystem.model';\n\n@Component({\n  selector: 'c8y-plugin-list',\n  templateUrl: './plugin-list.component.html'\n})\nexport class PluginListComponent {\n  @Input() plugins$: BehaviorSubject<ApplicationPlugin[]>;\n  @Input() emptyListText: string = '';\n  @Input() selectable: boolean;\n  @Output() selectedItems: EventEmitter<string[]> = new EventEmitter();\n  selectedPlugins: object = {};\n\n  updateSelectedItems(value: boolean, name: string) {\n    this.selectedPlugins[name] = value;\n    this.selectedItems.emit(\n      Object.keys(this.selectedPlugins).filter((k) => this.selectedPlugins[k])\n    );\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { IApplication, IApplicationBinary } from '@c8y/client';\nimport { AlertService } from '@c8y/ngx-components';\nimport { BehaviorSubject } from 'rxjs';\nimport { EcosystemService } from '../ecosystem.service';\n\n@Component({\n  selector: 'c8y-activity-log',\n  templateUrl: './activity-log.component.html'\n})\nexport class ActivityLogComponent implements OnInit {\n  @Input() application: IApplication;\n  archives: IApplicationBinary[] = [];\n  toActivateVersionId: string;\n  last: IApplicationBinary;\n  isLoading: boolean;\n  canReactivate: boolean = false;\n\n  constructor(private ecosystemService: EcosystemService, private alertService: AlertService) {}\n\n  get uploadProgress(): BehaviorSubject<number> {\n    return this.ecosystemService.progress;\n  }\n\n  async ngOnInit() {\n    this.canReactivate = this.showReactivate();\n    this.refresh();\n  }\n\n  isActive(archive: IApplicationBinary): boolean {\n    return this.application.activeVersionId === archive.id;\n  }\n\n  toActivate(archive: IApplicationBinary): boolean {\n    return this.toActivateVersionId === archive.id;\n  }\n\n  checkIfLast(archive: IApplicationBinary): boolean {\n    return archive.id === this.last.id;\n  }\n\n  showReactivate(): boolean {\n    return this.ecosystemService.isApplication(this.application);\n  }\n\n  async setActive(archive): Promise<void> {\n    const id = archive.id || archive;\n    this.toActivateVersionId = id;\n    this.isLoading = true;\n    try {\n      this.application = (\n        await this.ecosystemService.setAppActiveVersion(this.application, id)\n      ).data;\n    } catch (ex) {\n      this.alertService.addServerFailure(ex);\n    }\n    this.isLoading = false;\n    this.refresh();\n  }\n\n  async deleteArchive(archive: IApplicationBinary): Promise<void> {\n    await this.ecosystemService.deleteArchive(archive, this.application);\n    this.refresh();\n  }\n\n  async downloadArchive(archive: IApplicationBinary): Promise<void> {\n    await this.ecosystemService.downloadArchive(this.application, archive);\n  }\n\n  async reactivateArchive(): Promise<void> {\n    await this.ecosystemService.reactivateArchive(this.application);\n  }\n\n  async onRefresh() {\n    await this.refresh();\n  }\n\n  private async refresh(): Promise<void> {\n    this.isLoading = true;\n    this.archives = await this.ecosystemService.listArchives(this.application.id);\n    this.archives.sort((a, b) => {\n      return (new Date(b.created) as any) - (new Date(a.created) as any);\n    });\n    this.last = this.archives[this.archives.length - 1];\n    this.isLoading = false;\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n  ApplicationService,\n  ApplicationType,\n  BillingMode,\n  IApplication,\n  IManagedObject,\n  InventoryService,\n  Isolation\n} from '@c8y/client';\nimport { packageProperties } from '../ecosystem.constants';\nimport { EcosystemService } from '../ecosystem.service';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { AlertService, gettext, PropertiesListItem, ViewContext } from '@c8y/ngx-components';\nimport { ApplicationState } from '../ecosystem.model';\n\nconst MICROSERVICES_BASE_PATH: string = '/microservices';\nconst APPLICATIONS_BASE_PATH: string = '/ecosystem';\n\n@Component({\n  selector: 'c8y-application-properties',\n  templateUrl: './application-properties.component.html'\n})\nexport class ApplicationPropertiesComponent implements OnInit {\n  formGroup: FormGroup;\n  application: IApplication;\n  binaryMo: IManagedObject;\n  singleTenant: boolean = false;\n  subscription: boolean = false;\n  canOpenInBrowser: boolean;\n  disableOpenInBrowser: boolean;\n  canDelete: boolean;\n  isOwner: boolean;\n  isSubscribed: boolean;\n  isPackage: boolean;\n  isMicroservice: boolean;\n  isFeature: boolean;\n  isExternal: boolean;\n  isUnpacked: boolean;\n  iconMap = {\n    HOSTED: 'cloud',\n    EXTERNAL: 'external-link-square',\n    MICROSERVICE: 'microchip'\n  };\n  appState: ApplicationState;\n  package: IApplication;\n  isLoading: boolean = true;\n  isActivityLogSupported: boolean;\n  isCustomMicroservice: boolean;\n\n  breadcrumbConfig: { icon: string; label: string; path: string };\n  packageProperties: PropertiesListItem[] = [...packageProperties];\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private ecosystemService: EcosystemService,\n    private router: Router,\n    private formBuilder: FormBuilder,\n    private applicationService: ApplicationService,\n    private alertService: AlertService,\n    private inventoryService: InventoryService\n  ) {}\n\n  async ngOnInit() {\n    await this.load();\n    this.isUnpacked = this.ecosystemService.isUnpacked(this.application);\n    this.isPackage = this.ecosystemService.isPackage(this.application);\n    this.isFeature = this.ecosystemService.isFeature(this.application);\n    this.isExternal = this.ecosystemService.isExternal(this.application);\n    this.isMicroservice = this.ecosystemService.isMicroservice(this.application);\n    this.appState = this.ecosystemService.getAppState(this.application);\n\n    if (this.isUnpacked) {\n      await this.resolveSourcePackage();\n    }\n\n    this.setBreadcrumbConifg();\n\n    if (this.isCustomMicroservice) {\n      this.loadBinaryMo();\n    }\n  }\n\n  async load() {\n    this.isLoading = true;\n    this.initForm();\n    await this.loadApplication();\n    this.isLoading = false;\n  }\n\n  onApplication(app: IApplication) {\n    if (app.manifest) {\n      this.singleTenant = app.manifest.isolation === Isolation.PER_TENANT;\n      this.subscription = app.manifest.billingMode === BillingMode.SUBSCRIPTION;\n    }\n  }\n\n  cancel() {\n    if (this.application.type === ApplicationType.MICROSERVICE) {\n      this.router.navigateByUrl(MICROSERVICES_BASE_PATH);\n    } else {\n      this.router.navigateByUrl(APPLICATIONS_BASE_PATH);\n    }\n  }\n\n  openApp(app) {\n    window.open(this.applicationService.getHref(app));\n  }\n\n  getPackage(entityOrId: string | number | IApplication) {\n    return this.applicationService.detail(entityOrId);\n  }\n\n  async delete() {\n    try {\n      await this.ecosystemService.deleteApp(this.application);\n      if (this.application.type === ApplicationType.MICROSERVICE) {\n        this.router.navigateByUrl(MICROSERVICES_BASE_PATH);\n      } else {\n        this.router.navigateByUrl(APPLICATIONS_BASE_PATH);\n      }\n    } catch (ex) {\n      if (ex) {\n        this.alertService.addServerFailure(ex);\n      }\n    }\n  }\n\n  async subscribe() {\n    await this.ecosystemService.subscribeApp(this.application);\n    this.loadApplication();\n  }\n\n  async unsubscribe() {\n    await this.ecosystemService.unsubscribeApp(this.application);\n    this.loadApplication();\n  }\n\n  async loadApplication() {\n    const { id } = this.activatedRoute.snapshot.parent.data.contextData;\n    this.application = await this.ecosystemService.getApplication(id);\n    if (this.application.type === ApplicationType.MICROSERVICE) {\n      this.formGroup.get('name').disable();\n    }\n    this.formGroup.patchValue({ ...this.application });\n    this.canOpenInBrowser = this.ecosystemService.canOpenAppInBrowser(this.application);\n    this.disableOpenInBrowser =\n      this.canOpenInBrowser &&\n      (await this.ecosystemService.isOverwrittenByCustomApp(this.application));\n    this.canDelete = this.ecosystemService.canDeleteApp(this.application);\n    this.isOwner = this.ecosystemService.isOwner(this.application);\n    this.isActivityLogSupported = this.isActivityLogSupportedByApp(this.application);\n    this.isCustomMicroservice = this.ecosystemService.isCustomMicroservice(this.application);\n    this.isSubscribed = await this.ecosystemService.checkIfSubscribed(this.application);\n    this.onApplication(this.application);\n  }\n\n  async save(app: IApplication) {\n    app.id = this.application.id;\n    try {\n      await this.ecosystemService.updateApp(app);\n      this.alertService.success(gettext('Application saved.'));\n      this.formGroup.reset();\n      this.loadApplication();\n    } catch (ex) {\n      // do nothing\n    }\n  }\n\n  onNewArchive() {\n    this.loadBinaryMo();\n  }\n\n  private async resolveSourcePackage() {\n    this.package = (await this.getPackage(this.application.manifest.source)).data;\n    if (this.package) {\n      this.packageProperties.push({\n        label: gettext('Source package'),\n        value: this.package.name,\n        type: 'link',\n        action: () =>\n          this.router.navigateByUrl(\n            ViewContext.Application.replace(':id', this.package.id.toString())\n          )\n      });\n    }\n  }\n\n  private initForm(): void {\n    this.formGroup = this.formBuilder.group({\n      id: [{ value: '' }],\n      name: [Validators.required, Validators.maxLength(120)],\n      key: [Validators.required, Validators.maxLength(120)],\n      contextPath: [Validators.required, Validators.maxLength(120)],\n      description: ['', Validators.maxLength(200)],\n      resourcesUrl: [Validators.required],\n      username: [Validators.required],\n      password: [Validators.required],\n      externalUrl: [Validators.required]\n    });\n  }\n\n  private isActivityLogSupportedByApp(app: IApplication): boolean {\n    return (\n      this.ecosystemService.isOwner(app) &&\n      app.type !== ApplicationType.MICROSERVICE &&\n      app.type !== ApplicationType.EXTERNAL\n    );\n  }\n\n  private setBreadcrumbConifg() {\n    this.breadcrumbConfig = {\n      icon: this.isMicroservice ? 'microchip' : this.isFeature ? 'tab' : 'c8y-modules',\n      label: this.isMicroservice\n        ? gettext('Microservices')\n        : this.isFeature\n        ? gettext('Features')\n        : gettext('All applications'),\n      path: this.isMicroservice\n        ? 'microservices'\n        : this.isFeature\n        ? 'ecosystem/features'\n        : 'ecosystem/applications'\n    };\n  }\n\n  private async loadBinaryMo() {\n    this.binaryMo = (await this.inventoryService.detail(this.application.activeVersionId)).data;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { gettext, NavigatorNode, NavigatorNodeFactory, Permissions } from '@c8y/ngx-components';\n\n@Injectable()\nexport class EcosystemNavigationFactory implements NavigatorNodeFactory {\n  private navs: NavigatorNode[] = [];\n  private showNavigatorNodes: boolean;\n\n  constructor(private permissions: Permissions) {\n    this.showNavigatorNodes = this.permissions.hasAnyRole([\n      'ROLE_APPLICATION_MANAGEMENT_READ',\n      'ROLE_APPLICATION_MANAGEMENT_ADMIN'\n    ]);\n  }\n\n  async get() {\n/*\nThe NavigatorNodes are added in AngularJS code to keep the Quick links widget working.\nAfter the Quick links widget is migrated to Angular, the logic of adding the NavigatorNodes can be migrated as well.\n    if (this.navs.length === 0 && this.showNavigatorNodes) {\n      const applicationsNode: NavigatorNode = new NavigatorNode({\n        label: gettext('Applications'),\n        icon: 'c8y-modules',\n        path: '/ecosystem',\n        priority: 300,\n        routerLinkExact: false\n      });\n\n      const microservicesNode = new NavigatorNode({\n        label: gettext('Microservices'),\n        icon: 'microchip',\n        path: '/microservices',\n        priority: 200,\n        routerLinkExact: false\n      });\n\n      this.navs.push(\n        new NavigatorNode({\n          label: gettext('Ecosystem'),\n          icon: 'c8y-atom',\n          priority: 3200,\n          children: [applicationsNode, microservicesNode]\n        })\n      );\n    }\n*/\n    return this.navs;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, RouterStateSnapshot } from '@angular/router';\nimport { OptionsService } from '@c8y/ngx-components';\n\n@Injectable()\nexport class EcosystemGuard implements CanActivate {\n  constructor(private optionsService: OptionsService) {}\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\n    return this.isFeatureEnabled();\n  }\n\n  isFeatureEnabled() {\n    return Boolean(this.optionsService.get('beta', false));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { gettext, Tab, TabFactory } from '@c8y/ngx-components';\nimport { Router } from '@angular/router';\nimport { EcosystemGuard } from './ecosystem.guard';\n\n@Injectable()\nexport class EcosystemTabs implements TabFactory {\n  constructor(public router: Router, private ecosystemGuard: EcosystemGuard) {}\n\n  get(): Tab[] {\n    const tabs: Tab[] = [];\n    if (\n      this.router.url === '/ecosystem/applications' ||\n      this.router.url === '/ecosystem/package-list' ||\n      this.router.url === '/ecosystem/features'\n    ) {\n      tabs.push({\n        icon: 'c8y-modules',\n        priority: 1000,\n        label: gettext('All applications'),\n        path: 'ecosystem/applications'\n      } as Tab);\n\n      if (this.ecosystemGuard.isFeatureEnabled()) {\n        tabs.push({\n          icon: 'big-parcel',\n          priority: 999,\n          label: gettext('Packages'),\n          path: 'ecosystem/package-list'\n        } as Tab);\n      }\n\n      tabs.push({\n        icon: 'tab',\n        priority: 998,\n        label: gettext('Features'),\n        path: '/ecosystem/features'\n      } as Tab);\n    }\n    return tabs;\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { IApplication, IResultList } from '@c8y/client';\nimport { WizardService } from '@c8y/ngx-components';\nimport { ModalOptions } from 'ngx-bootstrap/modal';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { shareReplay, switchMap, tap } from 'rxjs/operators';\nimport { EcosystemService } from '../ecosystem.service';\n\n@Component({\n  selector: 'c8y-microservice-list',\n  templateUrl: './microservice-list.component.html'\n})\nexport class MicroserviceListComponent implements OnInit {\n  reloading: boolean = false;\n  reload$: BehaviorSubject<void> = new BehaviorSubject(null);\n  microservices$: Observable<IApplication> = this.reload$.pipe(\n    tap(() => (this.reloading = true)),\n    switchMap(() => this.ecosystemService.getMicroservices()),\n    tap(() => (this.reloading = false)),\n    shareReplay()\n  );\n  isMicroserviceHostingAllowed$: Observable<boolean> = this.reload$.pipe(\n    switchMap(() => this.ecosystemService.isMicroserviceHostingAllowed()),\n    shareReplay()\n  );\n  listClass: string;\n\n  constructor(\n    private ecosystemService: EcosystemService,\n    private wizardService: WizardService\n  ) {}\n\n  ngOnInit() {\n    this.loadMicroservices();\n  }\n\n  loadMicroservices() {\n    this.reload$.next();\n  }\n\n  addMicroservice() {\n    const initialState: any = {\n      id: 'uploadMicroservice'\n    };\n    const modalOptions: ModalOptions = { initialState };\n\n    const modalRef = this.wizardService.show(modalOptions);\n    modalRef.content.onClose.subscribe(() => {\n      this.loadMicroservices();\n    });\n  }\n}\n","import { Component } from '@angular/core';\nimport { IApplication } from '@c8y/client';\nimport { WizardService } from '@c8y/ngx-components';\nimport { ModalOptions } from 'ngx-bootstrap/modal';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { shareReplay, switchMap, tap } from 'rxjs/operators';\nimport { EcosystemService } from '../../ecosystem.service';\n\n@Component({\n  selector: 'c8y-packages-list',\n  templateUrl: './packages-list.component.html'\n})\nexport class PackagesListComponent {\n  reloading: boolean = false;\n  reload$: BehaviorSubject<void> = new BehaviorSubject(null);\n\n  packages$: Observable<IApplication> = this.reload$.pipe(\n    tap(() => (this.reloading = true)),\n    switchMap(() => this.ecosystemService.getPackageApplications()),\n    tap(() => (this.reloading = false)),\n    shareReplay()\n  );\n  listClass: string;\n\n  constructor(private ecosystemService: EcosystemService, private wizardService: WizardService) {}\n\n  ngOnInit() {\n    this.loadPackages();\n  }\n\n  loadPackages() {\n    this.reload$.next();\n  }\n\n  addPackage() {\n    const initialState: any = {\n      id: 'uploadPackage'\n    };\n    const modalOptions: ModalOptions = { initialState };\n\n    const modalRef = this.wizardService.show(modalOptions);\n    modalRef.content.onClose.subscribe(() => {\n      this.loadPackages();\n    });\n  }\n}\n","import { Component } from '@angular/core';\nimport { ApplicationType, IApplication } from '@c8y/client';\nimport { EcosystemService } from '../ecosystem.service';\nimport { gettext } from '@c8y/ngx-components';\n\n@Component({\n  selector: 'c8y-add-package',\n  template: `<c8y-add-application\n    [headerText]=\"headerText\"\n    [headerIcon]=\"'big-parcel'\"\n    [successText]=\"successText\"\n    [createApplicationHandler]=\"createPackageAppHandler\"\n    [uploadApplicationHandler]=\"uploadPackageHandler\"\n  ></c8y-add-application>`\n})\nexport class AddPackageComponent {\n  headerText: string = gettext('Add package');\n  successText: string = gettext('Package created');\n\n  constructor(private ecosystemService: EcosystemService) {}\n\n  createPackageAppHandler = (f: File) => this.createPackageApp(f);\n  uploadPackageHandler = (f: File, app: IApplication) => this.uploadPackage(f, app);\n\n  async createPackageApp(file: File): Promise<IApplication> {\n    await this.ecosystemService.isValidAppType(file, ApplicationType.HOSTED);\n    return this.ecosystemService.createAppForArchive(file, true);\n  }\n\n  uploadPackage(file: File, pckg: IApplication): Promise<IApplication> {\n    return this.ecosystemService.uploadArchiveToApp(file, pckg);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { FetchClient, IApplication, IFetchOptions, IFetchResponse } from '@c8y/client';\nimport { PropertiesListItem, WizardService } from '@c8y/ngx-components';\nimport { lexer as markedLexer, parser as markedParser } from 'marked';\nimport { ModalOptions } from 'ngx-bootstrap/modal';\nimport { packageProperties } from '../../ecosystem.constants';\nimport { ApplicationState } from '../../ecosystem.model';\nimport { EcosystemService } from '../../ecosystem.service';\n\n@Component({\n  selector: 'c8y-package-details',\n  templateUrl: './package-details.component.html'\n})\nexport class PackageDetailsComponent implements OnInit {\n  readme: string;\n  package: IApplication = {};\n  name: string;\n  description: string;\n  appState: ApplicationState;\n  isApplicationPackage: boolean;\n\n  readonly packageProperties: PropertiesListItem[] = packageProperties;\n  private readonly headers: any = { 'Content-Type': 'text/markdown', responseType: 'blob' };\n  private NOT_FOUND_ERROR_CODE = 404;\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private client: FetchClient,\n    private wizard: WizardService,\n    private ecosystemService: EcosystemService\n  ) {}\n\n  async ngOnInit() {\n    this.package = this.getPackage();\n    this.name = this.package?.name;\n    this.description = this.package?.manifest?.description;\n    this.readme = await this.getReadmeFileContentAsHtml();\n    this.appState = this.ecosystemService.getAppState(this.package);\n    this.isApplicationPackage = this.ecosystemService.isApplicationPackage(this.package);\n  }\n\n  deploy() {\n    const initialState: any = {\n      wizardConfig: {},\n      id: 'deployPackage',\n      package: this.package\n    };\n    const modalOptions: ModalOptions = { initialState };\n    this.wizard.show(modalOptions);\n  }\n\n  private getPackage() {\n    return this.activatedRoute?.snapshot?.parent?.data?.contextData;\n  }\n\n  private async getReadmeFileContentAsHtml(): Promise<string> {\n    const readmeFile = await this.getReadmeFile();\n\n    const readmeContent = await readmeFile.text();\n    if (readmeFile.status === 200) {\n      const tokens = markedLexer(readmeContent);\n      const html = markedParser(tokens);\n      return html;\n    }\n  }\n\n  private async getReadmeFile(): Promise<IFetchResponse> {\n    let result: IFetchResponse;\n    const options: IFetchOptions = {\n      method: 'GET',\n      headers: this.headers\n    };\n\n    result = await this.client.fetch(`/apps/${this.package.contextPath}/readme.md`, options);\n\n    if (result && result.status === this.NOT_FOUND_ERROR_CODE) {\n      result = await this.client.fetch(`/apps/${this.package.contextPath}/README.md`, options);\n    }\n    return result;\n  }\n}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ApplicationService, IApplication } from '@c8y/client';\nimport { gettext, WizardComponent } from '@c8y/ngx-components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { EcosystemService } from '../../ecosystem.service';\nimport { ApplicationPropertiesFormComponent } from '../../shared/application-properties-form.component';\n\n@Component({\n  selector: 'c8y-deploy-application',\n  templateUrl: './deploy-application.component.html'\n})\nexport class DeployApplicationComponent implements OnInit {\n  inProgress: boolean = true;\n  package: IApplication;\n  isDeployed: boolean = false;\n  deployedWithSuccess: boolean = false;\n  newAppConfig: IApplication;\n\n  @ViewChild(ApplicationPropertiesFormComponent)\n  applicationPropertiesForm: ApplicationPropertiesFormComponent;\n\n  readonly descriptionTemplate: string = gettext(\n    'Deploy application using \"{{ packageName }}\" package'\n  );\n  headerText: string;\n\n  constructor(\n    private ecosystemService: EcosystemService,\n    private applicationService: ApplicationService,\n    private wizardComponent: WizardComponent,\n    private translate: TranslateService\n  ) {}\n\n  async ngOnInit() {\n    this.package = (this.wizardComponent as any).package;\n    const apps = (await this.ecosystemService.getApplications()).data;\n    this.newAppConfig = this.ecosystemService.getUniqueAppConfig(this.package, apps);\n    this.headerText = this.getHeaderText();\n    this.inProgress = false;\n  }\n\n  async deployApp() {\n    const formGroupValue = this.applicationPropertiesForm.formGroup.getRawValue();\n\n    this.inProgress = true;\n\n    const { data: clonedPkg } = await this.applicationService.clone(this.package);\n    const config = this.ecosystemService.createConfig(clonedPkg, formGroupValue);\n\n    try {\n      const { data: updatedApp } = await this.ecosystemService.updateApp(config, true);\n\n      if (updatedApp) {\n        await this.ecosystemService.updateAppManifest(updatedApp, this.package);\n      }\n      this.deployedWithSuccess = true;\n    } catch (error) {\n      this.markAsDeployed();\n      await this.applicationService.delete(clonedPkg.id);\n    }\n    this.markAsDeployed();\n  }\n\n  cancel() {\n    this.wizardComponent.close();\n  }\n\n  private markAsDeployed() {\n    this.isDeployed = true;\n    this.inProgress = false;\n  }\n\n  private getHeaderText() {\n    return this.translate.instant(this.descriptionTemplate, {\n      packageName: this.package.name\n    });\n  }\n}\n","import { Component, Input, ViewChild } from '@angular/core';\nimport { ApplicationService, IApplication } from '@c8y/client';\nimport { AlertService, DropAreaComponent, WizardComponent } from '@c8y/ngx-components';\nimport { BehaviorSubject } from 'rxjs';\nimport { ERROR_MESSAGES } from './../ecosystem.constants';\nimport { EcosystemService } from './../ecosystem.service';\n\n@Component({\n  selector: 'c8y-add-application',\n  templateUrl: './add-application.component.html'\n})\nexport class AddApplicationComponent {\n  @Input() headerText: string;\n  @Input() headerIcon: string;\n  @Input() successText: string;\n  @Input() createApplicationHandler: any;\n  @Input() uploadApplicationHandler: any;\n  @Input() canGoBack: boolean = false;\n\n  @ViewChild(DropAreaComponent) dropAreaComponent;\n\n  isLoading: boolean;\n  isAppCreated: boolean;\n  createdApp: IApplication;\n  canOpenInBrowser: boolean = false;\n  errorMessage: string;\n  private uploadCanceled: boolean = false;\n\n  constructor(\n    private ecosystemService: EcosystemService,\n    private alertService: AlertService,\n    private applicationService: ApplicationService,\n    private wizardComponent: WizardComponent\n  ) {}\n\n  get progress(): BehaviorSubject<number> {\n    return this.ecosystemService.progress;\n  }\n\n  onFileDroppedEvent(event) {\n    if (event && event.length > 0) {\n      const file = event[0].file;\n      this.onFile(file);\n    }\n  }\n\n  async onFile(file: File) {\n    this.isLoading = true;\n    this.errorMessage = null;\n    this.progress.next(0);\n\n    try {\n      this.createdApp = await this.createApplicationHandler(file);\n      await this.uploadApplicationHandler(file, this.createdApp);\n      this.canOpenInBrowser = this.ecosystemService.canOpenAppInBrowser(this.createdApp);\n      this.isAppCreated = true;\n    } catch (ex) {\n      this.ecosystemService.cancelAppCreation(this.createdApp);\n      this.createdApp = null;\n      this.dropAreaComponent.onDelete();\n      this.errorMessage = ERROR_MESSAGES[ex.message];\n      if (!this.errorMessage && !this.uploadCanceled) {\n        this.alertService.addServerFailure(ex);\n      }\n    }\n    this.progress.next(100);\n    this.isLoading = false;\n  }\n\n  getHref(app: IApplication): string {\n    return this.applicationService.getHref(app);\n  }\n\n  cancel() {\n    this.cancelFileUpload();\n    this.wizardComponent.close();\n  }\n\n  done() {\n    this.wizardComponent.close();\n  }\n\n  back() {\n    this.wizardComponent.reset();\n  }\n\n  private cancelFileUpload() {\n    this.uploadCanceled = true;\n    this.ecosystemService.cancelAppCreation(this.createdApp);\n    this.createdApp = null;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\nimport { EcosystemService } from '../ecosystem.service';\n\n@Injectable()\nexport class PackageGuard implements CanActivate {\n  constructor(private ecosystemService: EcosystemService) {}\n\n  canActivate(route: ActivatedRouteSnapshot) {\n    const app = route.data.contextData || route.parent.data.contextData;\n    if (!app) {\n      return false;\n    }\n    return this.ecosystemService.isPackage(app);\n  }\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ApplicationService, IApplication } from '@c8y/client';\nimport { AlertService, gettext } from '@c8y/ngx-components';\nimport { ApplicationState } from './../ecosystem.model';\nimport { EcosystemService } from './../ecosystem.service';\n\n@Component({\n  selector: 'c8y-application-card',\n  templateUrl: './application-card.component.html'\n})\nexport class ApplicationCardComponent implements OnInit {\n  @Input() app: IApplication;\n  @Input() canEdit: boolean = true;\n  @Output() onAppDeleted: EventEmitter<void> = new EventEmitter();\n  appState: ApplicationState;\n  canOpenInBrowser: boolean;\n  disableOpenInBrowser: boolean;\n  canDelete: boolean;\n  isPackage: boolean;\n  isFeature: boolean;\n  isExternal: boolean;\n  isMicroservice: boolean;\n  get openButtonTitle() {\n    return !this.disableOpenInBrowser ?\n      gettext('Open') :\n      gettext('This application is overridden.');\n  }\n\n  constructor(\n    private applicationService: ApplicationService,\n    private ecosystemService: EcosystemService,\n    private alertService: AlertService,\n    private router: Router\n  ) {}\n\n  async ngOnInit() {\n    this.appState = this.ecosystemService.getAppState(this.app);\n    const contextPath = this.app.contextPath;\n    this.canOpenInBrowser = this.ecosystemService.canOpenAppInBrowser(this.app);\n    this.disableOpenInBrowser =\n      this.canOpenInBrowser && (await this.ecosystemService.isOverwrittenByCustomApp(this.app));\n    this.canDelete = this.ecosystemService.canDeleteApp(this.app);\n    this.isPackage = this.ecosystemService.isPackage(this.app);\n    this.isFeature = this.ecosystemService.isFeature(this.app);\n    this.isMicroservice = this.ecosystemService.isMicroservice(this.app);\n    this.isExternal = this.ecosystemService.isExternal(this.app);\n  }\n\n  detail() {\n    this.isMicroservice\n      ? this.router.navigateByUrl(`/microservices/${this.app.id}`)\n      : this.router.navigateByUrl(`/ecosystem/application/${this.app.id}`);\n  }\n\n  openApp() {\n    window.open(this.applicationService.getHref(this.app));\n  }\n\n  async delete() {\n    try {\n      await this.ecosystemService.deleteApp(this.app);\n      this.onAppDeleted.emit();\n    } catch (ex) {\n      if (ex) {\n        this.alertService.addServerFailure(ex);\n      }\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\nimport { EcosystemService } from '../ecosystem.service';\n\n@Injectable()\nexport class ApplicationPropertiesGuard implements CanActivate {\n  constructor(private ecosystemService: EcosystemService) {}\n\n  canActivate(route: ActivatedRouteSnapshot) {\n    const app = route.data.contextData || route.parent.data.contextData;\n    if (!app) {\n      return false;\n    }\n    return !this.ecosystemService.isPackage(app);\n  }\n}\n","import { Component } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { IApplication } from '@c8y/client';\nimport { shareReplay, switchMap, tap } from 'rxjs/operators';\nimport { EcosystemService } from '../ecosystem.service';\n\n@Component({\n  selector: 'c8y-feature-list',\n  templateUrl: './feature-list.component.html'\n})\nexport class FeatureListComponent {\n  reloading: boolean = false;\n  reload$: BehaviorSubject<void> = new BehaviorSubject(null);\n\n  features$: Observable<IApplication> = this.reload$.pipe(\n    tap(() => (this.reloading = true)),\n    switchMap(() => this.ecosystemService.getFeatureApplications()),\n    tap(() => (this.reloading = false)),\n    shareReplay()\n  );\n  listClass: string;\n\n  constructor(private ecosystemService: EcosystemService) {}\n\n  ngOnInit() {\n    this.loadFeatures();\n  }\n\n  loadFeatures() {\n    this.reload$.next();\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { EcosystemService } from '../../ecosystem.service';\nimport { IApplication } from '@c8y/client';\n\n@Component({\n  selector: 'c8y-package-archives',\n  templateUrl: './package-archives.component.html'\n})\nexport class PackageArchivesComponent implements OnInit {\n  application: IApplication;\n  isLoading: boolean = false;\n\n  constructor(private activatedRoute: ActivatedRoute, private ecosystemService: EcosystemService) {}\n\n  async ngOnInit(): Promise<void> {\n    await this.loadApplication();\n  }\n\n  async loadApplication(): Promise<void> {\n    const { id } = this.activatedRoute.snapshot.parent.data.contextData;\n    this.isLoading = true;\n    this.application = await this.ecosystemService.getApplication(id);\n    this.isLoading = false;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { EcosystemGuard } from './ecosystem.guard';\nimport { InstallFromPackageComponent } from './applications/install-from-package/install-from-package.component';\n\n@Injectable()\nexport class EcosystemWizardFactory {\n  constructor(private ecosystemGuard: EcosystemGuard) {}\n\n  async get() {\n    if (!this.ecosystemGuard.isFeatureEnabled()) {\n      return;\n    } else {\n      return {\n        wizardId: 'uploadApplication',\n        component: InstallFromPackageComponent,\n        name: 'Install from available packages',\n        c8yIcon: 'big-parcel'\n      };\n    }\n  }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { IApplication, IApplicationBinary } from '@c8y/client';\nimport { AlertService, gettext } from '@c8y/ngx-components';\nimport { BehaviorSubject } from 'rxjs';\nimport { EcosystemService } from '../ecosystem.service';\n\n@Component({\n  selector: 'c8y-upload-archive',\n  templateUrl: 'upload-archive.component.html'\n})\nexport class UploadArchiveComponent {\n  @Input() application: IApplication;\n  @Output() applicationChange: EventEmitter<IApplication> = new EventEmitter<IApplication>();\n  @Output() refresh: EventEmitter<any> = new EventEmitter();\n\n  archives: IApplicationBinary[] = [];\n  toActivateVersionId: string;\n  last: IApplicationBinary;\n  isLoading: boolean;\n  fileList: FileList;\n  uploadInProgress: boolean = false;\n  canReactivate: boolean = false;\n\n  constructor(private ecosystemService: EcosystemService, private alertService: AlertService) {}\n\n  get uploadProgress(): BehaviorSubject<number> {\n    return this.ecosystemService.progress;\n  }\n\n  onFileDroppedEvent(event): void {\n    if (event && event.length > 0) {\n      const file = event[0].file;\n      this.onFile(file);\n    }\n  }\n\n  private async onFile(file: File): Promise<void> {\n    try {\n      await this.ecosystemService.isValidAppType(file, this.application.type);\n      const isCustomMicroservice = this.ecosystemService.isCustomMicroservice(this.application);\n      this.archives = isCustomMicroservice\n        ? []\n        : await this.ecosystemService.listArchives(this.application.id);\n      this.archives.sort((a, b) => {\n        return (new Date(b.created) as any) - (new Date(a.created) as any);\n      });\n      this.uploadInProgress = true;\n      this.uploadProgress.next(0);\n      if (this.archives.length === 6 && !isCustomMicroservice) {\n        await this.ecosystemService.removeOldestArchive(this.application, this.archives);\n      }\n      const app = await this.ecosystemService.uploadArchiveToApp(file, this.application);\n      this.applicationChange.emit(app);\n      this.uploadProgress.next(100);\n      this.uploadInProgress = false;\n      this.refresh.emit();\n      this.alertService.success(gettext('Archive uploaded and activated.'));\n    } catch (ex) {\n      this.uploadInProgress = false;\n      this.alertService.addServerFailure(ex);\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport {\n  CoreModule,\n  FormsModule,\n  gettext,\n  HOOK_NAVIGATOR_NODES,\n  HOOK_ROUTE,\n  HOOK_TABS,\n  HOOK_WIZARD,\n  Route,\n  ViewContext\n} from '@c8y/ngx-components';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { PopoverModule } from 'ngx-bootstrap/popover';\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\nimport { AddWebApplicationComponent } from './applications/add-web-application/add-web-application.component';\nimport { InstallFromPackageComponent } from './applications/install-from-package/install-from-package.component';\nimport { DuplicateApplicationListComponent } from './applications/duplicate-application/duplicate-application-list/duplicate-application-list.component';\nimport { DuplicateApplicationPropertiesComponent } from './applications/duplicate-application/duplicate-application-properties/duplicate-application-properties.component';\nimport { DuplicateApplicationComponent } from './applications/duplicate-application/duplicate-application.component';\nimport { AddExternalApplicationComponent } from './applications/add-external-applicaiton/add-external-application.component';\nimport { AddMicroserviceComponent } from './microservices/add-microservice.component';\nimport { ApplicationListComponent } from './applications/application-list/application-list.component';\nimport { ApplicationPluginsComponent } from './applications/application-plugins/application-plugins.component';\nimport { ApplicationPluginsGuard } from './applications/application-plugins/application-plugins.guard';\nimport { InstallPluginComponent } from './applications/application-plugins/install-plugin.component';\nimport { PluginListItemComponent } from './applications/application-plugins/plugin-list-item.component';\nimport { PluginListComponent } from './applications/application-plugins/plugin-list.component';\nimport { ActivityLogComponent } from './activity-log/activity-log.component';\nimport { ApplicationPropertiesComponent } from './application-properties/application-properties.component';\nimport { EcosystemNavigationFactory } from './ecosystem-navigation.factory';\nimport { EcosystemTabs } from './ecosystem-tabs.factory';\nimport { EcosystemGuard } from './ecosystem.guard';\nimport { EcosystemService } from './ecosystem.service';\nimport { MicroserviceListComponent } from './microservices/microservice-list.component';\nimport { PackagesListComponent } from './packages/package-list/packages-list.component';\nimport { AddPackageComponent } from './packages/add-package.component';\nimport { PackageDetailsComponent } from './packages/package-details/package-details.component';\nimport { DeployApplicationComponent } from './packages/deploy-application/deploy-application.component';\nimport { AddApplicationComponent } from './shared/add-application.component';\nimport { PackageGuard } from './packages/package.guard';\nimport { ApplicationCardComponent } from './shared/application-card.component';\nimport { ApplicationPropertiesFormComponent } from './shared/application-properties-form.component';\nimport { ApplicationPropertiesGuard } from './application-properties/application-properties.guard';\nimport { FeatureListComponent } from './features/feature-list.component';\nimport { PackageArchivesComponent } from './packages/package-archives/package-archives.component';\nimport { EcosystemWizardFactory } from './ecosystem-wizard.factory';\nimport { UploadArchiveComponent } from './shared/upload-archive.component';\n\nconst ecosystemMainRoutes: Route[] = [\n  {\n    path: 'ecosystem/applications',\n    component: ApplicationListComponent\n  },\n  {\n    path: 'ecosystem/package-list',\n    component: PackagesListComponent,\n    canActivate: [EcosystemGuard]\n  },\n  {\n    path: 'ecosystem/features',\n    component: FeatureListComponent\n  },\n  {\n    path: 'ecosystem',\n    redirectTo: 'ecosystem/applications'\n  },\n  {\n    path: 'microservices',\n    component: MicroserviceListComponent\n  }\n];\n\nconst applicationDetailsRoutes: Route[] = [\n  {\n    path: 'properties',\n    component: ApplicationPropertiesComponent,\n    icon: 'list',\n    label: gettext('Properties'),\n    context: ViewContext.Application,\n    priority: 5,\n    canActivate: [ApplicationPropertiesGuard]\n  },\n  {\n    path: 'plugins',\n    component: ApplicationPluginsComponent,\n    icon: 'plugin',\n    label: gettext('Plugins'),\n    context: ViewContext.Application,\n    priority: 3,\n    canActivate: [ApplicationPluginsGuard, EcosystemGuard]\n  },\n  {\n    path: 'package-details',\n    component: PackageDetailsComponent,\n    icon: 'big-parcel',\n    label: gettext('Info'),\n    context: ViewContext.Application,\n    priority: 10,\n    canActivate: [PackageGuard, EcosystemGuard]\n  },\n  {\n    path: 'package-archives',\n    component: PackageArchivesComponent,\n    icon: 'c8y-archive',\n    label: gettext('Archives'),\n    context: ViewContext.Application,\n    priority: 5,\n    canActivate: [PackageGuard, EcosystemGuard]\n  },\n  {\n    path: 'properties',\n    component: ApplicationPropertiesComponent,\n    icon: 'list',\n    label: gettext('Properties'),\n    context: ViewContext.Microservice,\n    priority: 5,\n    canActivate: [ApplicationPropertiesGuard]\n  }\n];\n\n@NgModule({\n  declarations: [\n    ApplicationListComponent,\n    MicroserviceListComponent,\n    ApplicationCardComponent,\n    ApplicationPropertiesComponent,\n    AddMicroserviceComponent,\n    ActivityLogComponent,\n    ApplicationPluginsComponent,\n    PluginListItemComponent,\n    InstallPluginComponent,\n    PluginListComponent,\n    AddWebApplicationComponent,\n    AddExternalApplicationComponent,\n    DuplicateApplicationComponent,\n    DuplicateApplicationListComponent,\n    DuplicateApplicationPropertiesComponent,\n    ApplicationPropertiesComponent,\n    InstallFromPackageComponent,\n    AddMicroserviceComponent,\n    ApplicationPropertiesComponent,\n    PackagesListComponent,\n    PackageDetailsComponent,\n    DeployApplicationComponent,\n    AddPackageComponent,\n    AddApplicationComponent,\n    ApplicationPropertiesFormComponent,\n    FeatureListComponent,\n    PackageArchivesComponent,\n    UploadArchiveComponent\n  ],\n  entryComponents: [\n    AddMicroserviceComponent,\n    AddWebApplicationComponent,\n    AddExternalApplicationComponent,\n    DuplicateApplicationComponent,\n    DuplicateApplicationListComponent,\n    DuplicateApplicationPropertiesComponent,\n    ApplicationPropertiesComponent,\n    ActivityLogComponent,\n    ApplicationPluginsComponent,\n    InstallPluginComponent,\n    PackagesListComponent,\n    InstallFromPackageComponent,\n    PackageDetailsComponent,\n    DeployApplicationComponent,\n    AddPackageComponent,\n    FeatureListComponent,\n    PackageArchivesComponent\n  ],\n  imports: [\n    CoreModule,\n    BsDropdownModule,\n    TooltipModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(ecosystemMainRoutes),\n    PopoverModule\n  ],\n  exports: [ApplicationPropertiesComponent],\n  providers: [\n    {\n      provide: HOOK_TABS,\n      useClass: EcosystemTabs,\n      multi: true\n    },\n    {\n      provide: HOOK_NAVIGATOR_NODES,\n      useClass: EcosystemNavigationFactory,\n      multi: true\n    },\n    {\n      provide: HOOK_ROUTE,\n      useValue: applicationDetailsRoutes,\n      multi: true\n    },\n    EcosystemGuard,\n    EcosystemService,\n    ApplicationPluginsGuard,\n    PackageGuard,\n    ApplicationPropertiesGuard,\n    {\n      provide: HOOK_WIZARD,\n      useValue: {\n        wizardId: 'uploadApplication',\n        component: AddWebApplicationComponent,\n        name: 'Upload web application',\n        c8yIcon: 'upload'\n      },\n      multi: true\n    },\n    {\n      provide: HOOK_WIZARD,\n      useValue: {\n        wizardId: 'uploadPackage',\n        component: AddPackageComponent\n      },\n      multi: true\n    },\n    {\n      provide: HOOK_WIZARD,\n      useValue: {\n        wizardId: 'uploadApplication',\n        component: AddExternalApplicationComponent,\n        name: 'External application',\n        c8yIcon: 'cloud-link'\n      },\n      multi: true\n    },\n    {\n      provide: HOOK_WIZARD,\n      useValue: {\n        wizardId: 'deployPackage',\n        component: DeployApplicationComponent,\n        name: 'Deploy package',\n        c8yIcon: 'big-parcel'\n      },\n      multi: true\n    },\n    {\n      provide: HOOK_WIZARD,\n      useClass: EcosystemWizardFactory,\n      multi: true\n    },\n    {\n      provide: HOOK_WIZARD,\n      useValue: {\n        wizardId: 'uploadApplication',\n        component: DuplicateApplicationComponent,\n        name: 'Duplicate existing application',\n        c8yIcon: 'copy'\n      },\n      multi: true\n    },\n    {\n      provide: HOOK_WIZARD,\n      useValue: {\n        wizardId: 'uploadMicroservice',\n        component: AddMicroserviceComponent\n      },\n      multi: true\n    }\n  ]\n})\nexport class EcosystemModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {ActivityLogComponent as ɵg} from './activity-log/activity-log.component';\nexport {ApplicationPropertiesComponent as ɵe} from './application-properties/application-properties.component';\nexport {ApplicationPropertiesGuard as ɵbd} from './application-properties/application-properties.guard';\nexport {AddExternalApplicationComponent as ɵm} from './applications/add-external-applicaiton/add-external-application.component';\nexport {AddWebApplicationComponent as ɵl} from './applications/add-web-application/add-web-application.component';\nexport {ApplicationListComponent as ɵa} from './applications/application-list/application-list.component';\nexport {ApplicationPluginsComponent as ɵh} from './applications/application-plugins/application-plugins.component';\nexport {ApplicationPluginsGuard as ɵbe} from './applications/application-plugins/application-plugins.guard';\nexport {InstallPluginComponent as ɵj} from './applications/application-plugins/install-plugin.component';\nexport {PluginListItemComponent as ɵi} from './applications/application-plugins/plugin-list-item.component';\nexport {PluginListComponent as ɵk} from './applications/application-plugins/plugin-list.component';\nexport {DuplicateApplicationListComponent as ɵo} from './applications/duplicate-application/duplicate-application-list/duplicate-application-list.component';\nexport {DuplicateApplicationPropertiesComponent as ɵp} from './applications/duplicate-application/duplicate-application-properties/duplicate-application-properties.component';\nexport {DuplicateApplicationComponent as ɵn} from './applications/duplicate-application/duplicate-application.component';\nexport {InstallFromPackageComponent as ɵr} from './applications/install-from-package/install-from-package.component';\nexport {EcosystemNavigationFactory as ɵbc} from './ecosystem-navigation.factory';\nexport {EcosystemTabs as ɵbb} from './ecosystem-tabs.factory';\nexport {EcosystemWizardFactory as ɵbg} from './ecosystem-wizard.factory';\nexport {EcosystemGuard as ɵba} from './ecosystem.guard';\nexport {EcosystemService as ɵb} from './ecosystem.service';\nexport {FeatureListComponent as ɵx} from './features/feature-list.component';\nexport {AddMicroserviceComponent as ɵf} from './microservices/add-microservice.component';\nexport {MicroserviceListComponent as ɵc} from './microservices/microservice-list.component';\nexport {AddPackageComponent as ɵv} from './packages/add-package.component';\nexport {DeployApplicationComponent as ɵu} from './packages/deploy-application/deploy-application.component';\nexport {PackageArchivesComponent as ɵy} from './packages/package-archives/package-archives.component';\nexport {PackageDetailsComponent as ɵt} from './packages/package-details/package-details.component';\nexport {PackagesListComponent as ɵs} from './packages/package-list/packages-list.component';\nexport {PackageGuard as ɵbf} from './packages/package.guard';\nexport {AddApplicationComponent as ɵw} from './shared/add-application.component';\nexport {ApplicationCardComponent as ɵd} from './shared/application-card.component';\nexport {ApplicationPropertiesFormComponent as ɵq} from './shared/application-properties-form.component';\nexport {UploadArchiveComponent as ɵz} from './shared/upload-archive.component';"]}