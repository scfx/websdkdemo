{"version":3,"file":"c8y-ngx-components-operations-device-selector.js","sources":["../../operations/device-selector/device-selector.component.ts","../../operations/device-selector/device-selector.module.ts","../../operations/device-selector/c8y-ngx-components-operations-device-selector.ts"],"names":[],"mappings":";;;;;;;;;;;MA2Ba,uBAAuB;AAAG,IAJvC;AACG,QAUD,eAAU,GAAW,IAAI,oBAAoB,EAAE,CAAC;AAClD,QAEE,8BAAyB,GAAyB,IAAI,YAAY,EAAU,CAAC;AAC/E,QACE,YAAO,GAAa;AACtB,YAAI,IAAI,sBAAsB,EAAE;AAChC,YAAI,IAAI,oBAAoB,EAAE;AAC9B,YAAI,IAAI,CAAC,UAAU;AACnB,YAAI,IAAI,qBAAqB,EAAE;AAC/B,YAAI,IAAI,qBAAqB,EAAE;AAC/B,YAAI,IAAI,gCAAgC,EAAE;AAC1C,YAAI,IAAI,sBAAsB,EAAE;AAChC,SAAG,CAAC;AACJ,QACU,iBAAY,GAAqB,IAAI,OAAO,EAAE,CAAC;AACzD,KAgCC;AACD,IAhCE,QAAQ;AAAK,QACX,IAAI,IAAI,CAAC,WAAW,EAAE;AAC1B,YAAM,IAAI,CAAC,WAAW;AACtB,iBAAS,IAAI,CACH,oBAAoB,EAAE,EACtB,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAC7B;AACT,iBAAS,SAAS,CAAC,CAAC,KAAe;AACnC,gBAAU,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;AAClE,oBAAY,IAAI,EACF,KAAK,IAAI,KAAK,CAAC,MAAM;AACnC,0BAAkB,mBAAmB,CAAC,WAAW;AACjD,0BAAkB,mBAAmB,CAAC,WAAW;AACjD,oBAAY,OAAO,EAAE,KAAK;AAC1B,0BAAgB;AAChB,4BAAkB,iBAAiB,EAAE;AACrC,gCAAoB,mBAAmB,EAAE;AACzC,oCAAsB,KAAK;AAC3B,iCAAqB;AACrB,6BAAmB;AACnB,yBAAiB;AACjB,0BAAgB,SAAS;AACzB,iBAAW,CAAC,CAAC;AACb,aAAS,CAAC,CAAC;AACX,SAAK;AACL,KAAG;AACH,IACE,WAAW;AAAK,QACd,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACjC,QAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC;AACjC,KAAG;AACH;mDA3DC,SAAS,SAAC,kBACT,QAAQ,EAAE,qBAAqB;WAC/B;;;;;0IAA6C,cAC9C;;;;;;;;;;;;;;;;;;;;;;;;;;+HACI;AAAC;AAA2C,yBAC9C,SAAS,SAAC,mBAAmB,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE;AAC7C,0BAEF,KAAK;AACN,wCAIC,MAAM;AACR;;;;;;;;;;;;;;oBAAE;AAAC;AChCJ;AACA;AACA;AACA,MAKa,oBAAoB;AAAG;gDALnC,QAAQ,SAAC,kBACR,OAAO,EAAE,CAAC,UAAU,EAAE;KAAgB,CAAC,kBACvC,YAAY,EAAE,CAAC,uBAAuB,CAAC,kBACvC,OAAO,EAAE,CAAC;eAAuB,CAAC,cACnC;;;;;;;;;0TACI;AAAC;ACbN;AACA;AACA;AACA;AACA;AACiC","sourcesContent":["import {\n  Component,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewChild\n} from '@angular/core';\nimport {\n  AlarmsDeviceGridColumn,\n  DeviceGridComponent,\n  GroupDeviceGridColumn,\n  ModelDeviceGridColumn,\n  NameDeviceGridColumn,\n  RegistrationDateDeviceGridColumn,\n  StatusDeviceGridColumn,\n  TypeDeviceGridColumn\n} from '@c8y/ngx-components/device-grid';\nimport { Column, FilteringActionType } from '@c8y/ngx-components';\nimport { Observable, Subject } from 'rxjs';\nimport { distinctUntilChanged, takeUntil } from 'rxjs/operators';\n\n@Component({\n  selector: 'c8y-device-selector',\n  templateUrl: 'device-selector.component.html'\n})\nexport class DeviceSelectorComponent implements OnInit, OnDestroy {\n  @ViewChild(DeviceGridComponent, { static: true })\n  deviceGrid: DeviceGridComponent;\n\n  @Input()\n  deviceTypes: Observable<string[]>;\n\n  typeColumn: Column = new TypeDeviceGridColumn();\n\n  @Output()\n  onDeviceQueryStringChange: EventEmitter<string> = new EventEmitter<string>();\n\n  columns: Column[] = [\n    new StatusDeviceGridColumn(),\n    new NameDeviceGridColumn(),\n    this.typeColumn,\n    new ModelDeviceGridColumn(),\n    new GroupDeviceGridColumn(),\n    new RegistrationDateDeviceGridColumn(),\n    new AlarmsDeviceGridColumn()\n  ];\n\n  private unsubscribe$: Subject<boolean> = new Subject();\n\n  ngOnInit(): void {\n    if (this.deviceTypes) {\n      this.deviceTypes\n        .pipe(\n          distinctUntilChanged(),\n          takeUntil(this.unsubscribe$)\n        )\n        .subscribe((types: string[]) => {\n          this.deviceGrid.updateFiltering([this.typeColumn.name], {\n            type:\n              types && types.length\n                ? FilteringActionType.ApplyFilter\n                : FilteringActionType.ResetFilter,\n            payload: types\n              ? {\n                  filteringModifier: {\n                    externalFilterQuery: {\n                      types\n                    }\n                  }\n                }\n              : undefined\n          });\n        });\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribe$.next(true);\n    this.unsubscribe$.complete();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CoreModule } from '@c8y/ngx-components';\nimport { DeviceGridModule } from '@c8y/ngx-components/device-grid';\nimport { DeviceSelectorComponent } from './device-selector.component';\n\n/**\n * This module provides a component for selecting devices based on filters.\n */\n@NgModule({\n  imports: [CoreModule, DeviceGridModule],\n  declarations: [DeviceSelectorComponent],\n  exports: [DeviceSelectorComponent]\n})\nexport class DeviceSelectorModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"]}