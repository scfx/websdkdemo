import { Component } from '@angular/core';
import { ActivatedRoute } from '@angular/router';
import { gettext } from '@c8y/ngx-components';
import { TranslateService } from '@ngx-translate/core';
import { BehaviorSubject, combineLatest, from } from 'rxjs';
import { map, mergeMap, toArray } from 'rxjs/operators';
import { WidgetService } from '../widget.service';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/router';
import * as ɵngcc2 from '../widget.service';
import * as ɵngcc3 from '@ngx-translate/core';
import * as ɵngcc4 from '@c8y/ngx-components';
import * as ɵngcc5 from '@angular/common';

const _c0 = function (a0) { return { isLoading: a0, isDisabled: true, canDelete: false, translateWidgetTitle: true, allowFullscreen: false, title: false }; };
export class DeviceInfoDashboardComponent {
    constructor(router, widgetService, translateService) {
        this.router = router;
        this.widgetService = widgetService;
        this.translateService = translateService;
        this.isLoading$ = new BehaviorSubject(true);
        this.DEVICE_INFO_WIDGETS = [
            {
                name: 'Alarm list',
                title: gettext('Active, critical alarms'),
                _x: 4,
                _y: 7,
                _height: 4,
                _width: 4,
                config: {
                    options: {
                        orderMode: 'ACTIVE_FIRST',
                        severity: { CRITICAL: true },
                        status: {
                            ACTIVE: true,
                            ACKNOWLEDGED: false,
                            CLEARED: false
                        },
                        types: []
                    }
                }
            },
            {
                name: 'Map',
                title: gettext('Location'),
                _x: 4,
                _y: 11,
                _height: 4,
                _width: 8
            },
            {
                name: 'Asset Properties',
                title: gettext('Device data'),
                config: {
                    options: {
                        properties: [],
                        allowDisplayAndEditKnownProperties: true,
                        hiddenPropertiesKeyPaths: ['owner']
                    }
                },
                _x: 0,
                _y: 7,
                _height: 8,
                _width: 4
            },
            {
                name: 'Data points graph',
                title: gettext('Device and communication'),
                _x: 4,
                _y: 2,
                _height: 5,
                _width: 8,
                config: {
                    interval: 'hours',
                    aggregation: 'NONE',
                    realtime: true,
                    datapointsInitialDisplayLimit: 3,
                    datapoints: [
                        {
                            fragment: 'c8y_Battery',
                            series: 'level',
                            label: this.translateService.instant('Battery: level'),
                            unit: '%',
                            renderType: 'min',
                            lineType: 'line',
                            color: '#5e07b3',
                            __active: true
                        },
                        {
                            fragment: 'c8y_SignalStrength',
                            series: 'rssi',
                            label: this.translateService.instant('Signal: RSSI'),
                            unit: 'dBm',
                            renderType: 'min',
                            lineType: 'line',
                            color: '#a7d0f1',
                            __active: true
                        },
                        {
                            fragment: 'c8y_MemoryMeasurement',
                            series: 'Used',
                            label: this.translateService.instant('Memory: used'),
                            unit: 'MB',
                            renderType: 'min',
                            lineType: 'line',
                            color: '#f75229',
                            __active: true
                        },
                        {
                            fragment: 'c8y_CPUMeasurement',
                            series: 'Workload',
                            label: this.translateService.instant('CPU: workload'),
                            unit: '%',
                            renderType: 'min',
                            lineType: 'line',
                            color: '#b24f3e',
                            __active: true
                        },
                        {
                            fragment: 'c8y_NetworkStatistics',
                            series: 'Upload',
                            label: this.translateService.instant('Network: upload'),
                            unit: 'KB/s',
                            renderType: 'min',
                            lineType: 'line',
                            color: '#88c039',
                            __active: true
                        },
                        {
                            fragment: 'c8y_SignalStrength',
                            series: 'RCSP',
                            label: this.translateService.instant('Signal: RCSP'),
                            renderType: 'min',
                            lineType: 'line',
                            color: '#5e2f19',
                            __active: true
                        },
                        {
                            fragment: 'c8y_SignalStrength',
                            series: 'RSCP',
                            label: this.translateService.instant('Signal: RSCP'),
                            renderType: 'min',
                            lineType: 'line',
                            color: '#5e2f19',
                            __active: true
                        },
                        {
                            fragment: 'c8y_SignalStrength',
                            series: 'RSRP',
                            label: this.translateService.instant('Signal: RSRP'),
                            renderType: 'min',
                            lineType: 'line',
                            color: '#43ba3b',
                            __active: true
                        },
                        {
                            fragment: 'c8y_SignalStrength',
                            series: 'RSRQ',
                            label: this.translateService.instant('Signal: RSRQ'),
                            renderType: 'min',
                            lineType: 'line',
                            color: '#14b0b3',
                            __active: true
                        },
                        {
                            fragment: 'c8y_SignalStrength',
                            series: 'ber',
                            label: this.translateService.instant('Signal: BER'),
                            unit: '%',
                            renderType: 'min',
                            lineType: 'line',
                            color: '#44ff33',
                            __active: true
                        },
                        {
                            fragment: 'c8y_SignalStrength',
                            series: 'ECN0',
                            label: this.translateService.instant('Signal: ECN0'),
                            renderType: 'min',
                            lineType: 'line',
                            color: '#873efa',
                            __active: true
                        },
                        {
                            fragment: 'c8y_NetworkStatistics',
                            series: 'Download',
                            label: this.translateService.instant('Network: download'),
                            unit: 'KB/s',
                            renderType: 'min',
                            lineType: 'line',
                            color: '#f27a45',
                            __active: true
                        },
                        {
                            fragment: 'c8y_MemoryMeasurement',
                            series: 'Total',
                            label: this.translateService.instant('Memory: total'),
                            unit: 'MB',
                            renderType: 'min',
                            lineType: 'line',
                            color: '#dadd8c',
                            __active: true
                        }
                    ],
                    alarmsEventsConfigs: [
                        {
                            label: 'c8y_LocationUpdate',
                            timelineType: 'EVENT',
                            color: '#6f6cd0',
                            filters: {
                                type: 'c8y_LocationUpdate'
                            },
                            __active: true
                        },
                        {
                            label: 'c8y_UnavailabilityAlarm',
                            timelineType: 'ALARM',
                            color: '#375bf2',
                            filters: {
                                type: 'c8y_UnavailabilityAlarm'
                            },
                            __active: true
                        }
                    ]
                },
                transformConfigWithContext(config, context, c8yDevices) {
                    'ngInject';
                    return c8yDevices
                        .getSupportedSeries(context.id)
                        .then(supportedMeasurementSeries => config.datapoints.filter(configMeasurement => supportedMeasurementSeries.find(supportedSeries => supportedSeries.fragment === configMeasurement.fragment &&
                        supportedSeries.series === configMeasurement.series)))
                        .then(datapoints => (Object.assign(Object.assign({}, config), { datapoints })));
                }
            },
            {
                name: 'deviceStatusWidget',
                title: gettext('Device status'),
                _x: 0,
                _y: 2,
                _height: 5,
                _width: 4
            },
            {
                name: 'deviceGroupAssignmentWidget',
                title: gettext('Group assignment'),
                _x: 8,
                _y: 7,
                _height: 4,
                _width: 4
            },
            {
                componentId: 'assetNotesWidget',
                title: gettext('Message of the day'),
                classes: { 'panel-title-hidden': true },
                _x: 0,
                _y: 0,
                _height: 2,
                _width: 12
            },
            {
                componentId: 'Map',
                title: gettext('Location'),
                _x: 4,
                _y: 11,
                _height: 4,
                _width: 8
            }
        ];
        this.currentContext$ = this.router.parent.data.pipe(map(({ contextData }) => {
            this.title = contextData.name;
            return contextData;
        }));
        this.widgets$ = from(this.DEVICE_INFO_WIDGETS).pipe(mergeMap(widget => this.widgetService.mapLegacy(widget)), map(widget => (Object.assign(Object.assign({}, widget), { config: Object.assign(Object.assign({}, widget.config), { device: this.router.parent.snapshot.data.contextData }) }))), toArray());
        this.widgetsSubscription = combineLatest([this.widgets$, this.currentContext$]).subscribe(() => {
            this.isLoading$.next(false);
        });
    }
    ngOnDestroy() {
        this.widgetsSubscription.unsubscribe();
    }
}
DeviceInfoDashboardComponent.ɵfac = function DeviceInfoDashboardComponent_Factory(t) { return new (t || DeviceInfoDashboardComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.WidgetService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.TranslateService)); };
DeviceInfoDashboardComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: DeviceInfoDashboardComponent, selectors: [["c8y-device-info-dashboard-dashboard"]], decls: 6, vars: 12, consts: [[3, "context", "widgets", "settings"]], template: function DeviceInfoDashboardComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "c8y-title");
        ɵngcc0.ɵɵtext(1);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelement(2, "c8y-widgets-dashboard", 0);
        ɵngcc0.ɵɵpipe(3, "async");
        ɵngcc0.ɵɵpipe(4, "async");
        ɵngcc0.ɵɵpipe(5, "async");
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate1(" ", ctx.title, "\n");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("context", ɵngcc0.ɵɵpipeBind1(3, 4, ctx.currentContext$))("widgets", ɵngcc0.ɵɵpipeBind1(4, 6, ctx.widgets$))("settings", ɵngcc0.ɵɵpureFunction1(10, _c0, ɵngcc0.ɵɵpipeBind1(5, 8, ctx.isLoading$)));
    } }, directives: [ɵngcc4.TitleComponent, ɵngcc4.WidgetsDashboardComponent], pipes: [ɵngcc5.AsyncPipe], encapsulation: 2 });
DeviceInfoDashboardComponent.ctorParameters = () => [
    { type: ActivatedRoute },
    { type: WidgetService },
    { type: TranslateService }
];
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(DeviceInfoDashboardComponent, [{
        type: Component,
        args: [{
                selector: 'c8y-device-info-dashboard-dashboard',
                template: "<c8y-title>\n  {{ title }}\n</c8y-title>\n<c8y-widgets-dashboard\n  [context]=\"currentContext$ | async\"\n  [widgets]=\"widgets$ | async\"\n  [settings]=\"{\n    isLoading: isLoading$ | async,\n    isDisabled: true,\n    canDelete: false,\n    translateWidgetTitle: true,\n    allowFullscreen: false,\n    title: false\n  }\"\n>\n</c8y-widgets-dashboard>\n"
            }]
    }], function () { return [{ type: ɵngcc1.ActivatedRoute }, { type: ɵngcc2.WidgetService }, { type: ɵngcc3.TranslateService }]; }, null); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV2aWNlLWluZm8tZGFzaGJvYXJkLmNvbXBvbmVudC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vY29udGV4dC1kYXNoYm9hcmQvZGV2aWNlLWluZm8tZGFzaGJvYXJkL2RldmljZS1pbmZvLWRhc2hib2FyZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMxQyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDakQsT0FBTyxFQUFFLE9BQU8sRUFBVSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFFLElBQUksRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUN4RSxPQUFPLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7Ozs7Ozs7OztBQVFsRCxNQUFNLE9BQU8sNEJBQTRCO0FBQ3pDLElBcVFFLFlBQ1UsTUFBc0IsRUFDdEIsYUFBNEIsRUFDNUIsZ0JBQWtDO0FBQzNDLFFBSFMsV0FBTSxHQUFOLE1BQU0sQ0FBZ0I7QUFBQyxRQUN2QixrQkFBYSxHQUFiLGFBQWEsQ0FBZTtBQUFDLFFBQzdCLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7QUFDOUMsUUF2UUUsZUFBVSxHQUFHLElBQUksZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3pDLFFBR0Usd0JBQW1CLEdBQUc7QUFDeEIsWUFBSTtBQUNKLGdCQUFNLElBQUksRUFBRSxZQUFZO0FBQ3hCLGdCQUFNLEtBQUssRUFBRSxPQUFPLENBQUMseUJBQXlCLENBQUM7QUFDL0MsZ0JBQU0sRUFBRSxFQUFFLENBQUM7QUFDWCxnQkFBTSxFQUFFLEVB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QUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNwQyxRQUFNLENBQUMsQ0FDRixDQUFDO0FBQ04sSUFBRSxDQUFDO0FBQ0gsSUFDRSxXQUFXO0FBQ2IsUUFBSSxJQUFJLENBQUMsbUJBQW1CLENBQUMsV0FBVyxFQUFFLENBQUM7QUFDM0MsSUFBRSxDQUFDO0FBQ0g7d0RBNVNDLFNBQVMsU0FBQyxrQkFDVCxRQUFRLEVBQUUscUNBQXFDLGtCQUMvQztnUEFBcUQsY0FDdEQ7Ozs7Ozs7Ozs7Ozs7K0hBQ0k7QUFBQztBQUNVLFlBZFAsY0FBYztBQUFJLFlBS2xCLGFBQWE7QUFBSSxZQUhqQixnQkFBZ0I7QUFBRzs7Ozs7OztrSkFBRTtBQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBY3RpdmF0ZWRSb3V0ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBnZXR0ZXh0LCBXaWRnZXQgfSBmcm9tICdAYzh5L25neC1jb21wb25lbnRzJztcbmltcG9ydCB7IFRyYW5zbGF0ZVNlcnZpY2UgfSBmcm9tICdAbmd4LXRyYW5zbGF0ZS9jb3JlJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgY29tYmluZUxhdGVzdCwgZnJvbSwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbWFwLCBtZXJnZU1hcCwgdG9BcnJheSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IFdpZGdldFNlcnZpY2UgfSBmcm9tICcuLi93aWRnZXQuc2VydmljZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IElNYW5hZ2VkT2JqZWN0IH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjOHktZGV2aWNlLWluZm8tZGFzaGJvYXJkLWRhc2hib2FyZCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9kZXZpY2UtaW5mby1kYXNoYm9hcmQuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIERldmljZUluZm9EYXNoYm9hcmRDb21wb25lbnQge1xuICBjdXJyZW50Q29udGV4dCQ6IE9ic2VydmFibGU8SU1hbmFnZWRPYmplY3Q+O1xuICB3aWRnZXRzJDogT2JzZXJ2YWJsZTxXaWRnZXRbXT47XG4gIGlzTG9hZGluZyQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KHRydWUpO1xuICB0aXRsZTogc3RyaW5nO1xuICB3aWRnZXRzU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG5cbiAgREVWSUNFX0lORk9fV0lER0VUUyA9IFtcbiAgICB7XG4gICAgICBuYW1lOiAnQWxhcm0gbGlzdCcsXG4gICAgICB0aXRsZTogZ2V0dGV4dCgnQWN0aXZlLCBjcml0aWNhbCBhbGFybXMnKSxcbiAgICAgIF94OiA0LFxuICAgICAgX3k6IDcsXG4gICAgICBfaGVpZ2h0OiA0LFxuICAgICAgX3dpZHRoOiA0LFxuICAgICAgY29uZmlnOiB7XG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBvcmRlck1vZGU6ICdBQ1RJVkVfRklSU1QnLFxuICAgICAgICAgIHNldmVyaXR5OiB7IENSSVRJQ0FMOiB0cnVlIH0sXG4gICAgICAgICAgc3RhdHVzOiB7XG4gICAgICAgICAgICBBQ1RJVkU6IHRydWUsXG4gICAgICAgICAgICBBQ0tOT1dMRURHRUQ6IGZhbHNlLFxuICAgICAgICAgICAgQ0xFQVJFRDogZmFsc2VcbiAgICAgICAgICB9LFxuICAgICAgICAgIHR5cGVzOiBbXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnTWFwJyxcbiAgICAgIHRpdGxlOiBnZXR0ZXh0KCdMb2NhdGlvbicpLFxuICAgICAgX3g6IDQsXG4gICAgICBfeTogMTEsXG4gICAgICBfaGVpZ2h0OiA0LFxuICAgICAgX3dpZHRoOiA4XG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnQXNzZXQgUHJvcGVydGllcycsXG4gICAgICB0aXRsZTogZ2V0dGV4dCgnRGV2aWNlIGRhdGEnKSxcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgcHJvcGVydGllczogW10sXG4gICAgICAgICAgYWxsb3dEaXNwbGF5QW5kRWRpdEtub3duUHJvcGVydGllczogdHJ1ZSxcbiAgICAgICAgICBoaWRkZW5Qcm9wZXJ0aWVzS2V5UGF0aHM6IFsnb3duZXInXVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgX3g6IDAsXG4gICAgICBfeTogNyxcbiAgICAgIF9oZWlnaHQ6IDgsXG4gICAgICBfd2lkdGg6IDRcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdEYXRhIHBvaW50cyBncmFwaCcsXG4gICAgICB0aXRsZTogZ2V0dGV4dCgnRGV2aWNlIGFuZCBjb21tdW5pY2F0aW9uJyksXG4gICAgICBfeDogNCxcbiAgICAgIF95OiAyLFxuICAgICAgX2hlaWdodDogNSxcbiAgICAgIF93aWR0aDogOCxcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICBpbnRlcnZhbDogJ2hvdXJzJyxcbiAgICAgICAgYWdncmVnYXRpb246ICdOT05FJyxcbiAgICAgICAgcmVhbHRpbWU6IHRydWUsXG4gICAgICAgIGRhdGFwb2ludHNJbml0aWFsRGlzcGxheUxpbWl0OiAzLFxuICAgICAgICBkYXRhcG9pbnRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZnJhZ21lbnQ6ICdjOHlfQmF0dGVyeScsXG4gICAgICAgICAgICBzZXJpZXM6ICdsZXZlbCcsXG4gICAgICAgICAgICBsYWJlbDogdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ0JhdHRlcnk6IGxldmVsJyksXG4gICAgICAgICAgICB1bml0OiAnJScsXG4gICAgICAgICAgICByZW5kZXJUeXBlOiAnbWluJyxcbiAgICAgICAgICAgIGxpbmVUeXBlOiAnbGluZScsXG4gICAgICAgICAgICBjb2xvcjogJyM1ZTA3YjMnLFxuICAgICAgICAgICAgX19hY3RpdmU6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZyYWdtZW50OiAnYzh5X1NpZ25hbFN0cmVuZ3RoJyxcbiAgICAgICAgICAgIHNlcmllczogJ3Jzc2knLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdTaWduYWw6IFJTU0knKSxcbiAgICAgICAgICAgIHVuaXQ6ICdkQm0nLFxuICAgICAgICAgICAgcmVuZGVyVHlwZTogJ21pbicsXG4gICAgICAgICAgICBsaW5lVHlwZTogJ2xpbmUnLFxuICAgICAgICAgICAgY29sb3I6ICcjYTdkMGYxJyxcbiAgICAgICAgICAgIF9fYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmcmFnbWVudDogJ2M4eV9NZW1vcnlNZWFzdXJlbWVudCcsXG4gICAgICAgICAgICBzZXJpZXM6ICdVc2VkJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnTWVtb3J5OiB1c2VkJyksXG4gICAgICAgICAgICB1bml0OiAnTUInLFxuICAgICAgICAgICAgcmVuZGVyVHlwZTogJ21pbicsXG4gICAgICAgICAgICBsaW5lVHlwZTogJ2xpbmUnLFxuICAgICAgICAgICAgY29sb3I6ICcjZjc1MjI5JyxcbiAgICAgICAgICAgIF9fYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmcmFnbWVudDogJ2M4eV9DUFVNZWFzdXJlbWVudCcsXG4gICAgICAgICAgICBzZXJpZXM6ICdXb3JrbG9hZCcsXG4gICAgICAgICAgICBsYWJlbDogdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ0NQVTogd29ya2xvYWQnKSxcbiAgICAgICAgICAgIHVuaXQ6ICclJyxcbiAgICAgICAgICAgIHJlbmRlclR5cGU6ICdtaW4nLFxuICAgICAgICAgICAgbGluZVR5cGU6ICdsaW5lJyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2IyNGYzZScsXG4gICAgICAgICAgICBfX2FjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZnJhZ21lbnQ6ICdjOHlfTmV0d29ya1N0YXRpc3RpY3MnLFxuICAgICAgICAgICAgc2VyaWVzOiAnVXBsb2FkJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnTmV0d29yazogdXBsb2FkJyksXG4gICAgICAgICAgICB1bml0OiAnS0IvcycsXG4gICAgICAgICAgICByZW5kZXJUeXBlOiAnbWluJyxcbiAgICAgICAgICAgIGxpbmVUeXBlOiAnbGluZScsXG4gICAgICAgICAgICBjb2xvcjogJyM4OGMwMzknLFxuICAgICAgICAgICAgX19hY3RpdmU6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZyYWdtZW50OiAnYzh5X1NpZ25hbFN0cmVuZ3RoJyxcbiAgICAgICAgICAgIHNlcmllczogJ1JDU1AnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdTaWduYWw6IFJDU1AnKSxcbiAgICAgICAgICAgIHJlbmRlclR5cGU6ICdtaW4nLFxuICAgICAgICAgICAgbGluZVR5cGU6ICdsaW5lJyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzVlMmYxOScsXG4gICAgICAgICAgICBfX2FjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZnJhZ21lbnQ6ICdjOHlfU2lnbmFsU3RyZW5ndGgnLFxuICAgICAgICAgICAgc2VyaWVzOiAnUlNDUCcsXG4gICAgICAgICAgICBsYWJlbDogdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ1NpZ25hbDogUlNDUCcpLFxuICAgICAgICAgICAgcmVuZGVyVHlwZTogJ21pbicsXG4gICAgICAgICAgICBsaW5lVHlwZTogJ2xpbmUnLFxuICAgICAgICAgICAgY29sb3I6ICcjNWUyZjE5JyxcbiAgICAgICAgICAgIF9fYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmcmFnbWVudDogJ2M4eV9TaWduYWxTdHJlbmd0aCcsXG4gICAgICAgICAgICBzZXJpZXM6ICdSU1JQJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnU2lnbmFsOiBSU1JQJyksXG4gICAgICAgICAgICByZW5kZXJUeXBlOiAnbWluJyxcbiAgICAgICAgICAgIGxpbmVUeXBlOiAnbGluZScsXG4gICAgICAgICAgICBjb2xvcjogJyM0M2JhM2InLFxuICAgICAgICAgICAgX19hY3RpdmU6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZyYWdtZW50OiAnYzh5X1NpZ25hbFN0cmVuZ3RoJyxcbiAgICAgICAgICAgIHNlcmllczogJ1JTUlEnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdTaWduYWw6IFJTUlEnKSxcbiAgICAgICAgICAgIHJlbmRlclR5cGU6ICdtaW4nLFxuICAgICAgICAgICAgbGluZVR5cGU6ICdsaW5lJyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzE0YjBiMycsXG4gICAgICAgICAgICBfX2FjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZnJhZ21lbnQ6ICdjOHlfU2lnbmFsU3RyZW5ndGgnLFxuICAgICAgICAgICAgc2VyaWVzOiAnYmVyJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnU2lnbmFsOiBCRVInKSxcbiAgICAgICAgICAgIHVuaXQ6ICclJyxcbiAgICAgICAgICAgIHJlbmRlclR5cGU6ICdtaW4nLFxuICAgICAgICAgICAgbGluZVR5cGU6ICdsaW5lJyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzQ0ZmYzMycsXG4gICAgICAgICAgICBfX2FjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZnJhZ21lbnQ6ICdjOHlfU2lnbmFsU3RyZW5ndGgnLFxuICAgICAgICAgICAgc2VyaWVzOiAnRUNOMCcsXG4gICAgICAgICAgICBsYWJlbDogdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ1NpZ25hbDogRUNOMCcpLFxuICAgICAgICAgICAgcmVuZGVyVHlwZTogJ21pbicsXG4gICAgICAgICAgICBsaW5lVHlwZTogJ2xpbmUnLFxuICAgICAgICAgICAgY29sb3I6ICcjODczZWZhJyxcbiAgICAgICAgICAgIF9fYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmcmFnbWVudDogJ2M4eV9OZXR3b3JrU3RhdGlzdGljcycsXG4gICAgICAgICAgICBzZXJpZXM6ICdEb3dubG9hZCcsXG4gICAgICAgICAgICBsYWJlbDogdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ05ldHdvcms6IGRvd25sb2FkJyksXG4gICAgICAgICAgICB1bml0OiAnS0IvcycsXG4gICAgICAgICAgICByZW5kZXJUeXBlOiAnbWluJyxcbiAgICAgICAgICAgIGxpbmVUeXBlOiAnbGluZScsXG4gICAgICAgICAgICBjb2xvcjogJyNmMjdhNDUnLFxuICAgICAgICAgICAgX19hY3RpdmU6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZyYWdtZW50OiAnYzh5X01lbW9yeU1lYXN1cmVtZW50JyxcbiAgICAgICAgICAgIHNlcmllczogJ1RvdGFsJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnTWVtb3J5OiB0b3RhbCcpLFxuICAgICAgICAgICAgdW5pdDogJ01CJyxcbiAgICAgICAgICAgIHJlbmRlclR5cGU6ICdtaW4nLFxuICAgICAgICAgICAgbGluZVR5cGU6ICdsaW5lJyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2RhZGQ4YycsXG4gICAgICAgICAgICBfX2FjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgYWxhcm1zRXZlbnRzQ29uZmlnczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGxhYmVsOiAnYzh5X0xvY2F0aW9uVXBkYXRlJyxcbiAgICAgICAgICAgIHRpbWVsaW5lVHlwZTogJ0VWRU5UJyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzZmNmNkMCcsXG4gICAgICAgICAgICBmaWx0ZXJzOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdjOHlfTG9jYXRpb25VcGRhdGUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX19hY3RpdmU6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGxhYmVsOiAnYzh5X1VuYXZhaWxhYmlsaXR5QWxhcm0nLFxuICAgICAgICAgICAgdGltZWxpbmVUeXBlOiAnQUxBUk0nLFxuICAgICAgICAgICAgY29sb3I6ICcjMzc1YmYyJyxcbiAgICAgICAgICAgIGZpbHRlcnM6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ2M4eV9VbmF2YWlsYWJpbGl0eUFsYXJtJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9fYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAgdHJhbnNmb3JtQ29uZmlnV2l0aENvbnRleHQoY29uZmlnLCBjb250ZXh0LCBjOHlEZXZpY2VzKSB7XG4gICAgICAgICduZ0luamVjdCc7XG4gICAgICAgIHJldHVybiBjOHlEZXZpY2VzXG4gICAgICAgICAgLmdldFN1cHBvcnRlZFNlcmllcyhjb250ZXh0LmlkKVxuICAgICAgICAgIC50aGVuKHN1cHBvcnRlZE1lYXN1cmVtZW50U2VyaWVzID0+XG4gICAgICAgICAgICBjb25maWcuZGF0YXBvaW50cy5maWx0ZXIoY29uZmlnTWVhc3VyZW1lbnQgPT5cbiAgICAgICAgICAgICAgc3VwcG9ydGVkTWVhc3VyZW1lbnRTZXJpZXMuZmluZChcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWRTZXJpZXMgPT5cbiAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFNlcmllcy5mcmFnbWVudCA9PT0gY29uZmlnTWVhc3VyZW1lbnQuZnJhZ21lbnQgJiZcbiAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFNlcmllcy5zZXJpZXMgPT09IGNvbmZpZ01lYXN1cmVtZW50LnNlcmllc1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICAgIC50aGVuKGRhdGFwb2ludHMgPT4gKHsgLi4uY29uZmlnLCAuLi57IGRhdGFwb2ludHMgfSB9KSk7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnZGV2aWNlU3RhdHVzV2lkZ2V0JyxcbiAgICAgIHRpdGxlOiBnZXR0ZXh0KCdEZXZpY2Ugc3RhdHVzJyksXG4gICAgICBfeDogMCxcbiAgICAgIF95OiAyLFxuICAgICAgX2hlaWdodDogNSxcbiAgICAgIF93aWR0aDogNFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ2RldmljZUdyb3VwQXNzaWdubWVudFdpZGdldCcsXG4gICAgICB0aXRsZTogZ2V0dGV4dCgnR3JvdXAgYXNzaWdubWVudCcpLFxuICAgICAgX3g6IDgsXG4gICAgICBfeTogNyxcbiAgICAgIF9oZWlnaHQ6IDQsXG4gICAgICBfd2lkdGg6IDRcbiAgICB9LFxuICAgIHtcbiAgICAgIGNvbXBvbmVudElkOiAnYXNzZXROb3Rlc1dpZGdldCcsXG4gICAgICB0aXRsZTogZ2V0dGV4dCgnTWVzc2FnZSBvZiB0aGUgZGF5JyksXG4gICAgICBjbGFzc2VzOiB7ICdwYW5lbC10aXRsZS1oaWRkZW4nOiB0cnVlIH0sXG4gICAgICBfeDogMCxcbiAgICAgIF95OiAwLFxuICAgICAgX2hlaWdodDogMixcbiAgICAgIF93aWR0aDogMTJcbiAgICB9LFxuICAgIHtcbiAgICAgIGNvbXBvbmVudElkOiAnTWFwJyxcbiAgICAgIHRpdGxlOiBnZXR0ZXh0KCdMb2NhdGlvbicpLFxuICAgICAgX3g6IDQsXG4gICAgICBfeTogMTEsXG4gICAgICBfaGVpZ2h0OiA0LFxuICAgICAgX3dpZHRoOiA4XG4gICAgfVxuICBdIGFzIFdpZGdldFtdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcm91dGVyOiBBY3RpdmF0ZWRSb3V0ZSxcbiAgICBwcml2YXRlIHdpZGdldFNlcnZpY2U6IFdpZGdldFNlcnZpY2UsXG4gICAgcHJpdmF0ZSB0cmFuc2xhdGVTZXJ2aWNlOiBUcmFuc2xhdGVTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuY3VycmVudENvbnRleHQkID0gdGhpcy5yb3V0ZXIucGFyZW50LmRhdGEucGlwZShcbiAgICAgIG1hcCgoeyBjb250ZXh0RGF0YSB9KSA9PiB7XG4gICAgICAgIHRoaXMudGl0bGUgPSBjb250ZXh0RGF0YS5uYW1lO1xuICAgICAgICByZXR1cm4gY29udGV4dERhdGE7XG4gICAgICB9KVxuICAgICk7XG5cbiAgICB0aGlzLndpZGdldHMkID0gZnJvbSh0aGlzLkRFVklDRV9JTkZPX1dJREdFVFMpLnBpcGUoXG4gICAgICBtZXJnZU1hcCh3aWRnZXQgPT4gdGhpcy53aWRnZXRTZXJ2aWNlLm1hcExlZ2FjeSh3aWRnZXQpKSxcbiAgICAgIG1hcCh3aWRnZXQgPT4gKHtcbiAgICAgICAgLi4ud2lkZ2V0LFxuICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAuLi53aWRnZXQuY29uZmlnLFxuICAgICAgICAgIGRldmljZTogdGhpcy5yb3V0ZXIucGFyZW50LnNuYXBzaG90LmRhdGEuY29udGV4dERhdGFcbiAgICAgICAgfVxuICAgICAgfSkpLFxuICAgICAgdG9BcnJheSgpXG4gICAgKTtcblxuICAgIHRoaXMud2lkZ2V0c1N1YnNjcmlwdGlvbiA9IGNvbWJpbmVMYXRlc3QoW3RoaXMud2lkZ2V0cyQsIHRoaXMuY3VycmVudENvbnRleHQkXSkuc3Vic2NyaWJlKFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLmlzTG9hZGluZyQubmV4dChmYWxzZSk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMud2lkZ2V0c1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICB9XG59XG4iXX0=