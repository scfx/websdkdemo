import { Component } from '@angular/core';
import { gettext } from '@c8y/ngx-components';
import { get } from 'lodash-es';
import { BaseStepperComponent } from '@c8y/ngx-components/operations/bulk-operation-stepper';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@c8y/ngx-components/operations/bulk-operation-stepper';
import * as ɵngcc2 from './select-device-profile-step.component';
import * as ɵngcc3 from './confirm-device-profile-selection-step.component';
import * as ɵngcc4 from '@c8y/ngx-components';

function StepperBulkTypeDeviceProfileComponent_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    const _r3 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "c8y-select-device-profile-step", 2);
    ɵngcc0.ɵɵlistener("deviceProfile", function StepperBulkTypeDeviceProfileComponent_ng_container_1_Template_c8y_select_device_profile_step_deviceProfile_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.onDeviceProfileSelected($event); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} }
function StepperBulkTypeDeviceProfileComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelement(1, "c8y-confirm-device-profile-selection-step", 3);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("selectedDeviceProfile", ctx_r1.selectedDeviceProfile);
} }
export class StepperBulkTypeDeviceProfileComponent extends BaseStepperComponent {
    goToConfirmSelection($event) {
        this.deviceTypes = get(this.selectedDeviceProfile, 'c8y_Filter.type');
        $event.stepper.next();
    }
    onDeviceProfileSelected(selectedItem) {
        this.selectedDeviceProfile = selectedItem;
    }
    retrieveOperationPrototype() {
        return {
            name: gettext('Apply device profile'),
            description: get(this.selectedDeviceProfile, 'name'),
            prototype: {
                description: `Apply device profile: ${this.selectedDeviceProfile.name}`,
                profileId: this.selectedDeviceProfile.id,
                profileName: this.selectedDeviceProfile.name,
                c8y_DeviceProfile: this.selectedDeviceProfile.c8y_DeviceProfile
            }
        };
    }
}
StepperBulkTypeDeviceProfileComponent.ɵfac = /*@__PURE__*/ function () { let ɵStepperBulkTypeDeviceProfileComponent_BaseFactory; return function StepperBulkTypeDeviceProfileComponent_Factory(t) { return (ɵStepperBulkTypeDeviceProfileComponent_BaseFactory || (ɵStepperBulkTypeDeviceProfileComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(StepperBulkTypeDeviceProfileComponent)))(t || StepperBulkTypeDeviceProfileComponent); }; }();
StepperBulkTypeDeviceProfileComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: StepperBulkTypeDeviceProfileComponent, selectors: [["c8y-stepper-bulk-type-device-profile"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 5, vars: 9, consts: [[4, "customStep", "customStepCompleted", "customStepButtonsDisabled", "customStepOnNext"], [4, "customStep"], [1, "d-contents", 3, "deviceProfile"], [1, "d-contents", 3, "selectedDeviceProfile"]], template: function StepperBulkTypeDeviceProfileComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "c8y-bulk-operation-stepper");
        ɵngcc0.ɵɵtemplate(1, StepperBulkTypeDeviceProfileComponent_ng_container_1_Template, 2, 0, "ng-container", 0);
        ɵngcc0.ɵɵpipe(2, "translate");
        ɵngcc0.ɵɵtemplate(3, StepperBulkTypeDeviceProfileComponent_ng_container_3_Template, 2, 1, "ng-container", 1);
        ɵngcc0.ɵɵpipe(4, "translate");
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("customStep", ɵngcc0.ɵɵpipeBind1(2, 5, "Select device profile"))("customStepCompleted", !!ctx.selectedDeviceProfile)("customStepButtonsDisabled", !ctx.selectedDeviceProfile)("customStepOnNext", ctx.goToConfirmSelection.bind(ctx));
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("customStep", ɵngcc0.ɵɵpipeBind1(4, 7, "Confirm selected device profile"));
    } }, directives: [ɵngcc1.BulkOperationStepper, ɵngcc1.CustomStep, ɵngcc2.SelectDeviceProfileStepComponent, ɵngcc3.ConfirmDeviceProfileSelectionStepComponent], pipes: [ɵngcc4.C8yTranslatePipe], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(StepperBulkTypeDeviceProfileComponent, [{
        type: Component,
        args: [{
                selector: 'c8y-stepper-bulk-type-device-profile',
                template: "<c8y-bulk-operation-stepper>\n  <ng-container\n    *customStep=\"\n      'Select device profile' | translate; \n      completed: !!selectedDeviceProfile;\n      buttonsDisabled: !selectedDeviceProfile; \n      onNext: goToConfirmSelection.bind(this)\"\n  >\n    <c8y-select-device-profile-step\n      (deviceProfile)=\"onDeviceProfileSelected($event)\"\n      class=\"d-contents\"\n    ></c8y-select-device-profile-step>\n  </ng-container>\n  <ng-container *customStep=\"'Confirm selected device profile' | translate\">\n    <c8y-confirm-device-profile-selection-step\n      class=\"d-contents\"\n      [selectedDeviceProfile]=\"selectedDeviceProfile\"\n    ></c8y-confirm-device-profile-selection-step>\n  </ng-container>\n</c8y-bulk-operation-stepper>\n"
            }]
    }], null, null); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RlcHBlci1idWxrLXR5cGUtZGV2aWNlLXByb2ZpbGUuY29tcG9uZW50LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9vcGVyYXRpb25zL3N0ZXBwZXItYnVsay10eXBlLWRldmljZS1wcm9maWxlL3N0ZXBwZXItYnVsay10eXBlLWRldmljZS1wcm9maWxlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTFDLE9BQU8sRUFBYyxPQUFPLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQ2hDLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHVEQUF1RCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPN0YsTUFBTSxPQUFPLHFDQUFzQyxTQUFRLG9CQUFvQjtBQUMvRSxJQUVFLG9CQUFvQixDQUFDLE1BQThDO0FBQ3JFLFFBQUksSUFBSSxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLHFCQUFxQixFQUFFLGlCQUFpQixDQUFDLENBQUM7QUFDMUUsUUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQzFCLElBQUUsQ0FBQztBQUNILElBQ0UsdUJBQXVCLENBQUMsWUFBWTtBQUN0QyxRQUFJLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxZQUFZLENBQUM7QUFDOUMsSUFBRSxDQUFDO0FBQ0gsSUFDWSwwQkFBMEI7QUFBSyxRQUN2QyxPQUFPO0FBQ1gsWUFBTSxJQUFJLEVBQUUsT0FBTyxDQUFDLHNCQUFzQixDQUFDO0FBQzNDLFlBQU0sV0FBVyxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMscUJBQXFCLEVBQUUsTUFBTSxDQUFDO0FBQzFELFlBQU0sU0FBUyxFQUFHO0FBQ2xCLGdCQUFRLFdBQVcsRUFBRSx5QkFBeUIsSUFBSSxDQUFDLHFCQUFxQixDQUFDLElBQUksRUFBRTtBQUMvRSxnQkFBUSxTQUFTLEVBQUUsSUFBSSxDQUFDLHFCQUFxQixDQUFDLEVBQUU7QUFDaEQsZ0JBQVEsV0FBVyxFQUFFLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJO0FBQ3BELGdCQUFRLGlCQUFpQixFQUFFLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxpQkFBaUI7QUFDdkUsYUFBaUM7QUFDakMsU0FBSyxDQUFDO0FBQ04sSUFBRSxDQUFDO0FBQ0g7aUVBNUJDLFNBQVMsU0FBQyxrQkFDVCxRQUFRLEVBQUUsc0NBQXNDLGtCQUNoRDttZkFBOEQsY0FDL0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBQ0k7QUFBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENka1N0ZXAgfSBmcm9tICdAYW5ndWxhci9jZGsvc3RlcHBlcic7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IElNYW5hZ2VkT2JqZWN0LCBJT3BlcmF0aW9uIH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuaW1wb3J0IHsgQzh5U3RlcHBlciwgZ2V0dGV4dCB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgZ2V0IH0gZnJvbSAnbG9kYXNoLWVzJztcbmltcG9ydCB7IEJhc2VTdGVwcGVyQ29tcG9uZW50IH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cy9vcGVyYXRpb25zL2J1bGstb3BlcmF0aW9uLXN0ZXBwZXInO1xuaW1wb3J0IHsgT3BlcmF0aW9uRGV0YWlscyB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMvb3BlcmF0aW9ucy9idWxrLW9wZXJhdGlvbnMtc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2M4eS1zdGVwcGVyLWJ1bGstdHlwZS1kZXZpY2UtcHJvZmlsZScsXG4gIHRlbXBsYXRlVXJsOiAnc3RlcHBlci1idWxrLXR5cGUtZGV2aWNlLXByb2ZpbGUuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIFN0ZXBwZXJCdWxrVHlwZURldmljZVByb2ZpbGVDb21wb25lbnQgZXh0ZW5kcyBCYXNlU3RlcHBlckNvbXBvbmVudCB7XG4gIHNlbGVjdGVkRGV2aWNlUHJvZmlsZTogSU1hbmFnZWRPYmplY3Q7XG5cbiAgZ29Ub0NvbmZpcm1TZWxlY3Rpb24oJGV2ZW50OiB7IHN0ZXBwZXI6IEM4eVN0ZXBwZXI7IHN0ZXA6IENka1N0ZXAgfSkge1xuICAgIHRoaXMuZGV2aWNlVHlwZXMgPSBnZXQodGhpcy5zZWxlY3RlZERldmljZVByb2ZpbGUsICdjOHlfRmlsdGVyLnR5cGUnKTtcbiAgICAkZXZlbnQuc3RlcHBlci5uZXh0KCk7XG4gIH1cblxuICBvbkRldmljZVByb2ZpbGVTZWxlY3RlZChzZWxlY3RlZEl0ZW0pIHtcbiAgICB0aGlzLnNlbGVjdGVkRGV2aWNlUHJvZmlsZSA9IHNlbGVjdGVkSXRlbTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZXRyaWV2ZU9wZXJhdGlvblByb3RvdHlwZSgpOiBPcGVyYXRpb25EZXRhaWxzIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogZ2V0dGV4dCgnQXBwbHkgZGV2aWNlIHByb2ZpbGUnKSxcbiAgICAgIGRlc2NyaXB0aW9uOiBnZXQodGhpcy5zZWxlY3RlZERldmljZVByb2ZpbGUsICduYW1lJyksXG4gICAgICBwcm90b3R5cGU6ICh7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBgQXBwbHkgZGV2aWNlIHByb2ZpbGU6ICR7dGhpcy5zZWxlY3RlZERldmljZVByb2ZpbGUubmFtZX1gLFxuICAgICAgICBwcm9maWxlSWQ6IHRoaXMuc2VsZWN0ZWREZXZpY2VQcm9maWxlLmlkLFxuICAgICAgICBwcm9maWxlTmFtZTogdGhpcy5zZWxlY3RlZERldmljZVByb2ZpbGUubmFtZSxcbiAgICAgICAgYzh5X0RldmljZVByb2ZpbGU6IHRoaXMuc2VsZWN0ZWREZXZpY2VQcm9maWxlLmM4eV9EZXZpY2VQcm9maWxlXG4gICAgICB9IGFzIHVua25vd24pIGFzIElPcGVyYXRpb25cbiAgICB9O1xuICB9XG59XG4iXX0=