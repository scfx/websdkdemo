import { __awaiter } from "tslib";
import { Injectable } from '@angular/core';
import { TenantUiService } from '@c8y/ngx-components';
export class DefaultSubscriptionsGuard {
    constructor(tenantUiService) {
        this.tenantUiService = tenantUiService;
    }
    /**
     * Checks if default subscriptions feature should be active,
     * i.e. whether the current tenant is the management or an enterprise tenant.
     * **Note: the check is executed only once in the runtime.**
     *
     * @returns True, if the feature should be active.
     */
    canActivate() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.active === undefined) {
                this.active =
                    (yield this.tenantUiService.isManagementTenant()) ||
                        (yield this.tenantUiService.isEnterpriseTenant());
            }
            return this.active;
        });
    }
}
DefaultSubscriptionsGuard.decorators = [
    { type: Injectable }
];
DefaultSubscriptionsGuard.ctorParameters = () => [
    { type: TenantUiService }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdC1zdWJzY3JpcHRpb25zLmd1YXJkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vZGVmYXVsdC1zdWJzY3JpcHRpb25zL2RlZmF1bHQtc3Vic2NyaXB0aW9ucy5ndWFyZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUzQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFHdEQsTUFBTSxPQUFPLHlCQUF5QjtJQUdwQyxZQUFvQixlQUFnQztRQUFoQyxvQkFBZSxHQUFmLGVBQWUsQ0FBaUI7SUFBRyxDQUFDO0lBRXhEOzs7Ozs7T0FNRztJQUNHLFdBQVc7O1lBQ2YsSUFBSSxJQUFJLENBQUMsTUFBTSxLQUFLLFNBQVMsRUFBRTtnQkFDN0IsSUFBSSxDQUFDLE1BQU07b0JBQ1QsQ0FBQyxNQUFNLElBQUksQ0FBQyxlQUFlLENBQUMsa0JBQWtCLEVBQUUsQ0FBQzt3QkFDakQsQ0FBQyxNQUFNLElBQUksQ0FBQyxlQUFlLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDO2FBQ3JEO1lBQ0QsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ3JCLENBQUM7S0FBQTs7O1lBcEJGLFVBQVU7OztZQUZGLGVBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDYW5BY3RpdmF0ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBUZW5hbnRVaVNlcnZpY2UgfSBmcm9tICdAYzh5L25neC1jb21wb25lbnRzJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIERlZmF1bHRTdWJzY3JpcHRpb25zR3VhcmQgaW1wbGVtZW50cyBDYW5BY3RpdmF0ZSB7XG4gIHByaXZhdGUgYWN0aXZlOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgdGVuYW50VWlTZXJ2aWNlOiBUZW5hbnRVaVNlcnZpY2UpIHt9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBkZWZhdWx0IHN1YnNjcmlwdGlvbnMgZmVhdHVyZSBzaG91bGQgYmUgYWN0aXZlLFxuICAgKiBpLmUuIHdoZXRoZXIgdGhlIGN1cnJlbnQgdGVuYW50IGlzIHRoZSBtYW5hZ2VtZW50IG9yIGFuIGVudGVycHJpc2UgdGVuYW50LlxuICAgKiAqKk5vdGU6IHRoZSBjaGVjayBpcyBleGVjdXRlZCBvbmx5IG9uY2UgaW4gdGhlIHJ1bnRpbWUuKipcbiAgICpcbiAgICogQHJldHVybnMgVHJ1ZSwgaWYgdGhlIGZlYXR1cmUgc2hvdWxkIGJlIGFjdGl2ZS5cbiAgICovXG4gIGFzeW5jIGNhbkFjdGl2YXRlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmFjdGl2ZSA9XG4gICAgICAgIChhd2FpdCB0aGlzLnRlbmFudFVpU2VydmljZS5pc01hbmFnZW1lbnRUZW5hbnQoKSkgfHxcbiAgICAgICAgKGF3YWl0IHRoaXMudGVuYW50VWlTZXJ2aWNlLmlzRW50ZXJwcmlzZVRlbmFudCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlO1xuICB9XG59XG4iXX0=