import { Component, Input } from '@angular/core';
import { sortBy } from 'lodash-es';
/**
 * This component is used as the outlet to show the action list.
 * In a c8ycli app it is by default placed on the header component near app-switcher.
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';
import * as ɵngcc2 from 'ngx-bootstrap/dropdown';
import * as ɵngcc3 from '../common/icon.directive';
import * as ɵngcc4 from '../common/outlet.directive';
import * as ɵngcc5 from '../i18n/c8y-translate.pipe';

function ActionOutletComponent_div_0_ul_3_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainer(0);
} }
function ActionOutletComponent_div_0_ul_3_ng_container_1_li_2_i_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "i", 11);
} if (rf & 2) {
    const item_r3 = ɵngcc0.ɵɵnextContext(2).$implicit;
    ɵngcc0.ɵɵproperty("c8yIcon", item_r3.icon);
} }
function ActionOutletComponent_div_0_ul_3_ng_container_1_li_2_Template(rf, ctx) { if (rf & 1) {
    const _r10 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "li");
    ɵngcc0.ɵɵelementStart(1, "button", 9);
    ɵngcc0.ɵɵlistener("click", function ActionOutletComponent_div_0_ul_3_ng_container_1_li_2_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r10); const item_r3 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r8 = ɵngcc0.ɵɵnextContext(3); return ctx_r8.invoke(item_r3); });
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵtemplate(3, ActionOutletComponent_div_0_ul_3_ng_container_1_li_2_i_3_Template, 1, 1, "i", 10);
    ɵngcc0.ɵɵtext(4);
    ɵngcc0.ɵɵpipe(5, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const item_r3 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵpropertyInterpolate("title", ɵngcc0.ɵɵpipeBind1(2, 4, item_r3.label));
    ɵngcc0.ɵɵattribute("disabled", item_r3.disabled ? "disabled" : null);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", item_r3.icon);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1("", ɵngcc0.ɵɵpipeBind1(5, 6, item_r3.label), " ");
} }
function ActionOutletComponent_div_0_ul_3_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ActionOutletComponent_div_0_ul_3_ng_container_1_ng_container_1_Template, 1, 0, "ng-container", 7);
    ɵngcc0.ɵɵtemplate(2, ActionOutletComponent_div_0_ul_3_ng_container_1_li_2_Template, 6, 8, "li", 8);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const item_r3 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("c8yOutlet", item_r3.template);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", item_r3.label);
} }
function ActionOutletComponent_div_0_ul_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "ul", 5);
    ɵngcc0.ɵɵtemplate(1, ActionOutletComponent_div_0_ul_3_ng_container_1_Template, 3, 2, "ng-container", 6);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r1.getByPriority());
} }
function ActionOutletComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 1);
    ɵngcc0.ɵɵelementStart(1, "button", 2);
    ɵngcc0.ɵɵelement(2, "i", 3);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(3, ActionOutletComponent_div_0_ul_3_Template, 2, 1, "ul", 4);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("c8yIcon", "plus-circle");
} }
export class ActionOutletComponent {
    constructor() {
        /**
         * Identifies if in a mobile view the toolbar is expanded or not.
         */
        this.isPageToolbarExpanded = false;
        /**
         * The current items to display in the action dropdown.
         */
        this.items = [];
    }
    /**
     * Returns the items ordered by priority.
     */
    getByPriority() {
        return sortBy(this.items, this.byPriority);
    }
    /**
     * Invokes action after an action is clicked.
     */
    invoke(action) {
        if (action.action) {
            action.action.call();
        }
    }
    byPriority(item) {
        return -item.priority;
    }
}
ActionOutletComponent.ɵfac = function ActionOutletComponent_Factory(t) { return new (t || ActionOutletComponent)(); };
ActionOutletComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: ActionOutletComponent, selectors: [["c8y-action-outlet"]], inputs: { items: "items" }, decls: 1, vars: 1, consts: [["class", "dropdown", "dropdown", "", 4, "ngIf"], ["dropdown", "", 1, "dropdown"], ["type", "button", "dropdownToggle", "", "aria-haspopup", "true", "aria-expanded", "true", 1, "main-header-button", "dropdown-toggle", "c8y-dropdown"], [1, "icon-2x", 3, "c8yIcon"], ["class", "dropdown-menu cog-dropdown", 4, "dropdownMenu"], [1, "dropdown-menu", "cog-dropdown"], [4, "ngFor", "ngForOf"], [4, "c8yOutlet"], [4, "ngIf"], [3, "title", "click"], [3, "c8yIcon", 4, "ngIf"], [3, "c8yIcon"]], template: function ActionOutletComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, ActionOutletComponent_div_0_Template, 4, 1, "div", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ctx.items && ctx.items.length > 0);
    } }, directives: [ɵngcc1.NgIf, ɵngcc2.BsDropdownDirective, ɵngcc2.BsDropdownToggleDirective, ɵngcc3.IconDirective, ɵngcc2.BsDropdownMenuDirective, ɵngcc1.NgForOf, ɵngcc4.OutletDirective], pipes: [ɵngcc5.C8yTranslatePipe], encapsulation: 2 });
ActionOutletComponent.propDecorators = {
    items: [{ type: Input }]
};
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ActionOutletComponent, [{
        type: Component,
        args: [{
                selector: 'c8y-action-outlet',
                template: "<div class=\"dropdown\" dropdown *ngIf=\"items && items.length > 0\">\n  <button\n    type=\"button\"\n    class=\"main-header-button dropdown-toggle c8y-dropdown\"\n    dropdownToggle\n    aria-haspopup=\"true\"\n    aria-expanded=\"true\">\n    <i [c8yIcon]=\"'plus-circle'\" class=\"icon-2x\"></i>\n  </button>\n\n  <ul class=\"dropdown-menu cog-dropdown\" *dropdownMenu>\n    <ng-container *ngFor=\"let item of getByPriority()\">\n      <ng-container *c8yOutlet=\"item.template\"></ng-container>\n      <li *ngIf=\"item.label\">\n        <button title=\"{{ item.label | translate }}\" [attr.disabled]=\"item.disabled ? 'disabled' : null\" (click)=\"invoke(item)\">\n          <i *ngIf=\"item.icon\" [c8yIcon]=\"item.icon\"></i>{{item.label | translate}}\n        </button>\n      </li>\n    </ng-container>\n  </ul>\n</div>\n"
            }]
    }], function () { return []; }, { items: [{
            type: Input
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9uLW91dGxldC5jb21wb25lbnQuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2NvcmUvYWN0aW9uL2FjdGlvbi1vdXRsZXQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRWpELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFFbkM7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUtILE1BQU0sT0FBTyxxQkFBcUI7QUFDbEMsSUFMQTtBQUNHLFFBSUQ7QUFDRjtBQUVBLFdBREs7QUFDTCxRQUFFLDBCQUFxQixHQUFHLEtBQUssQ0FBQztBQUNoQyxRQUNFO0FBQ0Y7QUFFQSxXQURLO0FBQ0wsUUFBVyxVQUFLLEdBQWEsRUFBRSxDQUFDO0FBQ2hDLElBb0JBLENBQUM7QUFDRCxJQXBCRTtBQUNGO0FBQ0UsT0FBRztBQUNMLElBQUUsYUFBYTtBQUNmLFFBQUksT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDL0MsSUFBRSxDQUFDO0FBQ0gsSUFDRTtBQUNGO0FBQ0UsT0FBRztBQUNMLElBQUUsTUFBTSxDQUFDLE1BQU07QUFDZixRQUFJLElBQUksTUFBTSxDQUFDLE1BQU0sRUFBRTtBQUN2QixZQUFNLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDM0IsU0FBSztBQUNMLElBQUUsQ0FBQztBQUNILElBQ1UsVUFBVSxDQUFDLElBQUk7QUFDekIsUUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztBQUMxQixJQUFFLENBQUM7QUFDSDtpREFsQ0MsU0FBUyxTQUFDLGtCQUNULFFBQVEsRUFBRSxtQkFBbUI7YUFDN0I7O2tCQUE2QztZQUM5QztzUEFDSTtBQUFDO0FBRUYsb0JBT0QsS0FBSztBQUFJOzs7Ozs7Ozs7b0JBQUU7QUFBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gJy4vYWN0aW9uLm1vZGVsJztcbmltcG9ydCB7IHNvcnRCeSB9IGZyb20gJ2xvZGFzaC1lcyc7XG5cbi8qKlxuICogVGhpcyBjb21wb25lbnQgaXMgdXNlZCBhcyB0aGUgb3V0bGV0IHRvIHNob3cgdGhlIGFjdGlvbiBsaXN0LlxuICogSW4gYSBjOHljbGkgYXBwIGl0IGlzIGJ5IGRlZmF1bHQgcGxhY2VkIG9uIHRoZSBoZWFkZXIgY29tcG9uZW50IG5lYXIgYXBwLXN3aXRjaGVyLlxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjOHktYWN0aW9uLW91dGxldCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9hY3Rpb24tb3V0bGV0LmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBBY3Rpb25PdXRsZXRDb21wb25lbnQge1xuICAvKipcbiAgICogSWRlbnRpZmllcyBpZiBpbiBhIG1vYmlsZSB2aWV3IHRoZSB0b29sYmFyIGlzIGV4cGFuZGVkIG9yIG5vdC5cbiAgICovXG4gIGlzUGFnZVRvb2xiYXJFeHBhbmRlZCA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBpdGVtcyB0byBkaXNwbGF5IGluIHRoZSBhY3Rpb24gZHJvcGRvd24uXG4gICAqL1xuICBASW5wdXQoKSBpdGVtczogQWN0aW9uW10gPSBbXTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgaXRlbXMgb3JkZXJlZCBieSBwcmlvcml0eS5cbiAgICovXG4gIGdldEJ5UHJpb3JpdHkoKSB7XG4gICAgcmV0dXJuIHNvcnRCeSh0aGlzLml0ZW1zLCB0aGlzLmJ5UHJpb3JpdHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEludm9rZXMgYWN0aW9uIGFmdGVyIGFuIGFjdGlvbiBpcyBjbGlja2VkLlxuICAgKi9cbiAgaW52b2tlKGFjdGlvbikge1xuICAgIGlmIChhY3Rpb24uYWN0aW9uKSB7XG4gICAgICBhY3Rpb24uYWN0aW9uLmNhbGwoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGJ5UHJpb3JpdHkoaXRlbSkge1xuICAgIHJldHVybiAtaXRlbS5wcmlvcml0eTtcbiAgfVxufVxuIl19