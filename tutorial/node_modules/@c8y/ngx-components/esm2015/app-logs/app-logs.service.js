import { Injectable } from '@angular/core';
import { FetchClient } from '@c8y/client';
import { from } from 'rxjs';
import { flatMap } from 'rxjs/operators';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@c8y/client';
export class AppLogsService {
    constructor(client) {
        this.client = client;
        this.BASE_PATH_APPLICATION = 'application/applications';
        this.header = {
            Accept: 'application/vnd.com.nsn.cumulocity.applicationLogs+json;charset=UTF-8;ver=0.9'
        };
    }
    getLogs$(appId, instanceName, params = {}) {
        const url = `${this.BASE_PATH_APPLICATION}/${appId}/logs/${instanceName}`;
        const defaultConfig = {
            headers: this.header,
            method: 'GET'
        };
        const formattedDateFrom = params.dateFrom ? this.formatDate(params.dateFrom) : null;
        const formattedDateTo = params.dateTo ? this.formatDate(params.dateTo) : null;
        const modifiedParams = Object.assign(Object.assign(Object.assign({}, params), (formattedDateFrom && { dateFrom: formattedDateFrom })), (formattedDateTo && { dateTo: formattedDateTo }));
        const config = params ? Object.assign(Object.assign({}, defaultConfig), { params: modifiedParams }) : Object.assign({}, defaultConfig);
        return from(this.client.fetch(url, config)).pipe(flatMap(res => res.json()));
    }
    formatDate(dateToFormat) {
        return new Date(dateToFormat).toISOString();
    }
}
AppLogsService.ɵfac = function AppLogsService_Factory(t) { return new (t || AppLogsService)(ɵngcc0.ɵɵinject(ɵngcc1.FetchClient)); };
AppLogsService.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: AppLogsService, factory: AppLogsService.ɵfac });
AppLogsService.ctorParameters = () => [
    { type: FetchClient }
];
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(AppLogsService, [{
        type: Injectable
    }], function () { return [{ type: ɵngcc1.FetchClient }]; }, null); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLWxvZ3Muc2VydmljZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vYXBwLWxvZ3MvYXBwLWxvZ3Muc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDLE9BQU8sRUFBRSxXQUFXLEVBQWlCLE1BQU0sYUFBYSxDQUFDO0FBQ3pELE9BQU8sRUFBYyxJQUFJLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDeEMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7QUFTekMsTUFBTSxPQUFPLGNBQWM7QUFDM0IsSUFHRSxZQUFvQixNQUFtQjtBQUN6QyxRQURzQixXQUFNLEdBQU4sTUFBTSxDQUFhO0FBQUMsUUFIaEMsMEJBQXFCLEdBQVcsMEJBQTBCLENBQUM7QUFDckUsUUFHSSxJQUFJLENBQUMsTUFBTSxHQUFHO0FBQ2xCLFlBQU0sTUFBTSxFQUFFLCtFQUErRTtBQUM3RixTQUFLLENBQUM7QUFDTixJQUFFLENBQUM7QUFDSCxJQUNFLFFBQVEsQ0FBQyxLQUFhLEVBQUUsWUFBb0IsRUFBRSxTQUF3QixFQUFFO0FBQUksUUFDMUUsTUFBTSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMscUJBQXFCLElBQUksS0FBSyxTQUFTLFlBQVksRUFBRSxDQUFDO0FBQzlFLFFBQUksTUFBTSxhQUFhLEdBQWtCO0FBQ3pDLFlBQU0sT0FBTyxFQUFFLElBQUksQ0FBQyxNQUFNO0FBQzFCLFlBQU0sTUFBTSxFQUFFLEtBQUs7QUFDbkIsU0FBSyxDQUFDO0FBQ04sUUFBSSxNQUFNLGlCQUFpQixHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7QUFDeEYsUUFBSSxNQUFNLGVBQWUsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQ2xGLFFBQUksTUFBTSxjQUFjLGlEQUNmLE1BQU0sR0FDTixDQUFDLGlCQUFpQixJQUFJLEVBQUUsUUFBUSxFQUFFLGlCQUFpQixFQUFFLENBQUMsR0FDdEQsQ0FBQyxlQUFlLElBQUksRUFBRSxNQUFNLEVBQUUsZUFBZSxFQUFFLENBQUMsQ0FDcEQsQ0FBQztBQUNOLFFBQ0ksTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLENBQUMsaUNBQU0sYUFBYSxLQUFFLE1BQU0sRUFBRSxjQUFjLElBQUcsQ0FBQyxtQkFBTSxhQUFhLENBQUUsQ0FBQztBQUNoRyxRQUFJLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ2pGLElBQUUsQ0FBQztBQUNILElBQ0UsVUFBVSxDQUFDLFlBQW9CO0FBQUksUUFDakMsT0FBTyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUNoRCxJQUFFLENBQUM7QUFDSDswQ0FoQ0MsVUFBVTt3SEFDVDtBQUFDO0FBQ1UsWUFaSixXQUFXO0FBQUc7Ozs0RUFBRTtBQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTG9nc0pTT04gfSBmcm9tICcuL2xvZ3MubW9kZWwnO1xuaW1wb3J0IHsgRmV0Y2hDbGllbnQsIElGZXRjaE9wdGlvbnMgfSBmcm9tICdAYzh5L2NsaWVudCc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBmcm9tIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBmbGF0TWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5pbnRlcmZhY2UgUmVxdWVzdFBhcmFtcyB7XG4gIGRhdGVGcm9tPztcbiAgZGF0ZVRvPztcbiAgbGltaXQ/O1xufVxuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgQXBwTG9nc1NlcnZpY2Uge1xuICBwcml2YXRlIEJBU0VfUEFUSF9BUFBMSUNBVElPTjogc3RyaW5nID0gJ2FwcGxpY2F0aW9uL2FwcGxpY2F0aW9ucyc7XG4gIHByaXZhdGUgaGVhZGVyOiBhbnk7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjbGllbnQ6IEZldGNoQ2xpZW50KSB7XG4gICAgdGhpcy5oZWFkZXIgPSB7XG4gICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi92bmQuY29tLm5zbi5jdW11bG9jaXR5LmFwcGxpY2F0aW9uTG9ncytqc29uO2NoYXJzZXQ9VVRGLTg7dmVyPTAuOSdcbiAgICB9O1xuICB9XG5cbiAgZ2V0TG9ncyQoYXBwSWQ6IHN0cmluZywgaW5zdGFuY2VOYW1lOiBzdHJpbmcsIHBhcmFtczogUmVxdWVzdFBhcmFtcyA9IHt9KTogT2JzZXJ2YWJsZTxMb2dzSlNPTj4ge1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMuQkFTRV9QQVRIX0FQUExJQ0FUSU9OfS8ke2FwcElkfS9sb2dzLyR7aW5zdGFuY2VOYW1lfWA7XG4gICAgY29uc3QgZGVmYXVsdENvbmZpZzogSUZldGNoT3B0aW9ucyA9IHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyLFxuICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgIH07XG4gICAgY29uc3QgZm9ybWF0dGVkRGF0ZUZyb20gPSBwYXJhbXMuZGF0ZUZyb20gPyB0aGlzLmZvcm1hdERhdGUocGFyYW1zLmRhdGVGcm9tKSA6IG51bGw7XG4gICAgY29uc3QgZm9ybWF0dGVkRGF0ZVRvID0gcGFyYW1zLmRhdGVUbyA/IHRoaXMuZm9ybWF0RGF0ZShwYXJhbXMuZGF0ZVRvKSA6IG51bGw7XG4gICAgY29uc3QgbW9kaWZpZWRQYXJhbXMgPSB7XG4gICAgICAuLi5wYXJhbXMsXG4gICAgICAuLi4oZm9ybWF0dGVkRGF0ZUZyb20gJiYgeyBkYXRlRnJvbTogZm9ybWF0dGVkRGF0ZUZyb20gfSksXG4gICAgICAuLi4oZm9ybWF0dGVkRGF0ZVRvICYmIHsgZGF0ZVRvOiBmb3JtYXR0ZWREYXRlVG8gfSlcbiAgICB9O1xuXG4gICAgY29uc3QgY29uZmlnID0gcGFyYW1zID8geyAuLi5kZWZhdWx0Q29uZmlnLCBwYXJhbXM6IG1vZGlmaWVkUGFyYW1zIH0gOiB7IC4uLmRlZmF1bHRDb25maWcgfTtcbiAgICByZXR1cm4gZnJvbSh0aGlzLmNsaWVudC5mZXRjaCh1cmwsIGNvbmZpZykpLnBpcGUoZmxhdE1hcChyZXMgPT4gcmVzLmpzb24oKSkpO1xuICB9XG5cbiAgZm9ybWF0RGF0ZShkYXRlVG9Gb3JtYXQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVUb0Zvcm1hdCkudG9JU09TdHJpbmcoKTtcbiAgfVxufVxuIl19