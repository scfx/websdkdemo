"use strict";angular.module("c8y.deviceDetailControl").controller("deviceDetailControlCtrl",["$scope","c8yBase","c8yDevices","c8yDeviceControl","c8yAlert","c8yConfig","gettext","gettextCatalog",function(o,e,t,c,a,r,n,i){function s(e){return t.supportsOperation(o.device,e)}function y(e){l({description:"Change trace status to ".concat(e,"."),c8y_TraceStatus:{state:e}})}function l(e,t){return e.deviceId=o.device.id,c.create(e).then(function(){!function(e,t){a.success(i.getString('"{{description | translate}}" will be executed.',e)),t&&o.$emit("update","devicecontrol")}(e,t)})}o.showControls=r.deviceDetailControl.showControls,o.visible=function(e){if(!o.showControls)return!1;var t=!1;if(o.device){var c=s("c8y_TraceStatus"),a=s("c8y_Restart"),r=s("c8y_Relay"),n=s("c8y_Message"),i=s("c8y_RelayArray");t="trace"===e?c:"restart"===e?a:"relay"===e?r:"message"===e?n:"relayarray"===e?i:c||a||r||n||i}return t},o.supportsOperation=s,o.traceStatusOn=function(){y("ON")},o.traceStatusOff=function(){y("OFF")},o.restart=function(){l({description:n("Restart device"),c8y_Restart:{}})},o.relay=function(e){o.device.c8y_Relay&&o.device.c8y_Relay.relayState&&(o.device.c8y_Relay.relayState=e),l({description:"Change relay status to ".concat(e,"."),c8y_Relay:{relayState:e}})},o.relayarray=function(e,t){var c={};c.description="".concat("CLOSED"===e?"Closing":"Opening"," relay ").concat(t+1,"."),c.c8y_RelayArray=o.device.c8y_RelayArray,c.c8y_RelayArray[t]=e,l(c)},o.message=function(e){l({description:'Send message "'.concat(e,'".'),c8y_Message:{text:e}})}}]);