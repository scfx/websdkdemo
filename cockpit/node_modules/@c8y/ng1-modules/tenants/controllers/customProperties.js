"use strict";!function(){function t(i,t,e,r,s,n,a,o,c){var u=this,h=e.tenantId,l=n.another(n.paths.Tenants,{tenantId:h}),f="c8ySchema!!customProperties",g={notitle:!0};_.assign(u,{schema:{},form:[],cancel:function(){t.path("tenants")},save:function(t){return s.save(_.pick(u.tenant,["id","applications","customProperties"])).then(function(){o.success(c("Custom properties saved.")),t.$setPristine()})}}),i.all({rootProperty:l.list().then(function(t){return _.filter(t,{id:f})}),isGainsightKeyDefined:_.get(window,"C8Y_APP.gainsightKey")?i.resolve(!!window.C8Y_APP.gainsightKey):a.detailValue({category:"configuration",key:"system.gainsight.api.key"}).then(function(t){return!!t})}).then(function(t){var e=t.rootProperty,n=t.isGainsightKeyDefined;return function(t){return i.all({schema:l.getSchema(t),form:l.getForm(t,g),tenant:s.detail(h).then(r.getResData)})}(e).then(function(t){return{results:t,isGainsightKeyDefined:n}})}).then(function(t){var e=t.results,n=t.isGainsightKeyDefined;u.schema=n?e.schema:function(t){var e=_.cloneDeep(t);return _.unset(e,"properties.customProperties.properties.gainsightEnabled"),e}(e.schema),u.form=e.form,u.tenant=e.tenant})}t.$inject=["$q","$location","$routeParams","c8yBase","c8yTenant","c8yPropertiesLibrary","c8ySettings","c8yAlert","gettext"],angular.module("c8y.tenants").controller("tenantCustomPropertiesCtrl",t)}();