"use strict";!function(){function t(t,n,i,e){var s,r=this;function o(){c(!0),i.getApplicationMO(n.applicationId).then(function(t){return u(t)}).then(function(){return s="/managedobjects/".concat(r.mo.id),e.addListener(t.$id,s,e.realtimeActions().UPDATE,function(t,n){return u(n)}),void e.start(t.$id,s)}).finally(function(){return c(!1)})}function a(){e.stop(t.$id,s),e.removeSubscriber(t.$id,s)}function c(t){r.refreshingItems.appDetails=t}function u(t){r.mo=t,r.status=t.c8y_Status}_.assign(r,{status:"",realtime:!0,refreshingItems:{},tenantSubscriptions:{},$onInit:function(){o()},$onDestroy:function(){a()},refresh:function(){a(),o(),t.$broadcast("alarmListRefresh"),t.$broadcast("eventListRefresh")},isRefreshing:function(){return _.includes(r.refreshingItems,!0)},statusVisible:function(){return!_.isEmpty(_.get(r.mo,"c8y_Status"))},subscriptionsVisible:function(){return!_.isEmpty(_.get(r.mo,"c8y_Subscriptions"))}}),t.$watch("vm.realtime",function(t,n){t!==n&&(t?o():a())})}t.$inject=["$scope","$routeParams","c8yApplication","c8yRealtime"],angular.module("c8y.appStatus").component("c8yAppStatus",{bindings:{basePath:"@"},templateUrl:":::PLUGIN_PATH:::/app-status/app-status.html",controller:t,controllerAs:"vm"})}();