<div ng-controller="imageWidgetConfigCtrl">
  <div class="form-group">
    <label
      >{{ 'Image' | translate }}
      <small translate>(file size up to {{ maxFileSizeKB }} KB)</small></label
    >
    <input
      c8y-check-dirty="imageName"
      class="form-control"
      type="text"
      name="imageName"
      ng-model="imageName"
      ng-required="true"
      ng-readonly="true"
    />
    <div
      ng-class="{'has-error': invalid('newImageValidationInput')}"
      uib-tooltip="{{ getValidationHints('newImageValidationInput') }}"
    >
      <input type="hidden" name="newImageValidationInput" ng-model="newImageValidationInput" />
      <input
        class="form-control"
        type="file"
        name="new-image"
        c8y-on-change="onNewImageSelected(event)"
        style="height: unset;"
      />
      <div class="c8y-messages" ng-if="invalid('newImageValidationInput')">
        <div class="form-control-feedback-message">
          {{ getValidationHints('newImageValidationInput') | translate }}
        </div>
      </div>
    </div>
  </div>

  <div class="form-group">
    <label>{{ 'Preview' | translate }}</label>
    <button
      title="{{ 'Loading…' | translate }}"
      ng-show="loading"
      class="btn btn-primary btn-pending btn-xs"
      disabled
    >
      {{ 'Loading…' | translate }}
    </button>
    <div ng-show="!loading">
      <img ng-src="{{ imageSrc }}" style="max-width: 300px;" />
    </div>
  </div>
</div>
