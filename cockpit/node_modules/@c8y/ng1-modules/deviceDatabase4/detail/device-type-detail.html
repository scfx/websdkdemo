<c8y-ui-title-set title="vm.title"></c8y-ui-title-set>
<c8y-device-protocol-breadcrumb></c8y-device-protocol-breadcrumb>
<div class="row">
  <div class="col-lg-12 col-lg-max">
    <form ng-if="vm.deviceType" name="vm.deviceTypeForm" novalidate>
      <div class="card m-b-4">
        <div class="card-block">
          <div class="row">
            <div class="col-md-7">
              <c8y-device-type-basic-info
                device-type-form="vm.deviceTypeForm"
                form-value="vm.formValue"
                device-type="vm.deviceType"
                device-types-features="vm.deviceTypesFeatures"
              >
              </c8y-device-type-basic-info>
            </div>

            <div class="col-md-5">
              <dl class="dl-horizontal m-b-0">
                <dt><label translate>Device protocol type</label></dt>
                <dd>
                  <span
                    class="label label-info m-r-8 text-capitalize"
                    ng-if="!vm.isNew()"
                  >
                    {{ vm.features.label }}
                  </span>
                </dd>
                <dt><label class="small" translate>ID</label></dt>
                <dd style="font-size:1.5em">{{ vm.deviceType.id }}</dd>
                <dt><label class="small" translate>Date created</label></dt>
                <dd>{{ vm.deviceType.creationTime | absoluteDate }}</dd>
                <dt><label class="small" translate>Last update</label></dt>
                <dd>{{ vm.deviceType.lastUpdated | absoluteDate }}</dd>
                <dt><label class="small" translate>Fieldbus version</label></dt>
                <dd>{{ vm.deviceType.fieldbusVersion }}</dd>
              </dl>
            </div>
          </div>
        </div>
      </div>

      <c8y-device-type-message-id-configuration
        ng-if="vm.features.configuration.messageIdConfiguration.length"
        feature-label="vm.features.label"
        feature-configuration="vm.features.configuration"
        device-type-form="vm.deviceTypeForm"
        device-type="vm.deviceType"
        message-id-sources="vm.messageIdSources"
      >
      </c8y-device-type-message-id-configuration>

      <c8y-device-type-discrete-outputs
        ng-if="vm.features.discreteOutputs"
        discrete-outputs-categorized="vm.discreteOutputsCategorized"
        is-empty="vm.isEmpty"
        add-discrete-output="vm.addDiscreteOutput"
        edit-discrete-output="vm.editDiscreteOutput"
        remove-discrete-output="vm.removeDiscreteOutput"
      >
      </c8y-device-type-discrete-outputs>

      <c8y-device-type-discrete-inputs
        ng-if="vm.features.discreteInputs"
        discrete-inputs-categorized="vm.discreteInputsCategorized"
        is-empty="vm.isEmpty"
        add-discrete-input="vm.addDiscreteInput"
        edit-discrete-input="vm.editDiscreteInput"
        remove-discrete-input="vm.removeDiscreteInput"
      >
      </c8y-device-type-discrete-inputs>

      <c8y-device-type-holding-registers
        ng-if="vm.features.holdingRegisters"
        features="vm.features"
        holding-registers-categorized="vm.holdingRegistersCategorized"
        is-empty="vm.isEmpty"
        add-holding-register="vm.addHoldingRegister"
        edit-holding-register="vm.editHoldingRegister"
        remove-holding-register="vm.removeHoldingRegister"
      >
      </c8y-device-type-holding-registers>

      <c8y-device-type-input-registers
        ng-if="vm.features.inputRegisters"
        input-registers-categorized="vm.inputRegistersCategorized"
        is-empty="vm.isEmpty"
        add-input-register="vm.addInputRegister"
        edit-input-register="vm.editInputRegister"
        remove-input-register="vm.removeInputRegister"
      >
      </c8y-device-type-input-registers>

      <c8y-device-type-options
        ng-if="vm.features.options"
        options="vm.features.options"
        device-type="vm.deviceType"
      >
      </c8y-device-type-options>

      <c8y-if-allowed admin-mos="[vm.deviceType.id]">
        <div class="text-center page-footer m-t-16">
          <c8y-ui-button-footer changed="vm.deviceTypeForm.$dirty">
            <button
              title="{{ 'Save' | translate }}"
              class="btn btn-primary"
              ng-click="vm.save(vm.deviceType)"
              ng-disabled="vm.saveDisabled()"
              translate
            >
              Save
            </button>
          </c8y-ui-button-footer>
        </div>
      </c8y-if-allowed>
    </form>
  </div>
</div>
