"use strict";!function(){function e(t,e,r,a){return{doesSupportFile:function(e){return/\.json$/.test(e.name)},parseFile:function(n){return t(function(t,e){var r=new FileReader;r.onload=function(e){var r=e.target;return t(r.result)},r.onerror=function(){return e({feedback:{type:"error",summary:a("Could not read file.")}})},r.readAsText(n)}).then(c)},parseString:c,parseObject:n};function c(e){var r;try{r=t.resolve(JSON.parse(e))}catch(e){r=t.reject({feedback:{type:"error",summary:a("Could not parse JSON content.")}})}return r.then(n)}function n(e){var r=_.cloneDeep(e),t="c8y_ModbusDeviceTypeInfo",n=_.get(r,t,{});return r.name=r.name||n.name,r.fieldbusType=r.fieldbusType||n.fieldbusType,_.unset(r,t),{deviceType:r,feedback:{type:"success",summary:a("JSON parsed successfully.")}}}}e.$inject=["$q","$rootScope","c8yDeviceDatabase","gettext"],angular.module("c8y.deviceDatabase4").factory("c8yDeviceTypeParserJSON",e)}();