"use strict";!function(){function e(t,e,r,s,c,n){return{doesSupportFile:function(e){return/\.zip$/.test(e.name)},parseFile:function(e){var r=c.url("service/mibparser/mib/uploadzip"),a=t.defer();return n.upload({url:r,method:"POST",headers:{Accept:"application/json"},file:e,fileName:e.name.replace(/\s+/g,"_")}).error(function(e){var r={type:"error",summary:c.getResErrorMessage({data:e})};a.reject({feedback:r})}).then(c.getResData).then(u).then(a.resolve),a.promise}};function u(e){var r=_.cloneDeep(e),a="c8y_ModbusDeviceTypeInfo",t=_.get(r,a,{});return r.name=r.name||t.name,r.fieldbusType=r.fieldbusType||t.fieldbusType,_.unset(r,a),{deviceType:r,feedback:{type:"success",summary:s("MIB ZIP parsed successfully.")}}}}e.$inject=["$q","$rootScope","c8yDeviceDatabase","gettext","c8yBase","$upload"],angular.module("c8y.deviceDatabase4").factory("c8yDeviceTypeParserMIB",e)}();