"use strict";!function(){function e(t,n,o,r,i,e,a,c,s,u){var l=this;function f(){e.current(!0).then(function(e){t.hasEmail=!!e.email,l.hasEmail=t.hasEmail,e.email||a.info(s("Provide your email address in the user settings to use the export functionality."))}),t.canScheduleExport=n.has("smartRulesSvc"),o.list().then(g)}function g(e){t.rows=_(e).sortBy("name").map(function(e){return{config:e,selected:!1}}).value(),t.paging=e.paging}function p(){return _(t.rows).filter("selected").map("config").flatten().value()}_.assign(l,{getSelectedConfigs:p}),_.assign(t,{rows:[],add:function(){i.path("/export/new")},detail:function(e){i.path("/export/".concat(e.id))},clone:function(e){i.path("/export/".concat(e.id,"/clone"))},remove:function(e){c({title:s("Delete configuration"),body:u.getString('You are about to delete configuration "{{name}}". Do you want to proceed?',e),status:"danger",size:"sm",labels:{ok:s("Delete")}}).then(function(){return o.remove(e)}).then(f)},runExport:function(){var e=t.getSelectedConfigs();return r.requestExport(_.map(e,"id")).then(function(){a.success(s("Export request accepted, you will receive an email."))})},getSelectedConfigs:p,refresh:function(){t.paging.refresh().then(g)},scheduleExport:function(e){var t=n.get("smartRulesSvc");return o.getSmartRuleDefaults(e).then(function(e){return t.createInstanceWithUIByName("sendExportViaEmail",e)})}}),f()}e.$inject=["$scope","$injector","exportConfig","exportService","$location","c8yUser","c8yAlert","c8yModal","gettext","gettextCatalog"],angular.module("c8y.cockpit.export").controller("exportListCtrl",e)}();