"use strict";!function(){function t(t,n,e,r){var o=this,i={PENDING:"badge-info",EXECUTING:"badge-info",SUCCESSFUL:"badge-success",FAILED:"badge-danger"};_.assign(o,{getOperationsCount:function(){return o.operations?o.operations.length:0},getOperationsTooltip:function(){var t=_.countBy(o.operations,"status");return _.reduce(t,function(t,n,e){var o=t,i=function(t,n){var e={PENDING:r.getPlural(t,"1 operation pending","{{$count}} operations pending",{}),EXECUTING:r.getPlural(t,"1 operation executing","{{$count}} operations executing",{}),FAILED:r.getPlural(t,"1 operation failed","{{$count}} operations failed",{}),SUCCESSFUL:r.getPlural(t,"1 operation successful","{{$count}} operations successful",{})};return t?e[n]:""}(n,e);return o&&i&&(o+="<br>"),o+i},"")||r.getString("No recent operations found")},getOperationsBadgeClass:function(){var t=_.countBy(o.operations,"status"),n=_.keys(t);if(0===n.length)return"badge-light";if(1===n.length)return i[n[0]];if(_.includes(n,"EXECUTING"))return i.EXECUTING;if(_.includes(n,"PENDING"))return i.PENDING;return"badge-warning"},openOperationsModal:function(){return n.open({size:"md",component:"c8yUiOperationsTimelineModal",resolve:{title:function(){return{icon:"list",text:o.modalTitle}},timelineHeader:function(){return e("Recent operations")},operations:function(){return o.operations},extraButtons:function(){return[{label:e("View history"),action:function(){return t.path("/device/".concat(o.context.id,"/control"))},cls:"btn-primary"}]}}}).result}})}t.$inject=["$location","$uibModal","gettext","gettextCatalog"],angular.module("c8y.genericUi").component("c8yGenericUiOperationListButton",{templateUrl:":::PLUGIN_PATH:::/generic-ui-operation-list-button.html",controllerAs:"vm",controller:t,bindings:{operations:"<",modalTitle:"@",context:"<"}})}();