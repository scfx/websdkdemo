"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(){function e(e,t,s){var y=this;_.assign(y,{$doCheck:function(){var e=_.get(y.context,y.property.path);y.model!==e&&(y.model=function(n){return _.forEach(n,function(e,t){try{var r=JSON.parse(e);0<_.keys(r).length&&(n[t]=_.reduce(r,function(e,t,r){return e[parseInt(r,10)]=t,e},[]))}catch(e){}})}(e))},$onChanges:function(){(function(){var e=y.property.key;y.schema={type:"object",properties:_defineProperty({},e,y.property)},y.form=[{key:[e],description:!1,notitle:!0,properties:_defineProperty({},e,y.property),labelHtmlClass:"no-label"}]})(),function(){var e=y.property.items;e&&_.get(e,"title")&&delete e.title;y.inputValueSchema={type:"object",properties:{inputValue:y.property},required:["inputValue"]},y.inputValueForm=[{key:["inputValue"],notitle:!0,description:!1,readonly:!1,uiSortable:{disabled:!0}}],y.placeholders={inputValue:_.cloneDeep(_.get(y.context,"".concat(y.property.path,".").concat(y.property.key)))}}()},execute:function(e,t){var r=(void 0!==t?t:"").inputValue,n=y.property,o=n.type,i=n.items,p=_.get(i,"type"),a=!1;if(o&&"array"===o&&p&&"string"===p){var u=JSON.stringify(r),c=JSON.stringify(u);t.inputValue=c.match(/^"(.*)"$/)[1],a=!0}var l=JSON.parse(s.replaceOperationTemplatePlaceholders(e.template,y.context,y.property,t));a&&(t.inputValue=r);y.createOperation({operation:l,name:e.name})},operationPopoverTemplate:":::PLUGIN_PATH:::/generic-ui-inventory-property-operation-popover.html",needsUserInput:function(e){return _.includes(e.template,"${inputValue}")},noOperationsSupported:function(){return 0<_.get(y.property,"operations.length",0)},needsForm:function(){return"operations"!==y.property.type&&!(0<_.intersection(["execute","execute with parameters"],_.map(y.property.operations,function(e){return e.name.toLowerCase()})).length)},isInProgress:function(t){return _.some(y.operations,function(e){return function(e,t){return e===_.get(t,"c8y_JsonSchemaContext.operation")}(t.name,e)&&function(e){return _.includes(["PENDING","EXECUTING"],e.status)}(e)})},options:{supressPropertyTitles:!0}})}e.$inject=["$location","$uibModal","c8yGenericUi"],angular.module("c8y.genericUi").component("c8yGenericUiInventoryProperty",{bindings:{property:"<",context:"<",operations:"<",createOperation:"&"},templateUrl:":::PLUGIN_PATH:::/generic-ui-inventory-property.html",controller:e,controllerAs:"vm"})}();