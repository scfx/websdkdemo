"use strict";!function(){function e(e,s,c,i){var u=this,n=e.$id,m="c8y_GenericUI_Schema_",a=[];function t(e){var t=u.context,c=_.get(e.schema,"c8y_JsonSchema"),n=RegExp("".concat(m,"(\\d+)")),i=_.find(_.keys(e.schema),function(e){return n.test(e)}),a=_.trimStart(i,m),o="".concat(c.title," /").concat(a,"/${object.instance}"),r=s.replaceObjectPlaceholders(o,t,e.key);return _.assign({managedObject:t,title:r},e)}function o(){u.matches=s.matchObjectWithSchemas(u.context,u.schemas),u.objects=_.sortBy(u.matches.map(t),"title")}function r(){_.uniq(a).forEach(function(e){return c.destroySubscription(n,e)}),a=[]}_.assign(u,{$onChanges:function(e){(_.get(e,"context.currentValue.id")!==_.get(e,"context.previousValue.id")||e.schemas)&&(o(),function(){if(r(),!_.get(u,"context.id"))return;var e=c.realtimeActions().UPDATE,t="/managedobjects/".concat(u.context.id);c.addListener(n,t,e,function(e,t){return function(e){var t=s.matchObjectWithSchemas(e,u.schemas),c=_.map(u.matches,"key"),n=_.map(t,"key");(_.difference(n,c).length||_.difference(c,n).length)&&(u.context=i.updateManagedObject(u.context,e),o())}(t)}),c.start(n,t),a.push(t)}())},$onDestroy:function(){r()},select:function(e){u.selected=e},isSelected:function(e){return e===u.selected}})}e.$inject=["$scope","c8yGenericUi","c8yRealtime","c8yInventory"],angular.module("c8y.genericUi").component("c8yGenericUi",{templateUrl:":::PLUGIN_PATH:::/generic-ui.html",controllerAs:"vm",controller:e,bindings:{schemas:"<",context:"<"}})}();