"use strict";!function(){function e(n,r){var c="c8y_objectmapping_ObjectMapping",o="".concat(c,".objectId"),u="".concat(c,".objectModel"),s="".concat(u,".resources"),a="".concat(c,".resourceMappings"),i="".concat(c,".objectInstanceActions");return{createManagedObject:function(e){var t=_.assign({resources:{}},e),n={};return _.set(n,c,{}),_.set(n,o,t.id),_.set(n,u,t),_.set(n,a,{}),_.set(n,i,{}),n},getName:function(e){var t="".concat(u,".name");return _.get(e,t)},getObjectId:function(e){return _.get(e,o)},countResources:function(e){var t=_.get(e,s);return _.size(t)},updateResource:g,removeResource:function(e,t){return g(null,e,t)},updateMappingToResource:function(e,t,n){var r=e;if(r){var c=_.get(n,a)||{},o=r.resourceID=t.id;c[o]=r,1===_.keys(r).length&&delete c[o],0===_.keys(c).length&&(c=null),_.set(n,a,c)}return n},saveToInventory:function(e){var t=_.pick(e,["id",c]);return r.save(t).then(n.getResData)},getMainProperties:function(e){return _.get(e,u)},updateMainProperties:function(e,t){var n=_.merge(_.get(t,u),e);return _.set(t,o,n.id),t},getMappings:function(e){return _.get(e,a)},getMainObject:function(e){return _.get(e,u)},getResources:function(e){return _.get(e,s)},isSameResource:function(e,t){var n=_.get(e,"id"),r=_.get(t,"id");return n===r},fragments:{BASE_FRAGMENT:c}};function g(e,t,n){var r=_.get(n,s)||{},c=_.get(n,a)||{},o=_.get(e,"id"),u=_.get(t,"id"),i=c[u];return o===u||_.isUndefined(u)||(delete r[u],delete c[u],i&&(i.resourceID=o)&&(c[o]=i)),o&&(r[o]=e),_.set(n,s,r),_.set(n,a,c),n}}e.$inject=["c8yBase","c8yInventory"],angular.module("c8y.deviceProtocols").factory("c8yObjectMappings",e)}();