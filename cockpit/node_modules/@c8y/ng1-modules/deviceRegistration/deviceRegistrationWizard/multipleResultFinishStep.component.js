"use strict";!function(){function t(e,i){var r=this,n=[];function a(){return _.get(r,"wizardCtrl.data.multipleResults")}function u(){var t=a();if(t){var e=_.filter(t,{status:"SUCCESS"}).length,i=t.length;return{total:i,successful:e,failed:i-e}}}function s(t){return n.indexOf(t)}function l(t){return-1<s(t)}_.assign(r,{getMultipleResults:a,getSummary:u,getSummaryMessage:function(){var t,e=u();e&&(t=1===e.total?e.failed?i.getString("Failed to register device."):i.getString("Device registered."):e.failed?i.getPlural(e.failed,"Registration failed for 1 device out of {{total}}.","Registration failed for {{$count}} devices out of {{total}}.",e):i.getPlural(e.total,"Registration succeeded for 1 device.","Registration succeeded for all {{$count}} devices.",e));return t},withFailures:function(){return!!_.get(u(),"failed")},withSuccess:function(){return!!_.get(u(),"successful")},getIcon:function(t){var e;switch(t){case"FAILED":e="ban";break;default:e="check-circle"}return e},fixErrors:function(){var t=a(),e=_.filter(t,{status:"FAILED"}).map(function(t){return t.device});_.assign(r.wizardCtrl.data,{retry:{devices:e}}),r.wizardCtrl.goTo("general-registration")},toggle:function(t){"FAILED"===t.status&&(l(t)?n.splice(s(t),1):n.push(t),e.doResize())},isOpen:l,getCursor:function(t){return"SUCCESS"!==t.status?{}:{cursor:"default"}}})}t.$inject=["deviceRegistrationWizardUtils","gettextCatalog"],angular.module("c8y.deviceRegistration").component("multipleResultFinishStep",{controllerAs:"vm",require:{wizardCtrl:"^c8yWizardStep"},templateUrl:":::PLUGIN_PATH:::/deviceRegistrationWizard/multipleResultFinishStep.html",controller:t})}();