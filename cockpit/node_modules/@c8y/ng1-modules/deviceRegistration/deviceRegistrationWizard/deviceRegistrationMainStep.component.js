"use strict";!function(){function i(t,i,r,n,e,o){var a=this;_.assign(a,{$onInit:function(){i.listAvailable().then(function(i){var e=_.map(i,function(i){return i.registrationCfg=i.registrationCfg||{},n.configureVisibility(i.registrationCfg,"allowed")});t.all(e).then(function(){_.assign(a,{providers:_.filter(i,"registrationCfg.allowed")}),1===a.providers.length&&(a.isSingleProvider=!0,a.provider=a.providers[0]),_.assign(a.wizardCtrl.data,{providers:a.providers}),_.each(i,function(i){var e=_.get(i,a.isSingleProvider?"flow.single":"flow.multiple");r.registerFlow(i.name,e)})})}),e.list().then(function(i){_.assign(a.wizardCtrl.data,{groups:i})}).then(o.doResize)},goTo:function(i){a.wizardCtrl.goTo(i),a.wizardCtrl.setFlowFromStepIds(r.getRegisteredFlow(i))}})}i.$inject=["$q","c8yDeviceProviders","deviceRegistrationFlows","c8yUiUtil","c8yDeviceGroup","deviceRegistrationWizardUtils"],angular.module("c8y.deviceRegistration").component("deviceRegistrationMainStep",{controllerAs:"vm",require:{wizardCtrl:"^c8yWizardStep"},templateUrl:":::PLUGIN_PATH:::/deviceRegistrationWizard/deviceRegistrationMainStep.html",controller:i})}();