<ng-form name="vm.ssoAccessMappingForm" class="col-md-12 p-t-16">
  <div class="row m-l-8 m-r-8">
    <div class="col-xs-12 col-sm-3 col-md-2">
      <h4 class="text-normal text-right text-left-xs" translate>Access mapping</h4>
    </div>

    <div class="col-xs-12 col-sm-9 col-md-10 col-lg-9">
      <div class="dynamic-access">
        <div class="legend form-block m-t-4" translate>Dynamic access mapping</div>
        <div class="form-group">
          <div
            ng-show="vm.ssoConfiguration.onNewUser.dynamicMapping.mappings.length === 0"
            class="card"
          >
            <div class="card-block">
              <div class="c8y-empty-state text-left p-0">
                <h1 c8y-icon="list"></h1>
                <p>
                  <strong translate>No access mapping rules defined.</strong><br />
                  <span translate>Add a new mapping by clicking below.</span>
                </p>
              </div>
            </div>
          </div>
          <div ng-repeat="accessMapping in vm.ssoConfiguration.onNewUser.dynamicMapping.mappings">
            <c8y-sso-dynamic-access-mapping
              access-mapping="accessMapping"
              on-remove="vm.onRemove(accessMapping)"
              apps="vm.apps"
              groups="vm.groups"
            >
            </c8y-sso-dynamic-access-mapping>
          </div>
          <div class="scroll-column-footer">
            <button
              title="{{ 'Add access mapping' | translate }}"
              class="btn-add-block"
              ng-click="vm.addAccessMapping()"
              type="button"
            >
              <i c8y-icon="plus-circle"></i>
              {{ 'Add access mapping' | translate }}
            </button>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label class="c8y-switch">
          <input
            type="checkbox"
            ng-model="vm.ssoConfiguration.onNewUser.dynamicMapping.configuration.mapRolesOnlyForNewUser"
          />
          <span></span>
          <span>{{ 'Use dynamic access mapping only on user creation' | translate }}</span>
          <a
            href=""
            popover-trigger="'focus'"
            popover-append-to-body="true"
            popover-placement="right"
            uib-popover-html="vm.dynamicAccessMappingTooltip | translate"
          >
            <i c8y-icon="question-circle-o" class="text-info"></i>
          </a>
        </label>
      </div>
    </div>
  </div>
</ng-form>
