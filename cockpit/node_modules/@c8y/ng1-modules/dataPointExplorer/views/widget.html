<div
  ng-controller="DataPointWidgetCtrl"
  class="dashboard-old-minheight fit-h"
  ng-init="disableLocalStorage = true"
>
  <c8y-realtime-button
    ng-show="false"
    channel="{{ channel }}"
    state="child.config.realtime"
    on-data="onData($data)"
  >
  </c8y-realtime-button>
  <c8y-realtime-button
    ng-show="false"
    channel="{{ alarmsChannel }}"
    state="child.config.realtime"
    on-data="onAlarm($data)"
    on-data-update="onAlarm($data)"
  >
  </c8y-realtime-button>
  <c8y-realtime-button
    ng-show="false"
    channel="{{ eventsChannel }}"
    state="child.config.realtime"
    on-data="onEvent($data)"
  >
  </c8y-realtime-button>
  <c8y-aggregation
    ng-show="false"
    date-from="child.config.dateFrom"
    date-to="child.config.dateTo"
    aggregation="child.config.aggregation"
    realtime="child.config.realtime"
  >
  </c8y-aggregation>
  <div class="p-relative" ng-style="{height: dataPointsGraphHeight}">
    <c8y-chart
      datapoints="child.config.datapoints"
      datapoints-initial-display-limit="child.config.datapointsInitialDisplayLimit"
      date-from="child.config.dateFrom"
      date-to="child.config.dateTo"
      realtime="child.config.realtime"
      aggregation="child.config.aggregation"
      show-time="child.config.displayDateSelection"
      on-data="onData"
      on-update-dates="onUpdateDates($dateFrom, $dateTo)"
      on-update-displayed-dates="onUpdateDisplayedDates($dateFrom, $dateTo)"
      on-box-changed="onBoxChanged(box)"
      selectable="child.config.selectable"
      selected="child.config.selected"
    >
    </c8y-chart>
  </div>
  <c8y-alarms-events-timelines-chart
    ng-if="child.config.alarmsEventsConfigs.length"
    alarms-events-configs="child.config.alarmsEventsConfigs"
    date-from="alarmsEventsTimeline.displayedDateFrom"
    date-to="alarmsEventsTimeline.displayedDateTo"
    on-update-dates="onUpdateDates($dateFrom, $dateTo)"
    realtime="child.config.realtime"
    on-realtime-alarm-fn="onRealtimeAlarmFn(onRealtimeAlarm)"
    on-realtime-event-fn="onRealtimeEventFn(onRealtimeEvent)"
    chart-box="chartBox"
    on-size-changed="onTimelinesChartSizeChanged($size)"
  >
  </c8y-alarms-events-timelines-chart>
</div>
