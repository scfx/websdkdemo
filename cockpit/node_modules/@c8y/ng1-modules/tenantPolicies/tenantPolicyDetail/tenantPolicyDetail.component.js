"use strict";!function(){function i(e,n,t){var o=this,c=t.defaultObject(),i=t.isDuplicate();function l(i){o.editingPolicy=_.cloneDeep(angular.copy(i))}_.assign(o,{$onChanges:function(i){i.id&&o.id&&(/\d+/.test(o.id)&&function(i){n.detail(i).then(e.getResData).then(l)}(o.id),"new"===o.id&&l(c));i.policy&&o.policy&&l(o.policy)},$onDestroy:function(){t.removeDuplicate()},$postLink:function(){i&&o.policyForm.$setDirty()},addRetentionRule:function(){o.editingPolicy.retentions.push({dataType:"*",fragmentType:"*",maximumAge:10,source:"*",type:"*",editable:void 0,isNew:!0})},addTenantOption:function(){o.editingPolicy.options.push({category:"",key:"",value:"",editable:void 0,isNew:!0})},ICON:t.ICON,onRemoveRetentionRule:function(i){_.pull(o.editingPolicy.retentions,i)},onRemoveTenantOption:function(i){_.pull(o.editingPolicy.options,i)},onSaveTitle:function(i){t.saveName(o.editingPolicy,i)},save:function(){n.save(o.editingPolicy).then(t.toList)},cancel:t.toList,remove:function(){t.removeConfirm(o.editingPolicy).then(t.toList)}})}i.$inject=["c8yBase","c8yTenantPolicies","c8yTenantPoliciesConfig"],angular.module("c8y.tenantPolicies").component("c8yTenantPolicyDetail",{templateUrl:":::PLUGIN_PATH:::/tenantPolicyDetail/tenantPolicyDetail.html",controller:i,controllerAs:"vm",bindings:{id:"<",policy:"<"}})}();