"use strict";!function(){function t(t){var n=t.resourceUrlWhitelist();n.push(/^http(s?):\/\/open\.mapquestapi\.com\/nominatim\/v1\/search\.php.*$/),t.resourceUrlWhitelist(n)}function n(o,t){var e="c8y_Position",r="com_nsn_startups_vendme_fragments_GPSCoordinates",a="//open.mapquestapi.com/nominatim/v1/search.php?key=".concat(t.get("MAPQUESTAPI"));function s(){return this.points=[],this}return s.prototype.add=function(t){var n=this;return _.isArray(t)?_.forEach(t,function(t){n.points.push(t)}):t instanceof s?n.add(t.points):this.points.push(t),n},s.prototype.reset=function(){this.points.length=0},s.prototype.get=function(){var n={southWest:{},northEast:{}};return this.points.length||(n=null),this.points.forEach(function(t){t.lat<(n.southWest.lat||1/0)&&(n.southWest.lat=t.lat),t.lng<(n.southWest.lng||1/0)&&(n.southWest.lng=t.lng),t.lat>(n.northEast.lat||-1/0)&&(n.northEast.lat=t.lat),t.lng>(n.northEast.lng||-1/0)&&(n.northEast.lng=t.lng)}),n},{geoCode:function(t){var n={jsonpCallbackParam:"json_callback",params:{format:"json",q:t}};return o.jsonp(a,n)},Bounds:s,getLocationFragment:function(t){var n=t[e]||t[r];if(n){var o=Number(n.lat),a=Number(n.lng);if(!_.isNaN(o)&&!_.isNaN(a)&&Math.abs(n.lng)<=180&&Math.abs(n.lat)<=90)return{lat:o,lng:a};var s=t.name||t.source&&t.source.name;console.warn("Device ".concat(s," has an invalid location."))}},c8y_Position:e,v4e_Position:r}}n.$inject=["$http","c8yKeys"],t.$inject=["$sceDelegateProvider"],angular.module("c8y.core").config(t).factory("c8yGeo",n)}();