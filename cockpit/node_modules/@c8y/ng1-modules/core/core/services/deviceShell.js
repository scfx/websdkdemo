"use strict";!function(){function e(e,i,t,n,c,r){var u="c8y_DeviceShellTemplate";function o(e,t,n){return _.map(e||[],function(e){return _.assign(e,{syntax:t,deviceType:n})})}return{getCommandTemplatesForDeviceType:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(e){var n=[];return _.forEach(e,function(e){var t=function(e){return _.get(window.c8y,"collections.devicecommands",{})[e]}(e);t&&n.push(function(t,e){var n;return n=_.isArray(e)?_(e).map(function(e){return o(e.templates,e.syntax,t)}).flatten().value():o(e.templates,e.syntax,t),i.when(n)}(e,t))}),i.all(n).then(_.flatten)}(t),a=function(e){var t={__filter:{type:u,deviceType:{__in:e}},__orderby:[{creationTime:-1}]};return c.listQuery(t,{pageSize:1e3},!0)}(t);return i.all([r,a]).then(_.flatten)},canSendCommandsViaSMS:function(){return n.getSystemOptionValue({category:"messaging",key:"provider"},!1).then(function(e){return!!e})},saveTemplate:function(e){var t=_.assign({type:u,c8y_Global:{}},e);return c.save(t)},getDeliveryTypes:function(){return{defaultDeliveryType:r("Default"),standardDeliveryTypes:[r("Default"),r("SMS")]}},removeTemplate:c.remove}}e.$inject=["$http","$q","c8yBase","c8ySettings","c8yInventory","gettext"],angular.module("c8y.core").factory("c8yDeviceShell",e)}();