"use strict";!function(){function e(e,r,i,n,t){var o="tenant/loginOptions",a={headers:Object.assign({"content-type":"application/json",UseXBasic:!0})};return{loginOptions:i.createEnum([{name:"BASIC",value:"basic"},{name:"OAUTH2",value:"oauth2"},{name:"OAUTH2_INTERNAL",value:"oauth2_internal"}]),templateTypes:i.createEnum([{name:"CUSTOM",value:"CUSTOM",label:t("Custom"),componentName:"c8ySsoCustomTemplate"},{name:"AZURE",value:"AZURE",label:t("Azure AD"),componentName:"c8ySsoAadTemplate"}]),certificateTypes:i.createEnum([{name:"CUSTOM",value:"CUSTOM",label:t("Custom"),signatureVerificationConfigFragment:"manual"},{name:"AZURE",value:"AZURE",label:t("Azure AD"),signatureVerificationConfigFragment:"aad"},{name:"ADFS",value:"ADFS",label:t("ADFS manifest"),signatureVerificationConfigFragment:"adfsManifest"},{name:"JWKS",value:"JWKS",label:t("JWKS"),signatureVerificationConfigFragment:"jwks"}]),algorithmTypes:i.createEnum([{name:"PCKS",value:"PCKS",label:t("X.509 certificate (PEM format)")},{name:"RSA",value:"RSA",label:t("RSA public key (X.509 Subject Public Key Info)")}]),defaultConfiguration:{authorizationRequest:{body:"",headers:{},method:"GET",operation:"REDIRECT",requestParams:{response_type:"token",client_id:"${clientId}",redirect_uri:"${redirectUri}",scope:""}},tokenRequest:{body:"grant_type=authorization_code&code=${code}&redirect_uri=${redirectUri}&client_id=${clientId}",headers:{},method:"POST",operation:"EXECUTE",requestParams:{response_type:"code",client_id:"${clientId}",redirect_uri:"${redirectUri}",scope:""}},refreshRequest:{body:"grant_type=refresh_token&refresh_token=${refreshToken}&client_id=${clientId}",headers:{Authorization:""},method:"POST",operation:"EXECUTE",requestParams:{response_type:"refresh ",client_id:"${clientId}"}},logoutRequest:{headers:{},method:"POST",operation:"REDIRECT",requestParams:{}},type:"oauth2",grantType:"AUTHORIZATION_CODE",onNewUser:{dynamicMapping:{mappings:[]}},userIdConfig:{useConstantValue:!0},signatureVerificationConfig:{manual:{certIdFromField:!1}}},operationTypes:i.createEnum([{name:"EXECUTE",value:"EXECUTE",label:t("Log out immediately")},{name:"REDIRECT",value:"REDIRECT",label:t("Redirect toâ€¦")}]),list:c,detail:function(e,t){var n=e.id||e,a=i.url("".concat(o,"/").concat(n));return r.get(a,t).then(i.getResData)},save:function(e){return e.id?function(e){var t=i.url("".concat(o,"/").concat(e.id)),n=e;return u(_.cloneDeep(a)).then(function(e){return r.put(t,n,e)})}(e):function(e){var t=i.url(o),n=e;return u(_.cloneDeep(a)).then(function(e){return r.post(t,n,e)})}(e)},remove:function(e){var t=i.url("".concat(o,"/").concat(e.id)),n=_.cloneDeep(a);return r.delete(t,n)},isSsoEnabled:function(){return c({}).then(function(e){return e.data.loginOptions.some(function(e){return"OAUTH2"===e.type&&"REMOTE"===e.userManagementSource})})},getStrongPasswordSettings:function(){return c({}).then(function(e){return e.data}).then(function(e){var t=e.loginOptions,n=t.find(function(e){var t=e.type;return"BASIC"===t});return _.pick(n,["enforceStrength","greenMinLength","strengthValidity"])})}};function u(t){return e.resolve(n.getCurrentUser()).then(function(e){return e&&e.tenant&&!_.has(t,"params.tenantId")&&_.set(t,"params.tenantId",e.tenant),t})}function c(e){var t=i.url(o);return u(e).then(function(e){return r.get(t,Object.assign(e,a))})}}e.$inject=["$q","$http","c8yBase","c8yUser","gettext"],angular.module("c8y.core").factory("c8yLoginOptions",e)}();