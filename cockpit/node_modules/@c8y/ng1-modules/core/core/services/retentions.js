"use strict";!function(){function e(c,u,i,e){var o="retention/retentions",n={headers:i.contentHeaders("retentionRule","retentionRule")},r={ALARM:["fragmentType"],EVENT:[],MEASUREMENT:[],OPERATION:["type"],BULK_OPERATION:["fragmentType","type","source"],AUDIT:["fragmentType"],"*":["fragmentType","type"]};return{list:function e(t){var n=i.url(o);var r=i.pageSizeFilter(t);var a={params:r,silentError:!0};var l=i.cleanListCallback("retentionRules",e,r);return c.get(n,a).then(l,u.reject)},detail:function(e){var t=l(e);return t?c.get(t):u.reject("Retention rule object is not valid")},create:t,update:a,save:function(e){return e.id?a(e):t(e)},remove:function(e){var t=l(e);return t?c.delete(t):u.reject("Retention rule object is not valid")},dataTypes:["ALARM","EVENT","MEASUREMENT","OPERATION","AUDIT","*"],DATA_TYPES:i.createEnum([{name:"ALARM",value:"ALARM",label:e("Alarm"),icon:"bell"},{name:"EVENT",value:"EVENT",label:e("Event"),icon:"c8y-events"},{name:"MEASUREMENT",value:"MEASUREMENT",label:e("Measurement"),icon:"combo-chart"},{name:"OPERATION",value:"OPERATION",label:e("Operation"),icon:"c8y-energy"},{name:"BULK_OPERATION",value:"BULK_OPERATION",label:e("Bulk operation"),icon:"c8y-energy"},{name:"AUDIT",value:"AUDIT",label:e("Audit"),icon:"calendar-check-o"},{name:"*",value:"*",label:e("All"),icon:"asterisk"}]),isFieldSupportedByRule:function(e,t){return!_.includes(r[e.dataType||"*"]||[],t)}};function t(e){var t=i.url(o);return c.post(t,e,n)}function a(e){var t=l(e);return c.put(t,e,n)}function l(e){var t=e&&e.id||e;return t?i.url("".concat(o,"/").concat(t)):""}}e.$inject=["$http","$q","c8yBase","gettext"],angular.module("c8y.core").factory("c8yRetentions",e)}();