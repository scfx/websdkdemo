"use strict";!function(){function e(e,t,n){var l=this;_.assign(l,{onToggleDropdown:function(){delete l.textFilter,i=_.map(l.itemsSelected,_.clone)},allSelected:o,toggleSelectAll:function(){i=o()?[]:_.clone(c())},apply:function(){l.applying=!0,e.when(l.onApply({items:_.map(c(i))})).then(function(){l.isDropDownOpen=!1}).finally(function(){l.applying=!1})},toggle:function(e){r(e)?_.remove(i,{id:e.id}):i.push(e)},isSelected:r,$onChanges:function(e){e.itemsSelected&&(l.displayLabel=_(l.itemsSelected).sortBy(a).map(a).value().join(", "))},translateName:a,placeholder:function(){return _.isUndefined(l.textPlaceholder)?"----":l.textPlaceholder}});var i=[];function o(){return _.every(c(),r)}function r(e){return _.some(i,{id:e.id})}function c(e){return t("filter")(e||l.items,l.textFilter)}function a(e){return n.getString(e.name)}}e.$inject=["$q","$filter","gettextCatalog"],angular.module("c8y.ui").component("c8yItemSelector",{templateUrl:":::PLUGIN_PATH:::/ui/itemSelector/itemSelector.html",bindings:{textPlaceholder:"@",textApply:"@",styleButton:"<",items:"<",itemsSelected:"<",onApply:"&",dropdownMenuClasses:"<",disabled:"=ngDisabled"},controller:e,controllerAs:"vm"})}();