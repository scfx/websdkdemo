"use strict";!function(){function n(t,i){function o(n,t,e,o,r){var s=o.length;function a(){n.doneAbs=s-o.length,n.done=n.doneAbs/s*100}function l(){t.close("fail")}n.total=s,n.title=r||e("Batch operations"),function n(){var e=o.shift();return e?i.when(e()).then(a).then(n,l):(t.close("complete"),!0)}(),a()}return o.$inject=["$scope","$uibModalInstance","gettext","operations","title"],{run:function(n,e){return 0===n.length?{result:i.when("complete")}:t.open({template:'\n          <div class="body" style="padding:20px">\n            <h4 style="text-center">{{title | translate}} <small>{{doneAbs}} / {{total}}</small></h4>\n            <div class="progress progress-striped active" style="margin:0">\n              <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="{{done}}" aria-valuemin="0" aria-valuemax="100" ng-style="{width: done + \'%\'}">\n                <span class="sr-only">{{done}}%</span>\n              </div>\n            </div>\n          </div>\n        ',controller:o,resolve:{operations:function(){return n},title:function(){return e}}})}}}n.$inject=["$uibModal","$q"],angular.module("c8y.ui").factory("c8yBatchOp",n)}();