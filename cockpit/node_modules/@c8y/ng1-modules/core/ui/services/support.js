"use strict";!function(){function e(e,i,t,m,a){function u(e,t,n,o){e.send=function(){n.send(e.formdata.name,e.formdata.email,e.formdata.subject,e.formdata.msg).then(function(){t.close(),o.success(a("Support request sent"))})},e.dismiss=t.dismiss}return{send:function(c,r,s,i){var u=e.defer();return m.current().then(function(e){var t="".concat(e.tenant,": ").concat(c||"".concat(e.firstName," ").concat(e.lastName)||e.name),n=r||e.email,o=$.param({name:t||void 0,email:n||void 0,description:function(e){return"".concat(navigator.userAgent," \n").concat(window.location.href,"\n ---------------\n").concat(e)}(i),subject:s}),a=$('<iframe id="#zendeskiframe">');a.attr("src","https://cumulocity.zendesk.com/requests/embedded/create/?"+o).on("load",function(){a.remove(),u.resolve()}),a.appendTo("body")}),u.promise},open:function(n,o,a,c){var r=t.$new(!0),s={size:"lg",scope:r,templateUrl:":::PLUGIN_PATH:::/ui/views/support.html",controller:["$scope","$uibModalInstance","c8ySupport","c8yAlert",u]};return m.current().then(function(e){r.formdata={};var t=r.formdata;return t.name=n||"".concat(e.firstName," ").concat(e.lastName),t.email=o||e.email,t.subject=a,t.msg=c,i.open(s).result})}}}e.$inject=["$q","$uibModal","$rootScope","c8yUser","gettext"],angular.module("c8y.ui").factory("c8ySupport",e)}();