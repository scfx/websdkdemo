"use strict";!function(){function e(r,o,i,e,n,a,t,c,s,u,p){var g=this,l="c8y_IsDeviceGroup",d=[];function y(e){return i.when(function(e){var n=angular.copy(e);return n[l]={},n.type=n.groupType.type,delete n.groupType,n}(e)).then(a.createConfirm).then(n.getResData).then(f)}function f(e){return c.addGroupNavigation(e),e}function h(e){var n=p.getString('Group "{{name}}" created.',e);return s.success(n)}function v(t,e){var r=i.when();return _.forEach(e,function(e){var n=_.partial(a.addChildAsset,t,e);r=r.then(n).then(function(){d.push(e)})}),r}_.assign(o,{title:u("Create group"),forms:{},alreadyAssignedDevices:d,newGroup:{groupType:e.getDeviceGroupType()},create:function(e){var n=o.newGroup,t=_.partialRight(v,e);i.when(y(n)).then(t).then(g.close).then(_.partial(h,n)).then(function(){r.$broadcast("c8yGroupCreateAndAssign::created")})},invalidName:function(){return n.invalid(o.forms,"newGroupForm","name")},dismiss:g.dismiss,c8yConfig:t})}e.$inject=["$rootScope","$scope","$q","c8yGroupTypesConfig","c8yBase","c8yInventory","c8yConfig","groupTypesHierarchyNavigator","c8yAlert","gettext","gettextCatalog"],angular.module("c8y.ui").component("c8yGroupCreateAndAssignModal",{templateUrl:":::PLUGIN_PATH:::/ui/groups/views/group-create-and-assign.html",controller:e,controllerAs:"vm",bindings:{dismiss:"&",close:"&"}})}();