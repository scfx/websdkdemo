"use strict";function _objectSpread(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&o.push.apply(o,Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),o.forEach(function(e){_defineProperty(r,e,n[e])})}return r}function _defineProperty(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,o=new Array(r);n<r;n++)o[n]=e[n];return o}function _iterableToArrayLimit(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,t,a=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(o=n.next()).done)&&(a.push(o.value),!r||a.length!==r);u=!0);}catch(e){l=!0,t=e}finally{try{u||null==n.return||n.return()}finally{if(l)throw t}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(){function e(e,r,o){var n=r.FILTERING_MODE,t=r.SIMPLE_JSON_PATH_REGEX,a=this,u=[];function l(){var n=RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(a.filterText),"i");a.filteredConfigurableColumns=_(a.configurableColumns).filter("header").filter(function(e){var r=e.name;return(e.header||r||"").match(n)}).value()}function i(e){a.addingCustomColumn=e,a.customColumnMetaToAdd={key:"",headerName:"",fragmentPath:"",filteringMode:n.EQUALITY,custom:!0,active:!0}}_.assign(a,{$onInit:function(){var e=_slicedToArray(_.at(a.resolve,["dynamicGroupId","columnOptions"]),2),r=e[0],n=e[1];o.getConfigurableColumns({dynamicGroupId:r,options:n}).then(function(e){a.configurableColumns=e,u=_.cloneDeep(e)})},FILTERING_MODE:n,SIMPLE_JSON_PATH_REGEX:t,configurableColumns:[],filterText:"",updateFilteredConfigurableColumns:l,addCustomColumn:function(){i(!0)},addingCustomColumn:!1,customColumnMetaToAdd:{},cancelCustomColumnAdd:function(){i(!1)},confirmCustomColumnAdd:function(){a.configurableColumns=[].concat(_toConsumableArray(a.configurableColumns),[o.createConfigurableColumn({meta:_objectSpread({},a.customColumnMetaToAdd,{key:_.camelCase(a.customColumnMetaToAdd.headerName)}),options:_.get(a.resolve,"columnOptions")})]),a.configurableColumns=o.moveRemovalColumnToTheEnd(a.configurableColumns),i(!1)},removeCustomColumn:function(e){a.configurableColumns=_.without(a.configurableColumns,e)},getActiveConfigurableColumns:function(){return _.filter(a.configurableColumns,"meta.active")},formatColumnName:function(e){return _.capitalize(_.startCase(e))},columnHeaderUniquenessComparator:function(e,r){return _.camelCase(e)===_.camelCase(r)},areConfigurableColumnsChanged:function(){return!_.isEqual(a.configurableColumns,u)}}),e.$watchCollection("vm.configurableColumns",l)}e.$inject=["$scope","c8yConfigurableDeviceListColumnsConstants","c8yConfigurableDeviceListColumns"],angular.module("c8y.ui").component("c8yModalDeviceListColumnsConfigure",{templateUrl:":::PLUGIN_PATH:::/ui/configurable-device-list-columns/modal-columns-configure.component.html",bindings:{close:"&",dismiss:"&",resolve:"<"},controllerAs:"vm",controller:e})}();