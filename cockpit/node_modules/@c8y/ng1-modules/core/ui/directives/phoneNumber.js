"use strict";!function(){function e(i,E,c){var A={PATTERN_VALIDATION_ERROR_KEY:"pattern",NUMBER_VALIDATION_ERROR_KEY:"international_number_required"};return{require:"ngModel",link:function(a,o,R,u){function l(e){var r={PATTERN_VALIDATION_ERROR_KEY:!0,NUMBER_VALIDATION_ERROR_KEY:!0,modelValue:""};if(e){var n,t=c.validation.phoneNumber.pattern.test(e);t||(r.PATTERN_VALIDATION_ERROR_KEY=!1);try{(n=i.phoneUtils.isValidNumber(e))||(r.NUMBER_VALIDATION_ERROR_KEY=!1)}catch(e){r.NUMBER_VALIDATION_ERROR_KEY=!1}t&&n&&(r.modelValue=i.phoneUtils.formatE164(e))}return r}u.$parsers.unshift(function(e){var r=[e];a.$eval(R.c8yPhoneNumberAllowMultiple)&&(r=(e||"").split(","));var n,t=_.map(r,function(e){return l(e)}),i=!0;_.forEach(_.keys(A),function(e){var r=_.every(_.map(t,e));u.$setValidity(A[e],r),r||(i=!1)}),o.parent().toggleClass("has-error",E.invalidFormOrField(u)),i&&(n=_.map(t,"modelValue").join(","));return n})}}}e.$inject=["$window","c8yBase","c8yConfig"],angular.module("c8y.ui").directive("c8yPhoneNumber",e)}();