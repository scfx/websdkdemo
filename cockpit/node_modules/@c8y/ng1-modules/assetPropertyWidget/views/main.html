<div ng-controller="assetPropertyWidgetCtrl">
  <form name="schemaForm" novalidate>
    <c8y-schema-form
      schema="schema"
      form="form"
      model="managedObject"
      class="widget"
      ng-class="{ 'form-read-only': !editable }"
    >
    </c8y-schema-form>
  </form>
  <c8y-if-allowed admin-mos="[managedObject]">
    <div class="p-16 separator-bottom" ng-show="editable && canAddProperties()">
      <button
        title="{{ 'Add fragment' | translate }}"
        class="btn-add-block m-b-0"
        ng-click="addProperties()"
      >
        <i c8y-icon="plus-circle"></i>
        {{ 'Add fragment' | translate }}
      </button>
    </div>

    <div c8y-widget-footer class="m-16">
      <button
        title="{{ 'Edit' | translate }}"
        class="btn btn-link p-l-0 min-width-unset"
        ng-click="startEdit()"
        ng-show="!editable"
      >
        <i c8y-icon="pencil"></i>
        {{ 'Edit' | translate }}
      </button>
      <button
        title="{{ 'Cancel' | translate }}"
        class="btn btn-default btn-sm"
        ng-click="cancelEdit()"
        ng-show="editable"
      >
        {{ 'Cancel' | translate }}
      </button>
      <button
        title="{{ 'Save' | translate }}"
        class="btn btn-primary btn-sm"
        ng-click="save()"
        ng-show="editable"
        ng-disabled="schemaForm.$invalid"
      >
        {{ 'Save' | translate }}
      </button>
    </div>
  </c8y-if-allowed>
</div>
