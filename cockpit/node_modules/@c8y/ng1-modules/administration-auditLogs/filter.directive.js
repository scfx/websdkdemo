"use strict";angular.module("c8y.auditLogs").directive("auditLogsFilter",["c8yAudits",function(i){return{require:"ngModel",restrict:"EA",link:function(n,e,t,r){n.dateOpen={},n.viewFilter={},n.types=_.map(i.types,function(e,t){return{name:t,label:e}}),r.$render=function(){if(r.$isEmpty(r.$viewValue))return n.viewFilter={};var e=n.viewFilter,t=r.$viewValue;e.type=t.type,e.user=t.user,e.dateFrom=t.dateFrom&&new Date(t.dateFrom),e.dateTo=t.dateTo&&new Date(t.dateTo)},n.apply=function(){var i=_.cloneDeep(n.viewFilter),e=function(e,t){i[e]&&(i[e]=moment(i[e]).add(t,"days").toISOString())};_.forEach({0:"dateFrom",1:"dateTo"},e),r.$setViewValue(i)},n.open=function(e){n.dateOpen[e]=!0},n.clear=function(){n.viewFilter={},r.$setViewValue({})},n.anyFilter=function(){return _.some(_.assign({},r.$modelValue,n.viewFilter),_.identity)}},templateUrl:":::PLUGIN_PATH:::/views/filter.html",scope:{}}}]);