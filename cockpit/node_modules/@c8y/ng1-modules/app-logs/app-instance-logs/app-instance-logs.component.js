"use strict";!function(){function e(e,t,n,o){var c=this,s="c8yAppInstanceLogsUiAceSettings",i={theme:"monokai",fontSize:14,themeLabel:n("Dark theme")};function a(){c.instancesCopy=_.cloneDeep(c.instances)}function l(){var e=c.aceInstance.session.getLength()-1;c.aceInstance.gotoLine(1+e,0)}_.assign(c,{$onInit:function(){c.uiAceSettings={useWrapMode:!0,mode:"java",showPrintMargin:!1,onLoad:function(e){c.aceInstance=e,c.aceInstance.$blockScrolling=1/0}},o.get(s).then(function(e){_.isUndefined(e)||(c.uiAceOptions.theme=e.theme,c.uiAceOptions.fontSize=e.fontSize)})},uiAceSettings:{},uiAceOptions:i,onNewLogs:function(e){(function(e){var n=e.dateFrom,t=e.dateTo,o=e.logs;c.selectedInstance.dateFrom=n,c.selectedInstance.dateTo=t,c.selectedInstance.logs=o})(e),c.aceInstance.session.getScrollTop()===c.aceInstance.renderer.layerConfig.maxHeight-c.aceInstance.renderer.$size.scrollerHeight+c.aceInstance.renderer.scrollMargin.bottom&&setTimeout(l)},updateRealtimeState:function(e){c.isRealtimeEnabled=e},onInstances:a,instancesCopy:{}}),e.$watchCollection("vm.uiAceOptions",function(e){_.isUndefined(e)||(function(e){c.aceInstance.setFontSize(e.fontSize),c.aceInstance.setTheme("ace/theme/".concat(e.theme))}(e),function(){var e=i.theme,n=i.fontSize,t={theme:e,fontSize:n};o.set(s,t)}())}),e.$watch("vm.dateFromPickerOpen",function(e,n){n&&!e?(c.shouldClose="disabled",t(function(){c.shouldClose="outsideClick"},0)):c.shouldClose="outsideClick"}),e.$watch("vm.instances",a)}e.$inject=["$scope","$timeout","gettext","c8yUserPreferences"],angular.module("c8y.appLogs").component("c8yAppInstanceLogs",{bindings:{selectedInstance:"=",mo:"<",instances:"<",onNextButtonClick:"<",onFastBackwardButtonClick:"<",onBackButtonClick:"<",onFastForwardButtonClick:"<",logsString:"<",buttonsDisabled:"<",isRealtimeEnabled:"<",onInstanceChange:"<",onDateFromChange:"<"},templateUrl:":::PLUGIN_PATH:::/app-instance-logs/app-instance-logs.html",controller:e,controllerAs:"vm"})}();