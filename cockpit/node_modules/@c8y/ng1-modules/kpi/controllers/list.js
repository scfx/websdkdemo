"use strict";angular.module("c8y.parts.kpi").controller("kpiListCtrl",["$scope","baseWidgetSvc",function(o,t){var i=t.createWidget(o);function n(t){var i=o.measurements[t.id],e=i&&i.value,n=t&&t.target,s="--";return _.isUndefined(e)||_.isUndefined(n)||(s=e-n),s}i.init=function(){var t=o.child.config;t.datapoints=t.options&&t.options.dataPoints,this.__super.init.call(this)},i.refresh=function(){o.measurements=this.mostRecentKpi.measurements,o.dataPoints=this.mostRecentKpi.dataPoints,o.times=this.mostRecentKpi.times},i.onNotification=i.refresh,o.options=o.child.config.options,o.diff=n,o.diffPercent=function(t){var i="--";if(!_.isUndefined(t.target)){var e=n(t);i=e/t.target*100}return i},o.columnVisible=function(t){return!1!==t},i.init()}]);