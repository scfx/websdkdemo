"use strict";!function(){function t(o){function n(t){this.mostRecentKpi=null,this.$scope=t}return n.prototype.onDestroy=function(){this.mostRecentKpi&&this.mostRecentKpi.stop(),this.unwatchConfig&&this.unwatchConfig(),this.unwatchDestroy&&this.unwatchDestroy()},n.prototype.init=function(){var t=this.$scope.child,i=t.config;this.onDestroy(),this.unwatchDestroy=this.$scope.$on("$destroy",_.bind(this.onDestroy,this)),this.unwatchConfig=this.$scope.$watch("child.config",_.bind(function(t,i){t&&!_.isEqual(t,i)&&this.init()},this));var n=o.createInstance(i,this.$scope.$id,t);return n.onNotification(_.bind(this.onNotification,this)),n.start().then(_.bind(function(){this.mostRecentKpi=n,this.refresh()},this))},n.prototype.refresh=function(){throw new Error("refresh function needs to be overriden")},n.prototype.onNotification=function(){throw new Error("onNotification function needs to be overriden")},{createWidget:function(t){var i=new n(t);return i.__super=n.prototype,i}}}t.$inject=["mostRecentKpiSvc"],angular.module("c8y.parts.kpi").factory("baseWidgetSvc",t)}();