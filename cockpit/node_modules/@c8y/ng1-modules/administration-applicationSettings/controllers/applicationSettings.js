"use strict";!function(){function t(n,t,e,a,o,i,c,l){var p="access.control",r="allow.origin",s=c('The "Allowed domain" setting allows your JavaScript web application to directly communicate with the REST API.\n\nOptions:\n- Enter "*" to allow communication from any host,\n- enter "http://my.host.com, http://myother.host.com" to allow applications from http://my.host.com and from http://myother.host.com to communicate with the platform,\n- leave the field blank to allow access only from your tenant\'s domain.\n\nFor more information, check <a target="_blank" rel="noopener noreferrer" href="https://enable-cors.org">enable-cors.org</a>');function u(t){return _.filter(t,{type:"HOSTED"})}function f(t){var e=t.key.replace(/\./,"_");n[e]=t}function h(){e.detail({category:p,key:r}).then(function(t){return t.data}).then(f)}_.assign(n,{applicationSettings:{},updateDefaultApp:function(){return e.updateOption({category:"application",key:"default.application",value:n.applicationSettings.defaultApplication.id}).then(function(){i.success(l.getString('Application "{{appName | humanizeAppName}}" is now the default application for the tenant.',{appName:n.applicationSettings.defaultApplication.contextPath}))})},helpText:s,saveAccessControl:function(t){return""===t.value?e.deleteOption({category:p,key:r}).then(function(){i.success(c("Access not allowed from any domains."))}):function(t){return e.updateOption({category:p,key:r,value:t.value}).then(function(){return h()}).then(function(){i.success(l.getString("Access allowed from domain(s): {{value}}.",t))})}(t)},filterHostedApps:u}),o.listByVisibleLinks().then(function(t){n.applications=u(t),e.detail({category:"application",key:"default.application"}).then(function(t){n.applicationSettings.defaultApplication=_.find(n.applications,{id:t.data.value})})}),h(),a.changeTitle({title:c("Application")})}t.$inject=["$scope","$q","c8ySettings","c8yTitle","c8yApplication","c8yAlert","gettext","gettextCatalog"],angular.module("c8y.parts.applicationSettings").controller("applicationSettingsCtrl",t)}();