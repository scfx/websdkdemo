"use strict";angular.module("c8y.parts.appArchives").controller("ArchivesUploadCtrl",["$scope","$q","$uibModalInstance","c8yApplication","app",function(a,l,o,r,i){a.uploading=!1,a.uploadProgress=0,a.allowMultipleFiles=!1,a.filesRequired=!0,a.files=[],a.upload=function(){if(a.uploading)return l.reject();a.uploading=!0;var e=_(a.files).map("file").map(_.partial(r.uploadArchive,i)).value();return _.forEach(e,function(o){o.progress(function(l){o.uploadProgress=l.loaded/l.total,a.uploadProgress=_(e).map("uploadProgress").reduce(function(l,o){return l+o})/e.length})}),l.all(e).then(o.close).finally(function(){a.uploadProgress=100,a.uploading=!1})},a.dismiss=o.dismiss}]);