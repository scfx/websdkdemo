"use strict";!function(){function e(n,e,r,l,t,i){var u=[];function a(){return!n.uploading&&_.every(n.files,function(e){return t.hasValidSize(e.file)})}n.uploading=!1,n.uploadProgress=0,n.allowMultipleFiles=!0,n.filesRequired=!0,n.files=[],_.assign(n,{canUpload:a,upload:function(){var o=r.defer();a()?(n.uploading=!0,_.forEach(n.files,function(e){var n=t.upload(e.file);u.push(n),n.progress(function(e){n.uploadProgress=e.loaded/e.total,o.notify(_(u).map("uploadProgress").reduce(function(e,n){return e+n})/u.length)})}),r.all(u).then(function(e){return o.resolve(e)})):o.reject();return n.uploadProgress=0,o.promise.then(function(){l.success(i("Files uploaded.")),e.close()},function(){l.danger(i("Could not upload the files."))},function(e){n.uploadProgress=100*e}).finally(function(){n.uploading=!1,n.uploadProgress=100})},dismiss:e.dismiss}),e.closed.then(function(){_.forEach(u,function(e){return e.abort()})})}e.$inject=["$scope","$uibModalInstance","$q","c8yAlert","c8yBinary","gettext"],angular.module("c8y.binaryArtefactsManagement").controller("binaryArtefactsUploadCtrl",e)}();