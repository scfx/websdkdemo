"use strict";function binaryArtefactsListCtrl(e,n,i,t,a,r,o){var l,s=[];function c(t){e.files&&!e.refreshLoading||(e.files=[]),e.paging=t.paging,t.forEach(function(t){t.icon=a.icon(t),e.files.push(t)})}function f(){t.changeTitle({title:r("Files repository")})}function g(){e.refreshLoading=!0,e.paging.refresh().then(c).finally(function(){e.refreshLoading=!1})}function u(t){return s.indexOf(t)}function p(t){return-1<u(t)}e.loadNext=function(){e.paging.loading=!0,e.paging.next().then(c).finally(function(){e.paging.loading=!1})},e.refresh=g,e.toggle=function(t){p(t)?s.splice(u(t),1):(s.push(t),function(e){a.isImage(e)&&!e.dataUri&&a.downloadAsDataUri(e).then(function(t){e.dataUri=t})}(t))},e.isOpen=p,e.onClickDelete=function(t){n({title:r("Delete file"),body:o.getString('You are about to delete file "{{name}}". Do you want to proceed?',t),status:"danger",labels:{ok:r("Delete")}}).then(angular.bind(a,a.removeBinary,t)).then(angular.bind(i,i.removeFromList,e.files,t))},e.upload=function(){n({templateUrl:":::PLUGIN_PATH:::/views/upload.html",controller:"binaryArtefactsUploadCtrl",title:r("Upload files"),backdrop:"static"}).then(g)},e.size=a.size,e.isImage=a.isImage,e.popoverTemplateUrl=":::PLUGIN_PATH:::/views/popover.html",e.isApplicationBinary=function(t){return _.has(t,"c8y_applications_storage")},a.list(l).then(c).then(f)}binaryArtefactsListCtrl.$inject=["$scope","c8yModal","c8yBase","c8yTitle","c8yBinary","gettext","gettextCatalog"],angular.module("c8y.binaryArtefactsManagement").controller("binaryArtefactsListCtrl",binaryArtefactsListCtrl);