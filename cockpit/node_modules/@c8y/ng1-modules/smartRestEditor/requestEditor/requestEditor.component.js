"use strict";!function(){function e(e,a,u,t){var s=this;function n(){e.requestTemplateForm.$setPristine(),e.requestTemplateForm.$setUntouched()}function r(){e.requestTemplateForm.msgId.$validate()}function l(){return s.requestTemplate&&s.requestTemplate.api&&s.requestTemplate.method}function o(){return s.requestTemplate&&u.doesRequestTemplateRequireByIdOrByExternalId(s.requestTemplate)}_.assign(s,{validation:t.validation,methods:u.Methods.values(),apis:u.APIs.values(),types:u.typesForUI(),getMethodsForAPI:u.getMethodsForAPI,setupRequestTemplateDefaults:u.setupRequestTemplateDefaults,addCustomValue:u.addRequestTemplateCustomValue,removeCustomValue:u.removeRequestTemplateCustomValue,$onChanges:function(e){if(e.requestTemplate&&e.requestTemplate.currentValue){var t=e.requestTemplate.currentValue;s.originalMsgId=t.msgId,s.requestTemplate=_.cloneDeep(t),s.originalMsgId||u.setupRequestTemplateDefaults(s.requestTemplate),a(n),a(r)}},apiAndMethodSelected:l,shouldShowByIdOrByExternalId:o,noRequiredApiValues:function(){return l()&&!o()&&0===s.requestTemplate.mandatoryValues.length},onCustomValueDataTypeChanged:function(e){e.value=null},save:function(){s.onSave({requestTemplate:function(e){var t=_.cloneDeep(e);return _.forEach(t.mandatoryValues,function(e){return delete e.label}),t}(s.requestTemplate)})},remove:function(){s.onRemove({requestTemplate:s.requestTemplate})},cancel:function(){s.onCancel()},getPreviews:function(e){return e?u.getRequestTemplatePreview(e).csv:""}})}e.$inject=["$scope","$timeout","c8ySmartRestTemplates","c8yConfig"],angular.module("c8y.smartRestEditor").component("c8ySmartRestRequestEditor",{bindings:{template:"<",requestTemplate:"<",onSave:"&",onRemove:"&",onCancel:"&"},templateUrl:":::PLUGIN_PATH:::/requestEditor/requestEditor.html",controller:e,controllerAs:"vm"})}();