"use strict";angular.module("c8y.smartRules").directive("smartRuleParamInputGeofence",function(){return{require:"smartRuleParamInput",scope:{rule:"=",param:"="},restrict:"E",templateUrl:":::PLUGIN_PATH:::/views/paramInputGeofence.html",controller:["$scope","c8yGeo","geofenceSvc",function(t,e,n){var o={type:"polygon",stroke:!0,weight:1,color:"#2e3974",fillColor:"#2e3974",latlngs:[]},r=new e.Bounds,a={center:{},bounds:r.get(),paths:{geofence:o}};function l(e){t.rule.config[t.param.property]=e,o.latlngs.length=0,_.forEach(e,function(e){o.latlngs.push(e),r.add(e)}),a.bounds=r.get(),0<o.latlngs.length?a.paths={geofence:o}:a.paths={}}function c(){n.showEditUI(o.latlngs).then(function(e){l(e)})}t.map=a,t.editGeofence=c,l(t.rule.config[t.param.property])}]}});