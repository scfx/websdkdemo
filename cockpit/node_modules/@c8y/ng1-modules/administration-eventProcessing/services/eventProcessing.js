"use strict";!function(){function e(n,t,r,c,i,a,e){var u="c8y_CepAgent";return{getPermissions:function(){return t.all({canRead:o(),canAdmin:function(){var e={canRead:o(),userCanAdmin:r.hasAnyRole(["ROLE_CEP_MANAGEMENT_ADMIN"]),featureSubscribed:c.isAvailable({name:"feature-cep-custom-rules"})};return t.all(e).then(function(e){return e.canRead&&e.userCanAdmin&&e.featureSubscribed})}()})},redirectToRootIfPluginDisabled:function(){return o().then(s)},getModuleMetrics:function(e){var t,n=_.get(e,"name"),r="".concat(n,":");return l().then(function(e){return(t=e)?a.getSupportedMeasurements(t):[]}).then(function(e){return _.compact(_.map(e,function(e){var n;return _.startsWith(e,r)&&(n={deviceId:t.id,fragment:e,statement:_.last(e.split(":"))}),n}))})},getAlarmListFilters:function(e){var n="".concat(e.name,":");return l().then(function(e){return{source:e.id,orderMode:"ACTIVE_FIRST",displayFilter:function(e){return _.includes(e.type,n)}}})}};function o(){var e={cepMicroserviceAvailable:i.shouldShowEventProcessing(),userCanRead:r.hasAnyRole(["ROLE_CEP_MANAGEMENT_READ"])};return t.all(e).then(function(e){return e.cepMicroserviceAvailable&&e.userCanRead})}function s(e){return e?t.when(!0):(n.path("/"),t.reject())}function l(){return e.current().then(function(e){return a.list({fragmentType:"".concat(u,"_").concat(e.name)})}).then(_.first)}}e.$inject=["$location","$q","c8yPermissions","c8yApplication","c8yUiUtil","c8yInventory","c8yTenant"],angular.module("c8y.eventProcessing").factory("eventProcessingSvc",e)}();