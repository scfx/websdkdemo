"use strict";angular.module("c8y.deviceDetailIdentity").controller("deviceDetailIdentityCtrl",["$scope","$routeParams","c8yIdentity","c8yModal","c8yAlert","gettext","gettextCatalog",function(t,e,n,a,r,i,d){var l=e.deviceId,o=i("The external ID links the device information and the physical world (e.g. serial number, IMEI).\n\nIf for some reason the hardware needs to be replaced, the external ID must also be replaced with the appropriate information.\n\nWith this procedure the new hardware is still linked to the information that was created by its predecessor.");function s(e){t.ids=e}function c(){h(),delete t.newId}function h(){return n.listExternalIds(l).then(s)}t.onClickDelete=function(e){a({title:i("Delete external ID"),body:d.getString('You are about to delete the external ID "{{externalId}}" of the type "{{type}}". Do you want to proceed?',e),labels:{ok:i("Delete")},status:"danger"}).then(_.partial(n.deleteIdentity,e)).then(h).then(_.partial(r.success,i("External ID deleted.")))},t.create=function(e){_.some(t.ids,{externalId:e.externalId,type:e.type})?r.danger(d.getString('Could not add identity. External ID "{{externalId}}" of the type "{{type}}" already exists.',e)):n.createIdentity(l,e).then(c).then(_.partial(r.success,i("External ID added.")))},t.paging={refresh:!0},t.refresh=function(){t.refreshLoading=!0,h().finally(function(){t.refreshLoading=!1})},t.add=function(){t.newId={}},t.cancel=function(){delete t.newId},t.helpText=o,h()}]);