{"version":3,"file":"c8y-ngx-components-ecosystem.umd.js","sources":["../../../../node_modules/tslib/tslib.es6.js","../../ecosystem/ecosystem.model.ts","../../ecosystem/ecosystem.constants.ts","../../ecosystem/ecosystem.service.ts","../../ecosystem/applications/add-web-application/add-web-application.component.ts","../../ecosystem/shared/application-properties-form.component.ts","../../ecosystem/applications/install-from-package/install-from-package.component.ts","../../ecosystem/applications/duplicate-application/duplicate-application-list/duplicate-application-list.component.ts","../../ecosystem/applications/duplicate-application/duplicate-application-properties/duplicate-application-properties.component.ts","../../ecosystem/applications/duplicate-application/duplicate-application.component.ts","../../ecosystem/applications/add-external-applicaiton/add-external-application.component.ts","../../ecosystem/microservices/add-microservice.component.ts","../../ecosystem/applications/application-list/application-list.component.ts","../../ecosystem/applications/application-plugins/install-plugin.component.ts","../../ecosystem/applications/application-plugins/application-plugins.component.ts","../../ecosystem/applications/application-plugins/application-plugins.guard.ts","../../ecosystem/applications/application-plugins/plugin-list-item.component.ts","../../ecosystem/applications/application-plugins/plugin-list.component.ts","../../ecosystem/activity-log/activity-log.component.ts","../../ecosystem/application-properties/application-properties.component.ts","../../ecosystem/ecosystem-navigation.factory.ts","../../ecosystem/ecosystem.guard.ts","../../ecosystem/ecosystem-tabs.factory.ts","../../ecosystem/microservices/microservice-list.component.ts","../../ecosystem/packages/package-list/packages-list.component.ts","../../ecosystem/packages/add-package.component.ts","../../ecosystem/packages/package-details/package-details.component.ts","../../ecosystem/packages/deploy-application/deploy-application.component.ts","../../ecosystem/shared/add-application.component.ts","../../ecosystem/packages/package.guard.ts","../../ecosystem/shared/application-card.component.ts","../../ecosystem/application-properties/application-properties.guard.ts","../../ecosystem/features/feature-list.component.ts","../../ecosystem/packages/package-archives/package-archives.component.ts","../../ecosystem/ecosystem-wizard.factory.ts","../../ecosystem/shared/upload-archive.component.ts","../../ecosystem/ecosystem.module.ts","../../ecosystem/c8y-ngx-components-ecosystem.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","export interface ApplicationState {\n  label: string;\n  class: string;\n}\n\n/** Wizard types  */\nexport enum Wizards {\n  APPLICATION_UPLOAD = 'applicationUpload',\n  MICROSERVICE_UPLOAD = 'microserviceUpload'\n}\n\nexport enum ERROR_TYPE {\n  TYPE_VALIDATION = 'TYPE_VALIDATION',\n  ALREADY_SUBSCRIBED = 'ALREADY_SUBSCRIBED',\n  INTERNAL_ERROR = 'INTERNAL_ERROR',\n  NO_MANIFEST_FILE = 'NO_MANIFEST_FILE',\n  INVALID_PACKAGE = 'INVALID_PACKAGE',\n  INVALID_APPLICATION = 'INVALID_APPLICATION'\n}\n\nexport interface ApplicationPlugin {\n  id: string;\n  name?: string;\n  module: string;\n  path: string;\n  description?: string;\n  version?: string;\n  scope?: string;\n  installed?: boolean;\n  contextPath?: string;\n}\n","import { ERROR_TYPE } from './ecosystem.model';\nimport { gettext, PropertiesListItem } from '@c8y/ngx-components';\n\nexport const ERROR_MESSAGES = {\n  [ERROR_TYPE.TYPE_VALIDATION]: gettext(\n    'Wrong file format. Expected a *.zip file with a valid manifest.'\n  ),\n  [ERROR_TYPE.ALREADY_SUBSCRIBED]: gettext(\n    'Could not subscribe to the microservice because another application with the same context path is already subscribed.'\n  ),\n  [ERROR_TYPE.NO_MANIFEST_FILE]: gettext('Could not find a manifest.'),\n  [ERROR_TYPE.INVALID_PACKAGE]: gettext('You have not uploaded a valid package.'),\n  [ERROR_TYPE.INVALID_APPLICATION]: gettext('You have not uploaded a valid application.'),\n  [ERROR_TYPE.INTERNAL_ERROR]: gettext('An internal error occurred, try to upload again.')\n};\n\nexport const APP_STATE = {\n  SUBSCRIBED: {\n    label: gettext('Subscribed`application`'),\n    class: 'label-primary'\n  },\n  CUSTOM: {\n    label: gettext('Custom`application`'),\n    class: 'label-info'\n  },\n  EXTERNAL: {\n    label: gettext('External`application`'),\n    class: 'label-warning'\n  },\n  UNPACKED: {\n    label: gettext('Unpacked`application`'),\n    class: 'label-success'\n  },\n  PACKAGE_APP: {\n    label: gettext('Application'),\n    class: 'label-success'\n  },\n  PACKAGE_PLUGIN: {\n    label: gettext('Plugins'),\n    class: 'label-info'\n  }\n};\n\nexport const packageProperties: PropertiesListItem[] = [\n  {\n    label: gettext('Version'),\n    key: 'version'\n  },\n  {\n    label: gettext('Author'),\n    key: 'author'\n  },\n  {\n    label: gettext('Keywords'),\n    key: 'keywords'\n  },\n  {\n    label: gettext('Source'),\n    key: 'repository',\n    transform: (repository: any) => (repository?.url ? repository.url : repository),\n    type: 'link',\n    action: (e, link) => window.open(link.value as string, '_blank', 'noopener,noreferrer')\n  },\n  {\n    label: gettext('Homepage'),\n    key: 'homepage',\n    type: 'link',\n    action: (e, link) => window.open(link.value as string, '_blank', 'noopener,noreferrer')\n  },\n  {\n    label: gettext('Required platform version'),\n    key: 'requiredPlatformVersion'\n  },\n  {\n    label: gettext('License'),\n    key: 'license'\n  }\n];\n","import { EventEmitter, Injectable } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport {\n  ApplicationService,\n  ApplicationType,\n  IApplication,\n  IApplicationBinary,\n  ICurrentTenant,\n  IdReference,\n  IFetchResponse,\n  IManifest,\n  IResult,\n  IResultList,\n  TenantService\n} from '@c8y/client';\nimport {\n  AlertService,\n  AppStateService,\n  gettext,\n  HumanizeAppNamePipe,\n  ModalService,\n  Status,\n  ZipService\n} from '@c8y/ngx-components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { saveAs } from 'file-saver/FileSaver';\nimport { cloneDeep, get, groupBy, kebabCase, pick } from 'lodash-es';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { debounceTime, take } from 'rxjs/operators';\nimport { APP_STATE } from './ecosystem.constants';\nimport { ApplicationState, ERROR_TYPE } from './ecosystem.model';\n\nconst CUMULOCITY_JSON = 'cumulocity.json';\n\n@Injectable()\nexport class EcosystemService {\n  appDeleted = new EventEmitter<IApplication>();\n  progress: BehaviorSubject<number> = new BehaviorSubject<number>(null);\n  private appsGroupedByContextPath: any[];\n  private xhr: XMLHttpRequest;\n\n  constructor(\n    private modal: ModalService,\n    private alertService: AlertService,\n    private humanizeAppName: HumanizeAppNamePipe,\n    private translateService: TranslateService,\n    private applicationService: ApplicationService,\n    private appStateService: AppStateService,\n    private zipService: ZipService,\n    private tenantService: TenantService\n  ) {}\n\n  getUniqueAppConfig(srcApp: IApplication, existingApps: IApplication[]): IApplication {\n    let app: IApplication = {\n      name: srcApp.name,\n      key: srcApp.key,\n      contextPath: srcApp.contextPath\n    };\n    for (let retryNo = 0; retryNo < 9; ) {\n      if (this.checkIfAppNameKeyPathExists(existingApps, app, retryNo)) {\n        retryNo++;\n        app = {\n          name: [srcApp.name, retryNo].join('-'),\n          key: [srcApp.key, retryNo].join('-'),\n          contextPath: [srcApp.contextPath, retryNo].join('-')\n        };\n      } else {\n        return app;\n      }\n    }\n    return app;\n  }\n\n  getApplication(appId: IdReference): IApplication {\n    return this.applicationService.detail(appId).then((res) => res.data);\n  }\n\n  getApplications(customFilter: any = {}): Promise<IResultList<IApplication>> {\n    const filter: object = {\n      pageSize: 2000,\n      withTotalPages: true\n    };\n    Object.assign(filter, customFilter);\n    const currentTenant = this.appStateService.currentTenant.value;\n    return this.applicationService.listByTenant(currentTenant.name, filter);\n  }\n\n  async getMicroservices(): Promise<IApplication[]> {\n    const apps = (await this.getApplications()).data;\n    const microservices = apps.filter((app) => this.isMicroservice(app));\n    return microservices.sort((a, b) => a.name.localeCompare(b.name));\n  }\n\n  async getWebApplications(customFilter: any = {}): Promise<IApplication[]> {\n    const apps = (await this.getApplications(customFilter)).data;\n    const webApps = apps.filter((app) => this.isApplication(app));\n    this.appsGroupedByContextPath = groupBy(webApps, 'contextPath');\n    return webApps.sort((a, b) => a.name.localeCompare(b.name));\n  }\n\n  async getFeatureApplications(customFilter: any = {}): Promise<IApplication[]> {\n    const apps = (await this.getApplications(customFilter)).data;\n    const webApps = apps.filter((app) => this.isFeature(app));\n    return webApps.sort((a, b) => a.name.localeCompare(b.name));\n  }\n\n  async getPackageApplications(customFilter: any = {}): Promise<IApplication[]> {\n    const apps = (await this.getApplications(customFilter)).data;\n    const webApps = apps.filter((app) => this.isPackage(app));\n    return webApps.sort((a, b) => a.name.localeCompare(b.name));\n  }\n\n  async isMicroserviceHostingAllowed(): Promise<boolean> {\n    const { data: apps } = await this.applicationService.listByName('feature-microservice-hosting');\n    return !!apps.filter(app => app.owner?.tenant?.id === 'management').length;\n  }\n\n  canOpenAppInBrowser(app: IApplication): boolean {\n    const isNotAFeature = !this.isFeature(app);\n    const hasProperType = [\n      ApplicationType.HOSTED,\n      ApplicationType.EXTERNAL,\n      ApplicationType.REPOSITORY\n    ].includes(app.type);\n    const isNotAPackage = !this.isPackage(app);\n    return isNotAFeature && hasProperType && isNotAPackage;\n  }\n\n  canDeleteApp(app: IApplication): boolean {\n    return !this.isCurrentApp(app) && this.isOwner(app);\n  }\n\n  isOwner(app: IApplication): boolean {\n    const currentTenant: ICurrentTenant = this.appStateService.currentTenant.value;\n    const appOwner = get(app, 'owner.tenant.id');\n    return currentTenant.name === appOwner;\n  }\n\n  isFeature(app: IApplication): boolean {\n    return !!app.name.match(/feature-/);\n  }\n\n  isMicroservice(app: IApplication): boolean {\n    return app.type === 'MICROSERVICE';\n  }\n\n  isExternal(app: IApplication): boolean {\n    return app.type === 'EXTERNAL';\n  }\n\n  isPackage(app: IApplication): boolean {\n    return app.manifest?.isPackage === true;\n  }\n\n  cancelAppCreation(app: IApplication): void {\n    if (this.xhr) {\n      this.xhr.abort();\n    }\n    if (app) {\n      this.applicationService.delete(app);\n    }\n  }\n\n  updateUploadProgress(event): void {\n    if (event.lengthComputable) {\n      const currentProgress = this.progress.value;\n      this.progress.next(currentProgress + (event.loaded / event.total) * (95 - currentProgress));\n    }\n  }\n\n  setAppActiveVersion(app: IApplication, activeVersionId: string): Promise<IApplication> {\n    return this.applicationService.update({ id: app.id, activeVersionId });\n  }\n\n  getHumanizedAppName(app: IApplication): Promise<string> {\n    return this.humanizeAppName.transform(app.name).pipe(debounceTime(250), take(1)).toPromise();\n  }\n\n  createConfig(app: IApplication, formGroupValue: FormGroup): Partial<FormGroup> {\n    const { id, manifest } = app;\n    let config = pick(formGroupValue, ['name', 'key', 'contextPath']);\n    config = { ...config, setup: true, id, description: manifest.description };\n    return config;\n  }\n\n  async updateAppManifest(\n    application: IApplication,\n    sourcePackage: IApplication\n  ): Promise<{ res: IFetchResponse; data: any }> {\n    const { id } = application;\n    const cleanedApp = this.removeAppProperties(application);\n    cleanedApp.setup = true;\n    cleanedApp.manifest.isPackage = false;\n    cleanedApp.manifest.source = sourcePackage.id;\n\n    return await this.applicationService\n      .binary(id)\n      .updateFiles([{ path: CUMULOCITY_JSON, contents: JSON.stringify(cleanedApp) as any }]);\n  }\n\n  async listArchives(appId: string | number | IApplication): Promise<IApplicationBinary[]> {\n    const filter = {\n      pageSize: 100\n    };\n    return (await this.applicationService.binary(appId).list(filter)).data;\n  }\n\n  async deleteArchive(archive: IApplicationBinary, app: IApplication): Promise<void> {\n    const humanizedArchiveName = await this.getHumanizedAppName(archive);\n    try {\n      await this.modal.confirm(\n        gettext('Delete archive'),\n        this.translateService.instant(\n          gettext(\n            `You are about to delete archive \"{{ humanizedArchiveName }}\". Do you want to proceed?`\n          ),\n          { humanizedArchiveName }\n        ),\n        Status.DANGER,\n        { ok: gettext('Delete'), cancel: gettext('Cancel') }\n      );\n      await this.applicationService.binary(app).delete(archive.id);\n      this.alertService.success(gettext('Archive deleted.'));\n    } catch (ex) {\n      if (ex) {\n        this.alertService.danger(get(ex, 'data.message'), ex.data);\n      }\n      throw new Error('Cancelled');\n    }\n  }\n\n  async downloadArchive(app: IApplication, archive: IApplicationBinary): Promise<void> {\n    try {\n      const binary = await this.getBinary(app, archive);\n      const fileBinary = new Blob([binary], { type: 'application/x-zip-compressed' });\n      saveAs(fileBinary, archive.name);\n    } catch (e) {\n      // empty\n    }\n  }\n\n  async updateApp(app: IApplication, deleteOnFailure: boolean = false): Promise<IResult<IApplication>> {\n    try {\n      return await this.applicationService.update(app);\n    } catch (ex) {\n      this.alertService.addServerFailure(ex);\n      if (deleteOnFailure) {\n        await this.applicationService.delete(app.id);\n        throw new Error('Application creation failed.');\n      }\n    }\n  }\n\n  async deleteApp(app: IApplication): Promise<void> {\n    const humanizedAppName = await this.getHumanizedAppName(app);\n    await this.modal.confirm(\n      gettext('Delete application'),\n      this.translateService.instant(\n        gettext(\n          `You are about to delete application \"{{ humanizedAppName }}\". Do you want to proceed?`\n        ),\n        { humanizedAppName }\n      ),\n      Status.DANGER,\n      { ok: gettext('Delete'), cancel: gettext('Cancel') }\n    );\n    await this.applicationService.delete(app.id);\n    this.alertService.success(gettext('Application deleted.'));\n    this.appDeleted.emit(app);\n  }\n\n  async checkIfSubscribed(app: IApplication): Promise<boolean> {\n    const currentTenant = await this.tenantService.current();\n    const subscribedApps = currentTenant.data.applications.references;\n    return subscribedApps.some((application) => application.application.id === app.id);\n  }\n\n  async subscribeApp(app: IApplication): Promise<void> {\n    const currentTenant: ICurrentTenant = this.appStateService.currentTenant.value;\n    try {\n      await this.tenantService.subscribeApplication(currentTenant, app);\n      this.alertService.success(gettext('Successfully subscribed to application.'));\n    } catch (ex) {\n      this.alertService.addServerFailure(ex);\n    }\n  }\n\n  async unsubscribeApp(app: IApplication): Promise<void> {\n    const currentTenant: ICurrentTenant = this.appStateService.currentTenant.value;\n    try {\n      await this.tenantService.unsubscribeApplication(currentTenant, app);\n      this.alertService.success(gettext('Successfully unsubscribed from application.'));\n    } catch (ex) {\n      this.alertService.addServerFailure(ex);\n    }\n  }\n\n  async isValidAppType(archive: File, appType: ApplicationType): Promise<boolean> {\n    try {\n      const currentType = await this.getAppType(archive);\n      if (currentType !== appType) {\n        throw new Error(ERROR_TYPE.TYPE_VALIDATION);\n      } else {\n        this.progress.next(this.progress.value + 10);\n        return true;\n      }\n    } catch (ex) {\n      throw new Error(ERROR_TYPE.TYPE_VALIDATION);\n    }\n  }\n\n  async uploadArchiveToApp(archive: File, app: IApplication): Promise<IApplication> {\n    const binaryService = this.applicationService.binary(app);\n    this.xhr = binaryService.uploadWithProgressXhr(archive, this.updateUploadProgress.bind(this));\n\n    const binaryMo = await binaryService.getXMLHttpResponse(this.xhr);\n    return (await this.setAppActiveVersion(app, binaryMo.id as string)).data;\n  }\n\n  async createAppForArchive(archive, isPackageTypeArchive: boolean = false): Promise<IApplication> {\n    let isPackage: boolean = false;\n    const appType = await this.getAppType(archive);\n    let appModel: any = {};\n\n    if (appType === ApplicationType.HOSTED) {\n      try {\n        appModel = await this.getCumulocityJson(archive).toPromise();\n        isPackage = appModel.isPackage;\n      } catch (e) {\n        // do nothing, we allow having HOSTED applications without the manifest file\n      }\n    }\n    const name = this.getBaseNameFromArchiveOrAppModel(archive, appType, appModel);\n    const clearedName = this.removeForbiddenCharacters(name);\n    const key = this.getAppKey(appModel, clearedName);\n    const contextPath = this.getContextPath(appModel, name);\n\n    const appToSave = {\n      resourcesUrl: '/',\n      type: appType,\n      name,\n      key,\n      contextPath\n    };\n\n    if (isPackageTypeArchive && !isPackage) {\n      throw new Error(ERROR_TYPE.INVALID_PACKAGE);\n    } else if (!isPackageTypeArchive && isPackage) {\n      throw new Error(ERROR_TYPE.INVALID_APPLICATION);\n    }\n    return (\n      await this.applicationService.create({\n        ...appToSave,\n        manifest: { isPackage } as unknown as IManifest\n      })\n    ).data;\n  }\n\n  async reactivateArchive(app: IApplication): Promise<void> {\n    try {\n      await this.applicationService.reactivateArchive(app.id);\n      this.alertService.success(gettext('Application reactivated.'));\n    } catch (ex) {\n      this.alertService.addServerFailure(ex);\n    }\n  }\n\n  async removeOldestArchive(app: IApplication, archives: IApplicationBinary[]): Promise<void> {\n    try {\n      await this.modal.confirm(\n        gettext('Delete oldest archive and continue'),\n        gettext(\n          'Up to 6 archives can be saved in the platform. If you upload a new archive, the oldest archive that is not active will be deleted. Do you want to proceed?'\n        ),\n        Status.INFO,\n        { ok: gettext('Delete and continue') }\n      );\n      const archiveToDelete = archives[archives.length - 2];\n      await this.applicationService.binary(app).delete(archiveToDelete.id);\n      this.alertService.success(gettext('Archive deleted.'));\n    } catch (ex) {\n      this.alertService.addServerFailure(ex);\n    }\n  }\n\n  getAppState(app: IApplication): ApplicationState {\n    if (!this.isOwner(app)) {\n      return APP_STATE.SUBSCRIBED;\n    } else if (this.isUnpacked(app)) {\n      return APP_STATE.UNPACKED;\n    } else if (app.type === ApplicationType.EXTERNAL) {\n      return APP_STATE.EXTERNAL;\n    } else if (this.isApplicationPackage(app)) {\n      return APP_STATE.PACKAGE_APP;\n    } else if (this.isPluginsPackage(app)) {\n      return APP_STATE.PACKAGE_PLUGIN;\n    }\n    return APP_STATE.CUSTOM;\n  }\n\n  isApplicationPackage(app: IApplication): boolean {\n    return this.isPackage(app) && app.manifest.package === 'application';\n  }\n\n  isPluginsPackage(app: IApplication): boolean {\n    return this.isPackage(app) && app.manifest.package === 'plugin';\n  }\n\n  isUnpacked(app: IApplication): boolean {\n    return !!app.manifest?.source;\n  }\n\n  hasExports(app: IApplication): boolean {\n    return !!app.manifest?.exports?.length;\n  }\n\n  isApplication(app: IApplication): boolean {\n    return (\n      app.type !== ApplicationType.MICROSERVICE && !this.isFeature(app) && !this.isPackage(app)\n    );\n  }\n\n  isCustomMicroservice(app: IApplication) {\n    return this.isOwner(app) && app.type === ApplicationType.MICROSERVICE;\n  }\n\n  async isOverwrittenByCustomApp(app: IApplication): Promise<boolean> {\n    if (!this.appsGroupedByContextPath) {\n      await this.getWebApplications();\n    }\n    return (\n      app.contextPath &&\n      this.appsGroupedByContextPath[app.contextPath].length === 2 &&\n      !this.isOwner(app)\n    );\n  }\n\n  private getAppKey(appModel: IApplication, name: string): string {\n    let key = appModel?.key;\n    if (!key) {\n      key = `${kebabCase(name)}-key`;\n    }\n    return key;\n  }\n\n  private getContextPath(appModel: IApplication, name: string): string {\n    return appModel?.contextPath || name.toLowerCase();\n  }\n\n  private removeForbiddenCharacters(str: string): string {\n    return str.replace(/[^a-zA-Z0-9-_]/g, '');\n  }\n\n  private isCurrentApp(app: IApplication): boolean {\n    const currentApp = this.appStateService.state.app;\n    return currentApp.contextPath === app.contextPath;\n  }\n\n  private getCumulocityJson(archive: File): Observable<any> {\n    return this.zipService.getJsonData(archive, {\n      filename: CUMULOCITY_JSON\n    });\n  }\n\n  private getAppType(archive: File): Promise<ApplicationType> {\n    return this.getCumulocityJson(archive)\n      .toPromise()\n      .then(\n        (data) =>\n          get(data, 'type') ||\n          (get(data, 'apiVersion') ? ApplicationType.MICROSERVICE : ApplicationType.HOSTED)\n      )\n      .catch(() => ApplicationType.HOSTED);\n  }\n\n  private async getBinary(app: IApplication, archive: IApplicationBinary): Promise<ArrayBuffer> {\n    let binary;\n    try {\n      const res = await this.applicationService.binary(app).downloadArchive(archive.id);\n      binary = await res.arrayBuffer();\n    } catch (ex) {\n      const msg = gettext('Could not get the binary.');\n      this.alertService.danger(msg);\n    }\n    return binary;\n  }\n\n  private getBaseNameFromArchiveOrAppModel(\n    archive: any,\n    appType: ApplicationType,\n    appModel?: IApplication\n  ): string {\n    let baseName = appModel?.name || archive.name.replace(/\\.zip$/i, '');\n    if (appType === 'MICROSERVICE') {\n      baseName = baseName.replace(/-\\d+\\.\\d+\\.\\d+(-SNAPSHOT)?$/, '');\n    }\n    return baseName;\n  }\n\n  private checkIfAppNameKeyPathExists(existingApps: IApplication[], app: IApplication, retryNo: number): IApplication {\n    return existingApps.find(\n      (existingApp) =>\n        existingApp.name === app.name ||\n        existingApp.key === app.key ||\n        existingApp.contextPath === app.contextPath ||\n        existingApp.name === [app.name, retryNo].join('-') ||\n        existingApp.key === [app.key, retryNo].join('-') ||\n        existingApp.contextPath === [app.contextPath, retryNo].join('-')\n    );\n  }\n\n  private removeAppProperties(app: IApplication): IApplication {\n    const tempApp = cloneDeep(app);\n    const propertiesToRemove = ['id', 'owner', 'activeVersionId'];\n\n    propertiesToRemove.forEach(prop => delete tempApp[prop]);\n    return tempApp;\n  }\n}\n","import { Component } from '@angular/core';\nimport { ApplicationType, IApplication } from '@c8y/client';\nimport { gettext } from '@c8y/ngx-components';\nimport { EcosystemService } from '../../ecosystem.service';\n\n@Component({\n  selector: 'c8y-add-web-application',\n  template: `<c8y-add-application\n    [headerText]=\"headerText\"\n    [headerIcon]=\"'upload'\"\n    [successText]=\"successText\"\n    [createApplicationHandler]=\"createApplicationHandler\"\n    [uploadApplicationHandler]=\"uploadApplicationHandler\"\n    [canGoBack]=\"true\"\n  ></c8y-add-application>`\n})\nexport class AddWebApplicationComponent {\n  headerText: string = gettext('Upload web application');\n  successText: string = gettext('Application created');\n\n  constructor(private ecosystemService: EcosystemService) {}\n\n  createApplicationHandler = (f: File) => this.createApplication(f);\n  uploadApplicationHandler = (f: File, app: IApplication) => this.uploadApplication(f, app);\n\n  async createApplication(file: File): Promise<IApplication> {\n    await this.ecosystemService.isValidAppType(file, ApplicationType.HOSTED);\n    return this.ecosystemService.createAppForArchive(file);\n  }\n\n  async uploadApplication(file: File, app: IApplication): Promise<IApplication> {\n    return this.ecosystemService.uploadArchiveToApp(file, app);\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { IApplication } from '@c8y/client';\n\n@Component({\n  selector: 'c8y-application-properties-form',\n  templateUrl: './application-properties-form.component.html'\n})\nexport class ApplicationPropertiesFormComponent implements OnInit {\n  formGroup: FormGroup;\n  @Input() application: IApplication;\n  @Input() isPackage: boolean;\n\n  constructor(private formBuilder: FormBuilder) {}\n\n  async ngOnInit() {\n    this.initForm();\n    this.setForm(this.application);\n  }\n\n  private initForm() {\n    this.formGroup = this.formBuilder.group({\n      name: [Validators.required, Validators.maxLength(120)],\n      key: [Validators.required, Validators.maxLength(120)],\n      contextPath: [Validators.required, Validators.maxLength(120)]\n    });\n  }\n\n  private setForm(applicationConfig: IApplication) {\n    this.formGroup.patchValue({ ...applicationConfig });\n  }\n}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ApplicationService, IApplication } from '@c8y/client';\nimport { WizardComponent } from '@c8y/ngx-components';\nimport { EcosystemService } from '../../ecosystem.service';\nimport { ApplicationPropertiesFormComponent } from '../../shared/application-properties-form.component';\n\n@Component({\n  selector: 'c8y-install-from-package',\n  templateUrl: './install-from-package.component.html'\n})\nexport class InstallFromPackageComponent implements OnInit {\n  newAppConfig: IApplication;\n  selectedPackage: IApplication;\n  packages: IApplication[];\n  inProgress: boolean;\n  deployedWithSuccess: boolean = false;\n  isDeployed: boolean = false;\n\n  @ViewChild(ApplicationPropertiesFormComponent)\n  applicationPropertiesForm: ApplicationPropertiesFormComponent;\n\n  constructor(\n    private ecosystemService: EcosystemService,\n    private applicationService: ApplicationService,\n    private wizardComponent: WizardComponent\n  ) {}\n\n  async ngOnInit() {\n    this.loadPackages();\n  }\n\n  back() {\n    this.wizardComponent.reset();\n  }\n\n  cancel() {\n    this.wizardComponent.close();\n  }\n\n  async save() {\n    const formGroupValue = this.applicationPropertiesForm.formGroup.getRawValue();\n    this.inProgress = true;\n\n    const { data: clonedPkg } = await this.applicationService.clone(this.selectedPackage);\n    const config = this.ecosystemService.createConfig(clonedPkg, formGroupValue);\n\n    try {\n      const { data: updatedApp } = await this.ecosystemService.updateApp(config, true);\n\n      if (updatedApp) {\n        await this.ecosystemService.updateAppManifest(updatedApp, this.selectedPackage);\n      }\n      this.deployedWithSuccess = true;\n    } catch (error) {\n      this.inProgress = false;\n      await this.applicationService.delete(clonedPkg.id);\n    }\n    this.markAsDeployed();\n  }\n\n  async selectPackage(selectedPackage: IApplication) {\n    const apps = await this.ecosystemService.getWebApplications();\n    this.newAppConfig = this.ecosystemService.getUniqueAppConfig(selectedPackage, apps);\n    this.selectedPackage = selectedPackage;\n  }\n  /* The 'select package version' option will be added later when BE support for multiple app versions has been implemented. MTM-40278\n  // onSelectedArchive(archive) {\n  //   this.formGroup.controls['packageVersion'].setValue(archive.name);\n  // } */\n\n  private markAsDeployed() {\n    this.isDeployed = true;\n    this.inProgress = false;\n  }\n\n  private async loadPackages(): Promise<void> {\n    const applications = await this.ecosystemService.getApplications();\n    this.packages = applications.data.filter((app) =>\n      this.ecosystemService.isApplicationPackage(app)\n    );\n  }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { IApplication } from '@c8y/client';\nimport { C8yStepper, WizardComponent } from '@c8y/ngx-components';\nimport { ApplicationState } from '../../../ecosystem.model';\nimport { EcosystemService } from '../../../ecosystem.service';\n\n@Component({\n  selector: 'c8y-duplicate-application-list',\n  templateUrl: './duplicate-application-list.component.html'\n})\nexport class DuplicateApplicationListComponent {\n  @Input() stepper: C8yStepper;\n  @Input() existingApps: IApplication[];\n  @Output() onSelectedApp = new EventEmitter<IApplication>();\n  appState: ApplicationState;\n\n  constructor(\n    public ecosystemService: EcosystemService,\n    private wizardComponent: WizardComponent\n  ) {}\n\n  select(selectedApp: IApplication) {\n    this.onSelectedApp.emit(selectedApp);\n    this.stepper.next();\n  }\n\n  cancel() {\n    this.wizardComponent.close();\n  }\n\n  back() {\n    this.wizardComponent.reset();\n  }\n}\n","import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';\nimport { ApplicationService, IApplication } from '@c8y/client';\nimport { C8yStepper } from '@c8y/ngx-components';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\nimport { BehaviorSubject } from 'rxjs';\nimport { EcosystemService } from '../../../ecosystem.service';\nimport { ApplicationPropertiesFormComponent } from '../../../shared/application-properties-form.component';\n\n@Component({\n  selector: 'c8y-duplicate-application-properties',\n  templateUrl: './duplicate-application-properties.component.html'\n})\nexport class DuplicateApplicationPropertiesComponent {\n  @Input() stepper: C8yStepper;\n  @Input() existingApps: IApplication[];\n  @Input() selectedApp: BehaviorSubject<IApplication>;\n  @Output() duplicatedApp = new EventEmitter<IApplication>();\n  @ViewChild(ApplicationPropertiesFormComponent)\n  applicationPropertiesForm: ApplicationPropertiesFormComponent;\n  newAppConfig: IApplication;\n\n  inProgress: boolean = false;\n\n  constructor(\n    private bsModalRef: BsModalRef,\n    private ecosystemService: EcosystemService,\n    private applicationService: ApplicationService\n  ) {}\n\n  ngOnInit() {\n    this.newAppConfig = this.ecosystemService.getUniqueAppConfig(\n      this.selectedApp.value,\n      this.existingApps\n    );\n  }\n\n  async duplicateApp() {\n    const formGroupValue = this.applicationPropertiesForm.formGroup.getRawValue();\n    this.inProgress = true;\n    const clonedApp = (await this.applicationService.clone(this.selectedApp.value)).data;\n\n    Object.assign(clonedApp, formGroupValue);\n    delete clonedApp.type;\n\n    await this.updateApp(clonedApp);\n    this.inProgress = false;\n  }\n\n  cancel() {\n    this.bsModalRef.hide();\n  }\n\n  back() {\n    this.stepper.previous();\n  }\n\n  private async updateApp(clonedAppConfig: Partial<IApplication>) {\n    try {\n      const app = (await this.ecosystemService.updateApp(clonedAppConfig, true)).data;\n      this.duplicatedApp.emit(app);\n      this.stepper.next();\n    } catch (err) {\n      this.inProgress = false;\n    }\n  }\n}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ApplicationService, IApplication } from '@c8y/client';\nimport { C8yStepper, WizardComponent } from '@c8y/ngx-components';\nimport { BehaviorSubject, Subject } from 'rxjs';\nimport { EcosystemService } from './../../ecosystem.service';\n\n@Component({\n  selector: 'c8y-duplicate-application',\n  templateUrl: './duplicate-application.component.html'\n})\nexport class DuplicateApplicationComponent implements OnInit {\n  @ViewChild(C8yStepper, { static: true })\n  stepper: C8yStepper;\n  duplicatedApp: IApplication;\n  selectedApp: Subject<IApplication> = new BehaviorSubject<IApplication>(null);\n  existingApps: IApplication[] = [];\n\n  constructor(\n    private ecosystemService: EcosystemService,\n    private applicationService: ApplicationService,\n    private wizardComponent: WizardComponent\n  ) {}\n\n  async ngOnInit() {\n    this.existingApps = await this.ecosystemService.getWebApplications();\n  }\n\n  onSelectedApp(app: IApplication) {\n    this.selectedApp.next(app);\n  }\n\n  getHref(app: IApplication): string {\n    return this.applicationService.getHref(app);\n  }\n\n  done() {\n    this.wizardComponent.close();\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ApplicationService, ApplicationType, IApplication, IManifest } from '@c8y/client';\nimport { AlertService, WizardComponent } from '@c8y/ngx-components';\n\n@Component({\n  selector: 'c8y-add-external-application',\n  templateUrl: './add-external-application.component.html'\n})\nexport class AddExternalApplicationComponent implements OnInit {\n  formGroup: FormGroup;\n  createdApp: IApplication;\n\n  constructor(\n    private applicationService: ApplicationService,\n    private formBuilder: FormBuilder,\n    private alertService: AlertService,\n    private wizardComponent: WizardComponent\n  ) {}\n\n  ngOnInit() {\n    this.initForm();\n  }\n\n  back() {\n    this.wizardComponent.reset();\n  }\n\n  cancel() {\n    this.wizardComponent.close();\n  }\n\n  done() {\n    this.wizardComponent.close();\n  }\n\n  async save(app) {\n    const appToSave = {\n      manifest: {} as IManifest,\n      externalUrl: app.externalUrl,\n      type: ApplicationType.EXTERNAL,\n      name: app.name,\n      key: app.key\n    };\n    try {\n      this.createdApp = await this.applicationService.create(appToSave);\n    } catch (ex) {\n      this.alertService.addServerFailure(ex);\n    }\n  }\n\n  private initForm(): void {\n    this.formGroup = this.formBuilder.group({\n      name: ['', [Validators.required, Validators.maxLength(120)]],\n      key: ['', [Validators.required, Validators.maxLength(120)]],\n      externalUrl: ['', Validators.required]\n    });\n  }\n}\n","import { Component } from '@angular/core';\nimport { gettext, ModalService, Status } from '@c8y/ngx-components';\nimport { ApplicationType, IApplication, TenantService } from '@c8y/client';\nimport { EcosystemService } from '../ecosystem.service';\nimport { ERROR_TYPE } from '../ecosystem.model';\n\n@Component({\n  selector: 'c8y-add-microservice',\n  template: `<c8y-add-application\n    [headerText]=\"headerText\"\n    [headerIcon]=\"'microchip'\"\n    [successText]=\"successText\"\n    [createApplicationHandler]=\"createMicroserviceApplicationHandler\"\n    [uploadApplicationHandler]=\"uploadMicroserviceHandler\"\n  ></c8y-add-application>`\n})\nexport class AddMicroserviceComponent {\n  headerText: string = gettext('Add microservice');\n  successText: string = gettext('Microservice created');\n\n  constructor(\n    private ecosystemService: EcosystemService,\n    private modal: ModalService,\n    private tenantService: TenantService\n  ) {}\n\n  createMicroserviceApplicationHandler = (f: File) => this.createMicroserviceApplication(f);\n  uploadMicroserviceHandler = (f: File, app: IApplication) => this.uploadMicroservice(f, app);\n\n  async createMicroserviceApplication(file: File): Promise<IApplication> {\n    await this.ecosystemService.isValidAppType(file, ApplicationType.MICROSERVICE);\n    return this.ecosystemService.createAppForArchive(file);\n  }\n\n  async uploadMicroservice(file: File, microservice: IApplication): Promise<void> {\n    const subscribeToCurrentTenant = await this.askIfActivationAfterUploadNeeded();\n    await this.ecosystemService.uploadArchiveToApp(file, microservice);\n    await this.subscribeMicroservice(microservice, subscribeToCurrentTenant);\n  }\n\n  private async askIfActivationAfterUploadNeeded(): Promise<boolean> {\n    try {\n      await this.modal.confirm(\n        gettext('Subscribe to microservice'),\n        gettext(\n          'You are about to subscribe to the microservice after upload. Do you want to subscribe to it?'\n        ),\n        Status.INFO,\n        { ok: gettext('Subscribe'), cancel: gettext(\"Don't subscribe\") }\n      );\n      return true;\n    } catch (ex) {\n      return false;\n    }\n  }\n\n  private async subscribeMicroservice(\n    app: IApplication,\n    subscribeToCurrentTenant: boolean\n  ): Promise<any> {\n    const tenant = (await this.tenantService.current()).data;\n    const applications = tenant.applications.references;\n\n    const isSubscribed = applications.some(({ application }) => application.id === app.id);\n    if (!isSubscribed && subscribeToCurrentTenant) {\n      try {\n        return await this.tenantService.subscribeApplication(tenant, app);\n      } catch (res) {\n        if (res.status === 409) {\n          throw Error(ERROR_TYPE.ALREADY_SUBSCRIBED);\n        }\n      }\n    } else if (isSubscribed && !subscribeToCurrentTenant) {\n      return this.tenantService.unsubscribeApplication(tenant, app);\n    }\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { IApplication } from '@c8y/client';\nimport { WizardConfig, WizardService } from '@c8y/ngx-components';\nimport { ModalOptions } from 'ngx-bootstrap/modal';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { shareReplay, switchMap, tap } from 'rxjs/operators';\nimport { EcosystemService } from './../../ecosystem.service';\n\n@Component({\n  selector: 'c8y-application-list',\n  templateUrl: './application-list.component.html'\n})\nexport class ApplicationListComponent implements OnInit {\n  reloading: boolean = false;\n  reload$: BehaviorSubject<void> = new BehaviorSubject(null);\n\n  apps$: Observable<IApplication> = this.reload$.pipe(\n    tap(() => (this.reloading = true)),\n    switchMap(() => this.ecosystemService.getWebApplications()),\n    tap(() => (this.reloading = false)),\n    shareReplay()\n  );\n\n  listClass: string;\n\n  constructor(private ecosystemService: EcosystemService, private wizardService: WizardService) {}\n\n  ngOnInit() {\n    this.loadApplications();\n  }\n\n  loadApplications() {\n    this.reload$.next();\n  }\n\n  addApplication() {\n    const wizardConfig: WizardConfig = {\n      headerText: 'Add Application',\n      headerIcon: 'c8y-atom'\n    };\n\n    const initialState: any = {\n      wizardConfig,\n      id: 'uploadApplication'\n    };\n\n    const modalOptions: ModalOptions = { initialState };\n\n    const modalRef = this.wizardService.show(modalOptions);\n    modalRef.content.onClose.subscribe(() => {\n      this.loadApplications();\n    });\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { ModalService, gettext, Status } from '@c8y/ngx-components';\nimport { ApplicationPlugin } from '../../ecosystem.model';\nimport { BehaviorSubject, combineLatest, Observable } from 'rxjs';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'c8y-install-plugin',\n  templateUrl: './install-plugin.component.html'\n})\nexport class InstallPluginComponent implements OnInit {\n  @Input() plugins$: BehaviorSubject<ApplicationPlugin[]>;\n  filterTerm$: BehaviorSubject<string> = new BehaviorSubject('');\n  filteredPlugins$: Observable<ApplicationPlugin[]> = new BehaviorSubject([]);\n  selectedPlugins: string[] = [];\n  result: Promise<void> = new Promise((resolve, reject) => {\n    this._install = resolve;\n    this._cancel = reject;\n  });\n  private _install;\n  private _cancel;\n\n  constructor(private bsModalRef: BsModalRef, private modal: ModalService) {}\n\n  ngOnInit() {\n    this.filteredPlugins$ = combineLatest(this.plugins$, this.filterTerm$).pipe(\n      map(([plugins, filterTerm]) =>\n        filterTerm.trim().length === 0\n          ? plugins\n          : plugins.filter((plugin: ApplicationPlugin) =>\n              this.filterContainString(plugin.name, filterTerm)\n            )\n      )\n    );\n  }\n\n  cancel() {\n    this.bsModalRef.hide();\n    this._cancel();\n  }\n\n  async install() {\n    await this.modal.confirm(\n      gettext('Install plugins'),\n      gettext(\n        'The operation may take several minutes. During this time the application may be unavailable. Do you want to proceed?'\n      ),\n      Status.INFO,\n      { ok: gettext('Continue') }\n    );\n    this._install(this.selectedPlugins);\n    this.bsModalRef.hide();\n  }\n\n  private filterContainString(name: string, filterTerm: string) {\n    const term = filterTerm.toLowerCase().trim();\n    return name && name.toLowerCase().indexOf(term) > -1;\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { BehaviorSubject, combineLatest, Observable } from 'rxjs';\nimport { ApplicationRemotePlugins, IApplication, IApplicationBinary, IManifest } from '@c8y/client';\nimport { ActivatedRoute } from '@angular/router';\nimport { EcosystemService } from '../../ecosystem.service';\nimport { ApplicationPlugin } from '../../ecosystem.model';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { InstallPluginComponent } from './install-plugin.component';\nimport { AlertService, gettext, ModalService, PluginsService, Status } from '@c8y/ngx-components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { map, shareReplay } from 'rxjs/operators';\n\n@Component({\n  selector: 'c8y-app-plugins',\n  templateUrl: './application-plugins.component.html'\n})\nexport class ApplicationPluginsComponent implements OnInit {\n  exportedPlugins$: BehaviorSubject<ApplicationPlugin[]> = new BehaviorSubject([]);\n  remotePlugins$: BehaviorSubject<ApplicationRemotePlugins> = new BehaviorSubject({});\n  allAvailablePlugins$: BehaviorSubject<ApplicationPlugin[]> = new BehaviorSubject([]);\n\n  installedPlugins$: Observable<ApplicationPlugin[]> = combineLatest([\n    this.remotePlugins$.pipe(map((remotes) => this.getRemotePluginsList(remotes))),\n    this.allAvailablePlugins$\n  ]).pipe(\n    map(([remotePlugins, allPlugins]) => allPlugins.filter((p) => remotePlugins.includes(p.id))),\n    shareReplay(1)\n  );\n  app: IApplication;\n  isLoading: boolean;\n  pluginsToDelete: string[] = [];\n  archives: IApplicationBinary[] = [];\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private ecosystemService: EcosystemService,\n    private bsModalService: BsModalService,\n    private modal: ModalService,\n    private translateService: TranslateService,\n    private pluginsService: PluginsService,\n    private alertService: AlertService\n  ) {}\n\n  async ngOnInit() {\n    const { id } = this.activatedRoute.snapshot.parent.data.contextData;\n    this.app = await this.ecosystemService.getApplication(id);\n    this.archives = await this.ecosystemService.listArchives(this.app.id);\n    this.archives.sort((a, b) => {\n      return (new Date(b.created) as any) - (new Date(a.created) as any);\n    });\n    const manifest: Partial<IManifest> = this.app.manifest;\n    if (manifest) {\n      const exports = manifest.exports || [];\n      this.exportedPlugins$.next(this.extendPluginList(exports, this.app.contextPath));\n      const remotes = manifest.remotes || {};\n      this.remotePlugins$.next(remotes);\n    }\n    this.allAvailablePlugins$.next(await this.getAllPlugins());\n  }\n\n  async installPlugins() {\n    const initialState: any = {\n      plugins$: combineLatest([\n        this.allAvailablePlugins$,\n        this.installedPlugins$.pipe(map((plugins) => plugins.map((p) => p.id))),\n        this.exportedPlugins$.pipe(map((plugins) => plugins.map((p) => p.id)))\n      ]).pipe(\n        map(([allPlugins, installedPlugins, exportedPluginNames]) => {\n          const plugins = [];\n          allPlugins\n            .filter((p) => !exportedPluginNames.includes(p.id))\n            .forEach((p) => plugins.push({ ...p, installed: !!installedPlugins.includes(p.id) }));\n          return plugins;\n        }),\n        shareReplay(1)\n      )\n    };\n\n    try {\n      const pluginsToAdd: string[] = (await (\n        this.bsModalService.show(InstallPluginComponent, {\n          class: 'modal-md',\n          initialState,\n          ignoreBackdropClick: true\n        }).content as InstallPluginComponent\n      ).result) as any as string[];\n\n      const currentRemotes = { ...this.remotePlugins$.value };\n      pluginsToAdd.forEach((pluginId) => {\n        const { contextPath, name } = this.parsePluginId(pluginId);\n        (currentRemotes[contextPath] = currentRemotes[contextPath] || []).push(name);\n      });\n      if (this.archives.length === 6) {\n        await this.ecosystemService.removeOldestArchive(this.app, this.archives);\n      }\n      this.updateApplicationRemotes(currentRemotes);\n    } catch (ex) {\n      // intended empty\n    }\n  }\n\n  async removePlugins() {\n    const humanizedAppName = await this.ecosystemService.getHumanizedAppName(this.app);\n    try {\n      await this.modal.confirm(\n        gettext('Remove plugins'),\n        this.translateService.instant(\n          gettext(\n            `You are about to remove plugins from application \"{{ humanizedAppName }}\". The operation may take several minutes. During this time the application may be unavailable. Do you want to proceed?`\n          ),\n          { humanizedAppName }\n        ),\n        Status.DANGER,\n        {\n          ok: gettext('Remove'),\n          cancel: gettext('Cancel')\n        }\n      );\n\n      const remotes = { ...this.remotePlugins$.value };\n      this.pluginsToDelete.forEach((pluginId) => {\n        const { contextPath, name } = this.parsePluginId(pluginId);\n        remotes[contextPath] = remotes[contextPath].filter((p) => p !== name);\n      });\n      this.updateApplicationRemotes(remotes);\n    } catch (ex) {\n      // do nothing\n    }\n  }\n\n  private async getAllPlugins(): Promise<ApplicationPlugin[]> {\n    const plugins = [];\n    const packages = await this.ecosystemService.getPackageApplications();\n    const apps = [...packages, this.app];\n    apps.forEach((app) => {\n      const exports = (app.manifest && app.manifest.exports) || [];\n      plugins.push(...this.extendPluginList(exports, app.contextPath));\n    });\n    return plugins;\n  }\n\n  private async updateApplicationRemotes(remotes: ApplicationRemotePlugins): Promise<void> {\n    this.isLoading = true;\n    try {\n      await this.pluginsService.updateRemotesInCumulocityJson(this.app, remotes);\n      this.remotePlugins$.next(remotes);\n    } catch (ex) {\n      this.alertService.danger(ex);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private getRemotePluginsList(remotes: ApplicationRemotePlugins): string[] {\n    const importContextPaths = Object.keys(remotes);\n    const plugins = [];\n    importContextPaths.forEach((contextPath) => {\n      const moduleNames = remotes[contextPath];\n      plugins.push(...moduleNames.map((module) => this.createPluginId(contextPath, module)));\n    });\n    return plugins;\n  }\n\n  private extendPluginList(plugins: ApplicationPlugin[], contextPath: string): ApplicationPlugin[] {\n    const extendedPlugins = [];\n    plugins.map((p) => {\n      extendedPlugins.push({\n        ...p,\n        id: this.createPluginId(contextPath, p.name, p.module),\n        contextPath\n      });\n    });\n    return extendedPlugins;\n  }\n\n  private createPluginId(contextPath: string, pluginName: string, pluginModuleName?: string): string {\n    return `${contextPath}/${pluginModuleName || pluginName}`;\n  }\n\n  private parsePluginId(id: string): { contextPath: string; name: string } {\n    const [contextPath, name] = id.split('/');\n    return { contextPath, name };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\nimport { ApplicationType } from '@c8y/client';\nimport { EcosystemService } from '../../ecosystem.service';\n\n@Injectable()\nexport class ApplicationPluginsGuard implements CanActivate {\n  constructor(private ecosystemService: EcosystemService) {}\n\n  canActivate(route: ActivatedRouteSnapshot) {\n    const app = route.data.contextData || route.parent.data.contextData;\n    if (!app) {\n      return false;\n    }\n    return (\n      app.type === ApplicationType.HOSTED &&\n      this.ecosystemService.isOwner(app) &&\n      !this.ecosystemService.isPackage(app)\n    );\n  }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { ApplicationPlugin } from '../../ecosystem.model';\n\n@Component({\n  selector: 'c8y-plugin-list-item',\n  templateUrl: './plugin-list-item.component.html'\n})\nexport class PluginListItemComponent {\n  @Input() plugin: ApplicationPlugin;\n  @Input() selectable: boolean;\n  @Output() isItemSelected: EventEmitter<boolean> = new EventEmitter();\n\n  onChange(event) {\n    this.isItemSelected.next(event);\n  }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { ApplicationPlugin } from '../../ecosystem.model';\n\n@Component({\n  selector: 'c8y-plugin-list',\n  templateUrl: './plugin-list.component.html'\n})\nexport class PluginListComponent {\n  @Input() plugins$: BehaviorSubject<ApplicationPlugin[]>;\n  @Input() emptyListText: string = '';\n  @Input() selectable: boolean;\n  @Output() selectedItems: EventEmitter<string[]> = new EventEmitter();\n  selectedPlugins: object = {};\n\n  updateSelectedItems(value: boolean, name: string) {\n    this.selectedPlugins[name] = value;\n    this.selectedItems.emit(\n      Object.keys(this.selectedPlugins).filter((k) => this.selectedPlugins[k])\n    );\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { IApplication, IApplicationBinary } from '@c8y/client';\nimport { AlertService } from '@c8y/ngx-components';\nimport { BehaviorSubject } from 'rxjs';\nimport { EcosystemService } from '../ecosystem.service';\n\n@Component({\n  selector: 'c8y-activity-log',\n  templateUrl: './activity-log.component.html'\n})\nexport class ActivityLogComponent implements OnInit {\n  @Input() application: IApplication;\n  archives: IApplicationBinary[] = [];\n  toActivateVersionId: string;\n  last: IApplicationBinary;\n  isLoading: boolean;\n  canReactivate: boolean = false;\n\n  constructor(private ecosystemService: EcosystemService, private alertService: AlertService) {}\n\n  get uploadProgress(): BehaviorSubject<number> {\n    return this.ecosystemService.progress;\n  }\n\n  async ngOnInit() {\n    this.canReactivate = this.showReactivate();\n    this.refresh();\n  }\n\n  isActive(archive: IApplicationBinary): boolean {\n    return this.application.activeVersionId === archive.id;\n  }\n\n  toActivate(archive: IApplicationBinary): boolean {\n    return this.toActivateVersionId === archive.id;\n  }\n\n  checkIfLast(archive: IApplicationBinary): boolean {\n    return archive.id === this.last.id;\n  }\n\n  showReactivate(): boolean {\n    return this.ecosystemService.isApplication(this.application);\n  }\n\n  async setActive(archive): Promise<void> {\n    const id = archive.id || archive;\n    this.toActivateVersionId = id;\n    this.isLoading = true;\n    try {\n      this.application = (\n        await this.ecosystemService.setAppActiveVersion(this.application, id)\n      ).data;\n    } catch (ex) {\n      this.alertService.addServerFailure(ex);\n    }\n    this.isLoading = false;\n    this.refresh();\n  }\n\n  async deleteArchive(archive: IApplicationBinary): Promise<void> {\n    await this.ecosystemService.deleteArchive(archive, this.application);\n    this.refresh();\n  }\n\n  async downloadArchive(archive: IApplicationBinary): Promise<void> {\n    await this.ecosystemService.downloadArchive(this.application, archive);\n  }\n\n  async reactivateArchive(): Promise<void> {\n    await this.ecosystemService.reactivateArchive(this.application);\n  }\n\n  async onRefresh() {\n    await this.refresh();\n  }\n\n  private async refresh(): Promise<void> {\n    this.isLoading = true;\n    this.archives = await this.ecosystemService.listArchives(this.application.id);\n    this.archives.sort((a, b) => {\n      return (new Date(b.created) as any) - (new Date(a.created) as any);\n    });\n    this.last = this.archives[this.archives.length - 1];\n    this.isLoading = false;\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n  ApplicationService,\n  ApplicationType,\n  BillingMode,\n  IApplication,\n  IManagedObject,\n  InventoryService,\n  Isolation\n} from '@c8y/client';\nimport { packageProperties } from '../ecosystem.constants';\nimport { EcosystemService } from '../ecosystem.service';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { AlertService, gettext, PropertiesListItem, ViewContext } from '@c8y/ngx-components';\nimport { ApplicationState } from '../ecosystem.model';\n\nconst MICROSERVICES_BASE_PATH: string = '/microservices';\nconst APPLICATIONS_BASE_PATH: string = '/ecosystem';\n\n@Component({\n  selector: 'c8y-application-properties',\n  templateUrl: './application-properties.component.html'\n})\nexport class ApplicationPropertiesComponent implements OnInit {\n  formGroup: FormGroup;\n  application: IApplication;\n  binaryMo: IManagedObject;\n  singleTenant: boolean = false;\n  subscription: boolean = false;\n  canOpenInBrowser: boolean;\n  disableOpenInBrowser: boolean;\n  canDelete: boolean;\n  isOwner: boolean;\n  isSubscribed: boolean;\n  isPackage: boolean;\n  isMicroservice: boolean;\n  isFeature: boolean;\n  isExternal: boolean;\n  isUnpacked: boolean;\n  iconMap = {\n    HOSTED: 'cloud',\n    EXTERNAL: 'external-link-square',\n    MICROSERVICE: 'microchip'\n  };\n  appState: ApplicationState;\n  package: IApplication;\n  isLoading: boolean = true;\n  isActivityLogSupported: boolean;\n  isCustomMicroservice: boolean;\n\n  breadcrumbConfig: { icon: string; label: string; path: string };\n  packageProperties: PropertiesListItem[] = [...packageProperties];\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private ecosystemService: EcosystemService,\n    private router: Router,\n    private formBuilder: FormBuilder,\n    private applicationService: ApplicationService,\n    private alertService: AlertService,\n    private inventoryService: InventoryService\n  ) {}\n\n  async ngOnInit() {\n    await this.load();\n    this.isUnpacked = this.ecosystemService.isUnpacked(this.application);\n    this.isPackage = this.ecosystemService.isPackage(this.application);\n    this.isFeature = this.ecosystemService.isFeature(this.application);\n    this.isExternal = this.ecosystemService.isExternal(this.application);\n    this.isMicroservice = this.ecosystemService.isMicroservice(this.application);\n    this.appState = this.ecosystemService.getAppState(this.application);\n\n    if (this.isUnpacked) {\n      await this.resolveSourcePackage();\n    }\n\n    this.setBreadcrumbConifg();\n\n    if (this.isCustomMicroservice) {\n      this.loadBinaryMo();\n    }\n  }\n\n  async load() {\n    this.isLoading = true;\n    this.initForm();\n    await this.loadApplication();\n    this.isLoading = false;\n  }\n\n  onApplication(app: IApplication) {\n    if (app.manifest) {\n      this.singleTenant = app.manifest.isolation === Isolation.PER_TENANT;\n      this.subscription = app.manifest.billingMode === BillingMode.SUBSCRIPTION;\n    }\n  }\n\n  cancel() {\n    if (this.application.type === ApplicationType.MICROSERVICE) {\n      this.router.navigateByUrl(MICROSERVICES_BASE_PATH);\n    } else {\n      this.router.navigateByUrl(APPLICATIONS_BASE_PATH);\n    }\n  }\n\n  openApp(app) {\n    window.open(this.applicationService.getHref(app));\n  }\n\n  getPackage(entityOrId: string | number | IApplication) {\n    return this.applicationService.detail(entityOrId);\n  }\n\n  async delete() {\n    try {\n      await this.ecosystemService.deleteApp(this.application);\n      if (this.application.type === ApplicationType.MICROSERVICE) {\n        this.router.navigateByUrl(MICROSERVICES_BASE_PATH);\n      } else {\n        this.router.navigateByUrl(APPLICATIONS_BASE_PATH);\n      }\n    } catch (ex) {\n      if (ex) {\n        this.alertService.addServerFailure(ex);\n      }\n    }\n  }\n\n  async subscribe() {\n    await this.ecosystemService.subscribeApp(this.application);\n    this.loadApplication();\n  }\n\n  async unsubscribe() {\n    await this.ecosystemService.unsubscribeApp(this.application);\n    this.loadApplication();\n  }\n\n  async loadApplication() {\n    const { id } = this.activatedRoute.snapshot.parent.data.contextData;\n    this.application = await this.ecosystemService.getApplication(id);\n    if (this.application.type === ApplicationType.MICROSERVICE) {\n      this.formGroup.get('name').disable();\n    }\n    this.formGroup.patchValue({ ...this.application });\n    this.canOpenInBrowser = this.ecosystemService.canOpenAppInBrowser(this.application);\n    this.disableOpenInBrowser =\n      this.canOpenInBrowser &&\n      (await this.ecosystemService.isOverwrittenByCustomApp(this.application));\n    this.canDelete = this.ecosystemService.canDeleteApp(this.application);\n    this.isOwner = this.ecosystemService.isOwner(this.application);\n    this.isActivityLogSupported = this.isActivityLogSupportedByApp(this.application);\n    this.isCustomMicroservice = this.ecosystemService.isCustomMicroservice(this.application);\n    this.isSubscribed = await this.ecosystemService.checkIfSubscribed(this.application);\n    this.onApplication(this.application);\n  }\n\n  async save(app: IApplication) {\n    app.id = this.application.id;\n    try {\n      await this.ecosystemService.updateApp(app);\n      this.alertService.success(gettext('Application saved.'));\n      this.formGroup.reset();\n      this.loadApplication();\n    } catch (ex) {\n      // do nothing\n    }\n  }\n\n  onNewArchive() {\n    this.loadBinaryMo();\n  }\n\n  private async resolveSourcePackage() {\n    this.package = (await this.getPackage(this.application.manifest.source)).data;\n    if (this.package) {\n      this.packageProperties.push({\n        label: gettext('Source package'),\n        value: this.package.name,\n        type: 'link',\n        action: () =>\n          this.router.navigateByUrl(\n            ViewContext.Application.replace(':id', this.package.id.toString())\n          )\n      });\n    }\n  }\n\n  private initForm(): void {\n    this.formGroup = this.formBuilder.group({\n      id: [{ value: '' }],\n      name: [Validators.required, Validators.maxLength(120)],\n      key: [Validators.required, Validators.maxLength(120)],\n      contextPath: [Validators.required, Validators.maxLength(120)],\n      description: ['', Validators.maxLength(200)],\n      resourcesUrl: [Validators.required],\n      username: [Validators.required],\n      password: [Validators.required],\n      externalUrl: [Validators.required]\n    });\n  }\n\n  private isActivityLogSupportedByApp(app: IApplication): boolean {\n    return (\n      this.ecosystemService.isOwner(app) &&\n      app.type !== ApplicationType.MICROSERVICE &&\n      app.type !== ApplicationType.EXTERNAL\n    );\n  }\n\n  private setBreadcrumbConifg() {\n    this.breadcrumbConfig = {\n      icon: this.isMicroservice ? 'microchip' : this.isFeature ? 'tab' : 'c8y-modules',\n      label: this.isMicroservice\n        ? gettext('Microservices')\n        : this.isFeature\n        ? gettext('Features')\n        : gettext('All applications'),\n      path: this.isMicroservice\n        ? 'microservices'\n        : this.isFeature\n        ? 'ecosystem/features'\n        : 'ecosystem/applications'\n    };\n  }\n\n  private async loadBinaryMo() {\n    this.binaryMo = (await this.inventoryService.detail(this.application.activeVersionId)).data;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { gettext, NavigatorNode, NavigatorNodeFactory, Permissions } from '@c8y/ngx-components';\n\n@Injectable()\nexport class EcosystemNavigationFactory implements NavigatorNodeFactory {\n  private navs: NavigatorNode[] = [];\n  private showNavigatorNodes: boolean;\n\n  constructor(private permissions: Permissions) {\n    this.showNavigatorNodes = this.permissions.hasAnyRole([\n      'ROLE_APPLICATION_MANAGEMENT_READ',\n      'ROLE_APPLICATION_MANAGEMENT_ADMIN'\n    ]);\n  }\n\n  async get() {\n/*\nThe NavigatorNodes are added in AngularJS code to keep the Quick links widget working.\nAfter the Quick links widget is migrated to Angular, the logic of adding the NavigatorNodes can be migrated as well.\n    if (this.navs.length === 0 && this.showNavigatorNodes) {\n      const applicationsNode: NavigatorNode = new NavigatorNode({\n        label: gettext('Applications'),\n        icon: 'c8y-modules',\n        path: '/ecosystem',\n        priority: 300,\n        routerLinkExact: false\n      });\n\n      const microservicesNode = new NavigatorNode({\n        label: gettext('Microservices'),\n        icon: 'microchip',\n        path: '/microservices',\n        priority: 200,\n        routerLinkExact: false\n      });\n\n      this.navs.push(\n        new NavigatorNode({\n          label: gettext('Ecosystem'),\n          icon: 'c8y-atom',\n          priority: 3200,\n          children: [applicationsNode, microservicesNode]\n        })\n      );\n    }\n*/\n    return this.navs;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, RouterStateSnapshot } from '@angular/router';\nimport { OptionsService } from '@c8y/ngx-components';\n\n@Injectable()\nexport class EcosystemGuard implements CanActivate {\n  constructor(private optionsService: OptionsService) {}\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\n    return this.isFeatureEnabled();\n  }\n\n  isFeatureEnabled() {\n    return Boolean(this.optionsService.get('beta', false));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { gettext, Tab, TabFactory } from '@c8y/ngx-components';\nimport { Router } from '@angular/router';\nimport { EcosystemGuard } from './ecosystem.guard';\n\n@Injectable()\nexport class EcosystemTabs implements TabFactory {\n  constructor(public router: Router, private ecosystemGuard: EcosystemGuard) {}\n\n  get(): Tab[] {\n    const tabs: Tab[] = [];\n    if (\n      this.router.url === '/ecosystem/applications' ||\n      this.router.url === '/ecosystem/package-list' ||\n      this.router.url === '/ecosystem/features'\n    ) {\n      tabs.push({\n        icon: 'c8y-modules',\n        priority: 1000,\n        label: gettext('All applications'),\n        path: 'ecosystem/applications'\n      } as Tab);\n\n      if (this.ecosystemGuard.isFeatureEnabled()) {\n        tabs.push({\n          icon: 'big-parcel',\n          priority: 999,\n          label: gettext('Packages'),\n          path: 'ecosystem/package-list'\n        } as Tab);\n      }\n\n      tabs.push({\n        icon: 'tab',\n        priority: 998,\n        label: gettext('Features'),\n        path: '/ecosystem/features'\n      } as Tab);\n    }\n    return tabs;\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { IApplication, IResultList } from '@c8y/client';\nimport { WizardService } from '@c8y/ngx-components';\nimport { ModalOptions } from 'ngx-bootstrap/modal';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { shareReplay, switchMap, tap } from 'rxjs/operators';\nimport { EcosystemService } from '../ecosystem.service';\n\n@Component({\n  selector: 'c8y-microservice-list',\n  templateUrl: './microservice-list.component.html'\n})\nexport class MicroserviceListComponent implements OnInit {\n  reloading: boolean = false;\n  reload$: BehaviorSubject<void> = new BehaviorSubject(null);\n  microservices$: Observable<IApplication> = this.reload$.pipe(\n    tap(() => (this.reloading = true)),\n    switchMap(() => this.ecosystemService.getMicroservices()),\n    tap(() => (this.reloading = false)),\n    shareReplay()\n  );\n  isMicroserviceHostingAllowed$: Observable<boolean> = this.reload$.pipe(\n    switchMap(() => this.ecosystemService.isMicroserviceHostingAllowed()),\n    shareReplay()\n  );\n  listClass: string;\n\n  constructor(\n    private ecosystemService: EcosystemService,\n    private wizardService: WizardService\n  ) {}\n\n  ngOnInit() {\n    this.loadMicroservices();\n  }\n\n  loadMicroservices() {\n    this.reload$.next();\n  }\n\n  addMicroservice() {\n    const initialState: any = {\n      id: 'uploadMicroservice'\n    };\n    const modalOptions: ModalOptions = { initialState };\n\n    const modalRef = this.wizardService.show(modalOptions);\n    modalRef.content.onClose.subscribe(() => {\n      this.loadMicroservices();\n    });\n  }\n}\n","import { Component } from '@angular/core';\nimport { IApplication } from '@c8y/client';\nimport { WizardService } from '@c8y/ngx-components';\nimport { ModalOptions } from 'ngx-bootstrap/modal';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { shareReplay, switchMap, tap } from 'rxjs/operators';\nimport { EcosystemService } from '../../ecosystem.service';\n\n@Component({\n  selector: 'c8y-packages-list',\n  templateUrl: './packages-list.component.html'\n})\nexport class PackagesListComponent {\n  reloading: boolean = false;\n  reload$: BehaviorSubject<void> = new BehaviorSubject(null);\n\n  packages$: Observable<IApplication> = this.reload$.pipe(\n    tap(() => (this.reloading = true)),\n    switchMap(() => this.ecosystemService.getPackageApplications()),\n    tap(() => (this.reloading = false)),\n    shareReplay()\n  );\n  listClass: string;\n\n  constructor(private ecosystemService: EcosystemService, private wizardService: WizardService) {}\n\n  ngOnInit() {\n    this.loadPackages();\n  }\n\n  loadPackages() {\n    this.reload$.next();\n  }\n\n  addPackage() {\n    const initialState: any = {\n      id: 'uploadPackage'\n    };\n    const modalOptions: ModalOptions = { initialState };\n\n    const modalRef = this.wizardService.show(modalOptions);\n    modalRef.content.onClose.subscribe(() => {\n      this.loadPackages();\n    });\n  }\n}\n","import { Component } from '@angular/core';\nimport { ApplicationType, IApplication } from '@c8y/client';\nimport { EcosystemService } from '../ecosystem.service';\nimport { gettext } from '@c8y/ngx-components';\n\n@Component({\n  selector: 'c8y-add-package',\n  template: `<c8y-add-application\n    [headerText]=\"headerText\"\n    [headerIcon]=\"'big-parcel'\"\n    [successText]=\"successText\"\n    [createApplicationHandler]=\"createPackageAppHandler\"\n    [uploadApplicationHandler]=\"uploadPackageHandler\"\n  ></c8y-add-application>`\n})\nexport class AddPackageComponent {\n  headerText: string = gettext('Add package');\n  successText: string = gettext('Package created');\n\n  constructor(private ecosystemService: EcosystemService) {}\n\n  createPackageAppHandler = (f: File) => this.createPackageApp(f);\n  uploadPackageHandler = (f: File, app: IApplication) => this.uploadPackage(f, app);\n\n  async createPackageApp(file: File): Promise<IApplication> {\n    await this.ecosystemService.isValidAppType(file, ApplicationType.HOSTED);\n    return this.ecosystemService.createAppForArchive(file, true);\n  }\n\n  uploadPackage(file: File, pckg: IApplication): Promise<IApplication> {\n    return this.ecosystemService.uploadArchiveToApp(file, pckg);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { FetchClient, IApplication, IFetchOptions, IFetchResponse } from '@c8y/client';\nimport { PropertiesListItem, WizardService } from '@c8y/ngx-components';\nimport { lexer as markedLexer, parser as markedParser } from 'marked';\nimport { ModalOptions } from 'ngx-bootstrap/modal';\nimport { packageProperties } from '../../ecosystem.constants';\nimport { ApplicationState } from '../../ecosystem.model';\nimport { EcosystemService } from '../../ecosystem.service';\n\n@Component({\n  selector: 'c8y-package-details',\n  templateUrl: './package-details.component.html'\n})\nexport class PackageDetailsComponent implements OnInit {\n  readme: string;\n  package: IApplication = {};\n  name: string;\n  description: string;\n  appState: ApplicationState;\n  isApplicationPackage: boolean;\n\n  readonly packageProperties: PropertiesListItem[] = packageProperties;\n  private readonly headers: any = { 'Content-Type': 'text/markdown', responseType: 'blob' };\n  private NOT_FOUND_ERROR_CODE = 404;\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private client: FetchClient,\n    private wizard: WizardService,\n    private ecosystemService: EcosystemService\n  ) {}\n\n  async ngOnInit() {\n    this.package = this.getPackage();\n    this.name = this.package?.name;\n    this.description = this.package?.manifest?.description;\n    this.readme = await this.getReadmeFileContentAsHtml();\n    this.appState = this.ecosystemService.getAppState(this.package);\n    this.isApplicationPackage = this.ecosystemService.isApplicationPackage(this.package);\n  }\n\n  deploy() {\n    const initialState: any = {\n      wizardConfig: {},\n      id: 'deployPackage',\n      package: this.package\n    };\n    const modalOptions: ModalOptions = { initialState };\n    this.wizard.show(modalOptions);\n  }\n\n  private getPackage() {\n    return this.activatedRoute?.snapshot?.parent?.data?.contextData;\n  }\n\n  private async getReadmeFileContentAsHtml(): Promise<string> {\n    const readmeFile = await this.getReadmeFile();\n\n    const readmeContent = await readmeFile.text();\n    if (readmeFile.status === 200) {\n      const tokens = markedLexer(readmeContent);\n      const html = markedParser(tokens);\n      return html;\n    }\n  }\n\n  private async getReadmeFile(): Promise<IFetchResponse> {\n    let result: IFetchResponse;\n    const options: IFetchOptions = {\n      method: 'GET',\n      headers: this.headers\n    };\n\n    result = await this.client.fetch(`/apps/${this.package.contextPath}/readme.md`, options);\n\n    if (result && result.status === this.NOT_FOUND_ERROR_CODE) {\n      result = await this.client.fetch(`/apps/${this.package.contextPath}/README.md`, options);\n    }\n    return result;\n  }\n}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ApplicationService, IApplication } from '@c8y/client';\nimport { gettext, WizardComponent } from '@c8y/ngx-components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { EcosystemService } from '../../ecosystem.service';\nimport { ApplicationPropertiesFormComponent } from '../../shared/application-properties-form.component';\n\n@Component({\n  selector: 'c8y-deploy-application',\n  templateUrl: './deploy-application.component.html'\n})\nexport class DeployApplicationComponent implements OnInit {\n  inProgress: boolean = true;\n  package: IApplication;\n  isDeployed: boolean = false;\n  deployedWithSuccess: boolean = false;\n  newAppConfig: IApplication;\n\n  @ViewChild(ApplicationPropertiesFormComponent)\n  applicationPropertiesForm: ApplicationPropertiesFormComponent;\n\n  readonly descriptionTemplate: string = gettext(\n    'Deploy application using \"{{ packageName }}\" package'\n  );\n  headerText: string;\n\n  constructor(\n    private ecosystemService: EcosystemService,\n    private applicationService: ApplicationService,\n    private wizardComponent: WizardComponent,\n    private translate: TranslateService\n  ) {}\n\n  async ngOnInit() {\n    this.package = (this.wizardComponent as any).package;\n    const apps = (await this.ecosystemService.getApplications()).data;\n    this.newAppConfig = this.ecosystemService.getUniqueAppConfig(this.package, apps);\n    this.headerText = this.getHeaderText();\n    this.inProgress = false;\n  }\n\n  async deployApp() {\n    const formGroupValue = this.applicationPropertiesForm.formGroup.getRawValue();\n\n    this.inProgress = true;\n\n    const { data: clonedPkg } = await this.applicationService.clone(this.package);\n    const config = this.ecosystemService.createConfig(clonedPkg, formGroupValue);\n\n    try {\n      const { data: updatedApp } = await this.ecosystemService.updateApp(config, true);\n\n      if (updatedApp) {\n        await this.ecosystemService.updateAppManifest(updatedApp, this.package);\n      }\n      this.deployedWithSuccess = true;\n    } catch (error) {\n      this.markAsDeployed();\n      await this.applicationService.delete(clonedPkg.id);\n    }\n    this.markAsDeployed();\n  }\n\n  cancel() {\n    this.wizardComponent.close();\n  }\n\n  private markAsDeployed() {\n    this.isDeployed = true;\n    this.inProgress = false;\n  }\n\n  private getHeaderText() {\n    return this.translate.instant(this.descriptionTemplate, {\n      packageName: this.package.name\n    });\n  }\n}\n","import { Component, Input, ViewChild } from '@angular/core';\nimport { ApplicationService, IApplication } from '@c8y/client';\nimport { AlertService, DropAreaComponent, WizardComponent } from '@c8y/ngx-components';\nimport { BehaviorSubject } from 'rxjs';\nimport { ERROR_MESSAGES } from './../ecosystem.constants';\nimport { EcosystemService } from './../ecosystem.service';\n\n@Component({\n  selector: 'c8y-add-application',\n  templateUrl: './add-application.component.html'\n})\nexport class AddApplicationComponent {\n  @Input() headerText: string;\n  @Input() headerIcon: string;\n  @Input() successText: string;\n  @Input() createApplicationHandler: any;\n  @Input() uploadApplicationHandler: any;\n  @Input() canGoBack: boolean = false;\n\n  @ViewChild(DropAreaComponent) dropAreaComponent;\n\n  isLoading: boolean;\n  isAppCreated: boolean;\n  createdApp: IApplication;\n  canOpenInBrowser: boolean = false;\n  errorMessage: string;\n  private uploadCanceled: boolean = false;\n\n  constructor(\n    private ecosystemService: EcosystemService,\n    private alertService: AlertService,\n    private applicationService: ApplicationService,\n    private wizardComponent: WizardComponent\n  ) {}\n\n  get progress(): BehaviorSubject<number> {\n    return this.ecosystemService.progress;\n  }\n\n  onFileDroppedEvent(event) {\n    if (event && event.length > 0) {\n      const file = event[0].file;\n      this.onFile(file);\n    }\n  }\n\n  async onFile(file: File) {\n    this.isLoading = true;\n    this.errorMessage = null;\n    this.progress.next(0);\n\n    try {\n      this.createdApp = await this.createApplicationHandler(file);\n      await this.uploadApplicationHandler(file, this.createdApp);\n      this.canOpenInBrowser = this.ecosystemService.canOpenAppInBrowser(this.createdApp);\n      this.isAppCreated = true;\n    } catch (ex) {\n      this.ecosystemService.cancelAppCreation(this.createdApp);\n      this.createdApp = null;\n      this.dropAreaComponent.onDelete();\n      this.errorMessage = ERROR_MESSAGES[ex.message];\n      if (!this.errorMessage && !this.uploadCanceled) {\n        this.alertService.addServerFailure(ex);\n      }\n    }\n    this.progress.next(100);\n    this.isLoading = false;\n  }\n\n  getHref(app: IApplication): string {\n    return this.applicationService.getHref(app);\n  }\n\n  cancel() {\n    this.cancelFileUpload();\n    this.wizardComponent.close();\n  }\n\n  done() {\n    this.wizardComponent.close();\n  }\n\n  back() {\n    this.wizardComponent.reset();\n  }\n\n  private cancelFileUpload() {\n    this.uploadCanceled = true;\n    this.ecosystemService.cancelAppCreation(this.createdApp);\n    this.createdApp = null;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\nimport { EcosystemService } from '../ecosystem.service';\n\n@Injectable()\nexport class PackageGuard implements CanActivate {\n  constructor(private ecosystemService: EcosystemService) {}\n\n  canActivate(route: ActivatedRouteSnapshot) {\n    const app = route.data.contextData || route.parent.data.contextData;\n    if (!app) {\n      return false;\n    }\n    return this.ecosystemService.isPackage(app);\n  }\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ApplicationService, IApplication } from '@c8y/client';\nimport { AlertService, gettext } from '@c8y/ngx-components';\nimport { ApplicationState } from './../ecosystem.model';\nimport { EcosystemService } from './../ecosystem.service';\n\n@Component({\n  selector: 'c8y-application-card',\n  templateUrl: './application-card.component.html'\n})\nexport class ApplicationCardComponent implements OnInit {\n  @Input() app: IApplication;\n  @Input() canEdit: boolean = true;\n  @Output() onAppDeleted: EventEmitter<void> = new EventEmitter();\n  appState: ApplicationState;\n  canOpenInBrowser: boolean;\n  disableOpenInBrowser: boolean;\n  canDelete: boolean;\n  isPackage: boolean;\n  isFeature: boolean;\n  isExternal: boolean;\n  isMicroservice: boolean;\n  get openButtonTitle() {\n    return !this.disableOpenInBrowser ?\n      gettext('Open') :\n      gettext('This application is overridden.');\n  }\n\n  constructor(\n    private applicationService: ApplicationService,\n    private ecosystemService: EcosystemService,\n    private alertService: AlertService,\n    private router: Router\n  ) {}\n\n  async ngOnInit() {\n    this.appState = this.ecosystemService.getAppState(this.app);\n    const contextPath = this.app.contextPath;\n    this.canOpenInBrowser = this.ecosystemService.canOpenAppInBrowser(this.app);\n    this.disableOpenInBrowser =\n      this.canOpenInBrowser && (await this.ecosystemService.isOverwrittenByCustomApp(this.app));\n    this.canDelete = this.ecosystemService.canDeleteApp(this.app);\n    this.isPackage = this.ecosystemService.isPackage(this.app);\n    this.isFeature = this.ecosystemService.isFeature(this.app);\n    this.isMicroservice = this.ecosystemService.isMicroservice(this.app);\n    this.isExternal = this.ecosystemService.isExternal(this.app);\n  }\n\n  detail() {\n    this.isMicroservice\n      ? this.router.navigateByUrl(`/microservices/${this.app.id}`)\n      : this.router.navigateByUrl(`/ecosystem/application/${this.app.id}`);\n  }\n\n  openApp() {\n    window.open(this.applicationService.getHref(this.app));\n  }\n\n  async delete() {\n    try {\n      await this.ecosystemService.deleteApp(this.app);\n      this.onAppDeleted.emit();\n    } catch (ex) {\n      if (ex) {\n        this.alertService.addServerFailure(ex);\n      }\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\nimport { EcosystemService } from '../ecosystem.service';\n\n@Injectable()\nexport class ApplicationPropertiesGuard implements CanActivate {\n  constructor(private ecosystemService: EcosystemService) {}\n\n  canActivate(route: ActivatedRouteSnapshot) {\n    const app = route.data.contextData || route.parent.data.contextData;\n    if (!app) {\n      return false;\n    }\n    return !this.ecosystemService.isPackage(app);\n  }\n}\n","import { Component } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { IApplication } from '@c8y/client';\nimport { shareReplay, switchMap, tap } from 'rxjs/operators';\nimport { EcosystemService } from '../ecosystem.service';\n\n@Component({\n  selector: 'c8y-feature-list',\n  templateUrl: './feature-list.component.html'\n})\nexport class FeatureListComponent {\n  reloading: boolean = false;\n  reload$: BehaviorSubject<void> = new BehaviorSubject(null);\n\n  features$: Observable<IApplication> = this.reload$.pipe(\n    tap(() => (this.reloading = true)),\n    switchMap(() => this.ecosystemService.getFeatureApplications()),\n    tap(() => (this.reloading = false)),\n    shareReplay()\n  );\n  listClass: string;\n\n  constructor(private ecosystemService: EcosystemService) {}\n\n  ngOnInit() {\n    this.loadFeatures();\n  }\n\n  loadFeatures() {\n    this.reload$.next();\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { EcosystemService } from '../../ecosystem.service';\nimport { IApplication } from '@c8y/client';\n\n@Component({\n  selector: 'c8y-package-archives',\n  templateUrl: './package-archives.component.html'\n})\nexport class PackageArchivesComponent implements OnInit {\n  application: IApplication;\n  isLoading: boolean = false;\n\n  constructor(private activatedRoute: ActivatedRoute, private ecosystemService: EcosystemService) {}\n\n  async ngOnInit(): Promise<void> {\n    await this.loadApplication();\n  }\n\n  async loadApplication(): Promise<void> {\n    const { id } = this.activatedRoute.snapshot.parent.data.contextData;\n    this.isLoading = true;\n    this.application = await this.ecosystemService.getApplication(id);\n    this.isLoading = false;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { EcosystemGuard } from './ecosystem.guard';\nimport { InstallFromPackageComponent } from './applications/install-from-package/install-from-package.component';\n\n@Injectable()\nexport class EcosystemWizardFactory {\n  constructor(private ecosystemGuard: EcosystemGuard) {}\n\n  async get() {\n    if (!this.ecosystemGuard.isFeatureEnabled()) {\n      return;\n    } else {\n      return {\n        wizardId: 'uploadApplication',\n        component: InstallFromPackageComponent,\n        name: 'Install from available packages',\n        c8yIcon: 'big-parcel'\n      };\n    }\n  }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { IApplication, IApplicationBinary } from '@c8y/client';\nimport { AlertService, gettext } from '@c8y/ngx-components';\nimport { BehaviorSubject } from 'rxjs';\nimport { EcosystemService } from '../ecosystem.service';\n\n@Component({\n  selector: 'c8y-upload-archive',\n  templateUrl: 'upload-archive.component.html'\n})\nexport class UploadArchiveComponent {\n  @Input() application: IApplication;\n  @Output() applicationChange: EventEmitter<IApplication> = new EventEmitter<IApplication>();\n  @Output() refresh: EventEmitter<any> = new EventEmitter();\n\n  archives: IApplicationBinary[] = [];\n  toActivateVersionId: string;\n  last: IApplicationBinary;\n  isLoading: boolean;\n  fileList: FileList;\n  uploadInProgress: boolean = false;\n  canReactivate: boolean = false;\n\n  constructor(private ecosystemService: EcosystemService, private alertService: AlertService) {}\n\n  get uploadProgress(): BehaviorSubject<number> {\n    return this.ecosystemService.progress;\n  }\n\n  onFileDroppedEvent(event): void {\n    if (event && event.length > 0) {\n      const file = event[0].file;\n      this.onFile(file);\n    }\n  }\n\n  private async onFile(file: File): Promise<void> {\n    try {\n      await this.ecosystemService.isValidAppType(file, this.application.type);\n      const isCustomMicroservice = this.ecosystemService.isCustomMicroservice(this.application);\n      this.archives = isCustomMicroservice\n        ? []\n        : await this.ecosystemService.listArchives(this.application.id);\n      this.archives.sort((a, b) => {\n        return (new Date(b.created) as any) - (new Date(a.created) as any);\n      });\n      this.uploadInProgress = true;\n      this.uploadProgress.next(0);\n      if (this.archives.length === 6 && !isCustomMicroservice) {\n        await this.ecosystemService.removeOldestArchive(this.application, this.archives);\n      }\n      const app = await this.ecosystemService.uploadArchiveToApp(file, this.application);\n      this.applicationChange.emit(app);\n      this.uploadProgress.next(100);\n      this.uploadInProgress = false;\n      this.refresh.emit();\n      this.alertService.success(gettext('Archive uploaded and activated.'));\n    } catch (ex) {\n      this.uploadInProgress = false;\n      this.alertService.addServerFailure(ex);\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport {\n  CoreModule,\n  FormsModule,\n  gettext,\n  HOOK_NAVIGATOR_NODES,\n  HOOK_ROUTE,\n  HOOK_TABS,\n  HOOK_WIZARD,\n  Route,\n  ViewContext\n} from '@c8y/ngx-components';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { PopoverModule } from 'ngx-bootstrap/popover';\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\nimport { AddWebApplicationComponent } from './applications/add-web-application/add-web-application.component';\nimport { InstallFromPackageComponent } from './applications/install-from-package/install-from-package.component';\nimport { DuplicateApplicationListComponent } from './applications/duplicate-application/duplicate-application-list/duplicate-application-list.component';\nimport { DuplicateApplicationPropertiesComponent } from './applications/duplicate-application/duplicate-application-properties/duplicate-application-properties.component';\nimport { DuplicateApplicationComponent } from './applications/duplicate-application/duplicate-application.component';\nimport { AddExternalApplicationComponent } from './applications/add-external-applicaiton/add-external-application.component';\nimport { AddMicroserviceComponent } from './microservices/add-microservice.component';\nimport { ApplicationListComponent } from './applications/application-list/application-list.component';\nimport { ApplicationPluginsComponent } from './applications/application-plugins/application-plugins.component';\nimport { ApplicationPluginsGuard } from './applications/application-plugins/application-plugins.guard';\nimport { InstallPluginComponent } from './applications/application-plugins/install-plugin.component';\nimport { PluginListItemComponent } from './applications/application-plugins/plugin-list-item.component';\nimport { PluginListComponent } from './applications/application-plugins/plugin-list.component';\nimport { ActivityLogComponent } from './activity-log/activity-log.component';\nimport { ApplicationPropertiesComponent } from './application-properties/application-properties.component';\nimport { EcosystemNavigationFactory } from './ecosystem-navigation.factory';\nimport { EcosystemTabs } from './ecosystem-tabs.factory';\nimport { EcosystemGuard } from './ecosystem.guard';\nimport { EcosystemService } from './ecosystem.service';\nimport { MicroserviceListComponent } from './microservices/microservice-list.component';\nimport { PackagesListComponent } from './packages/package-list/packages-list.component';\nimport { AddPackageComponent } from './packages/add-package.component';\nimport { PackageDetailsComponent } from './packages/package-details/package-details.component';\nimport { DeployApplicationComponent } from './packages/deploy-application/deploy-application.component';\nimport { AddApplicationComponent } from './shared/add-application.component';\nimport { PackageGuard } from './packages/package.guard';\nimport { ApplicationCardComponent } from './shared/application-card.component';\nimport { ApplicationPropertiesFormComponent } from './shared/application-properties-form.component';\nimport { ApplicationPropertiesGuard } from './application-properties/application-properties.guard';\nimport { FeatureListComponent } from './features/feature-list.component';\nimport { PackageArchivesComponent } from './packages/package-archives/package-archives.component';\nimport { EcosystemWizardFactory } from './ecosystem-wizard.factory';\nimport { UploadArchiveComponent } from './shared/upload-archive.component';\n\nconst ecosystemMainRoutes: Route[] = [\n  {\n    path: 'ecosystem/applications',\n    component: ApplicationListComponent\n  },\n  {\n    path: 'ecosystem/package-list',\n    component: PackagesListComponent,\n    canActivate: [EcosystemGuard]\n  },\n  {\n    path: 'ecosystem/features',\n    component: FeatureListComponent\n  },\n  {\n    path: 'ecosystem',\n    redirectTo: 'ecosystem/applications'\n  },\n  {\n    path: 'microservices',\n    component: MicroserviceListComponent\n  }\n];\n\nconst applicationDetailsRoutes: Route[] = [\n  {\n    path: 'properties',\n    component: ApplicationPropertiesComponent,\n    icon: 'list',\n    label: gettext('Properties'),\n    context: ViewContext.Application,\n    priority: 5,\n    canActivate: [ApplicationPropertiesGuard]\n  },\n  {\n    path: 'plugins',\n    component: ApplicationPluginsComponent,\n    icon: 'plugin',\n    label: gettext('Plugins'),\n    context: ViewContext.Application,\n    priority: 3,\n    canActivate: [ApplicationPluginsGuard, EcosystemGuard]\n  },\n  {\n    path: 'package-details',\n    component: PackageDetailsComponent,\n    icon: 'big-parcel',\n    label: gettext('Info'),\n    context: ViewContext.Application,\n    priority: 10,\n    canActivate: [PackageGuard, EcosystemGuard]\n  },\n  {\n    path: 'package-archives',\n    component: PackageArchivesComponent,\n    icon: 'c8y-archive',\n    label: gettext('Archives'),\n    context: ViewContext.Application,\n    priority: 5,\n    canActivate: [PackageGuard, EcosystemGuard]\n  },\n  {\n    path: 'properties',\n    component: ApplicationPropertiesComponent,\n    icon: 'list',\n    label: gettext('Properties'),\n    context: ViewContext.Microservice,\n    priority: 5,\n    canActivate: [ApplicationPropertiesGuard]\n  }\n];\n\n@NgModule({\n  declarations: [\n    ApplicationListComponent,\n    MicroserviceListComponent,\n    ApplicationCardComponent,\n    ApplicationPropertiesComponent,\n    AddMicroserviceComponent,\n    ActivityLogComponent,\n    ApplicationPluginsComponent,\n    PluginListItemComponent,\n    InstallPluginComponent,\n    PluginListComponent,\n    AddWebApplicationComponent,\n    AddExternalApplicationComponent,\n    DuplicateApplicationComponent,\n    DuplicateApplicationListComponent,\n    DuplicateApplicationPropertiesComponent,\n    ApplicationPropertiesComponent,\n    InstallFromPackageComponent,\n    AddMicroserviceComponent,\n    ApplicationPropertiesComponent,\n    PackagesListComponent,\n    PackageDetailsComponent,\n    DeployApplicationComponent,\n    AddPackageComponent,\n    AddApplicationComponent,\n    ApplicationPropertiesFormComponent,\n    FeatureListComponent,\n    PackageArchivesComponent,\n    UploadArchiveComponent\n  ],\n  entryComponents: [\n    AddMicroserviceComponent,\n    AddWebApplicationComponent,\n    AddExternalApplicationComponent,\n    DuplicateApplicationComponent,\n    DuplicateApplicationListComponent,\n    DuplicateApplicationPropertiesComponent,\n    ApplicationPropertiesComponent,\n    ActivityLogComponent,\n    ApplicationPluginsComponent,\n    InstallPluginComponent,\n    PackagesListComponent,\n    InstallFromPackageComponent,\n    PackageDetailsComponent,\n    DeployApplicationComponent,\n    AddPackageComponent,\n    FeatureListComponent,\n    PackageArchivesComponent\n  ],\n  imports: [\n    CoreModule,\n    BsDropdownModule,\n    TooltipModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(ecosystemMainRoutes),\n    PopoverModule\n  ],\n  exports: [ApplicationPropertiesComponent],\n  providers: [\n    {\n      provide: HOOK_TABS,\n      useClass: EcosystemTabs,\n      multi: true\n    },\n    {\n      provide: HOOK_NAVIGATOR_NODES,\n      useClass: EcosystemNavigationFactory,\n      multi: true\n    },\n    {\n      provide: HOOK_ROUTE,\n      useValue: applicationDetailsRoutes,\n      multi: true\n    },\n    EcosystemGuard,\n    EcosystemService,\n    ApplicationPluginsGuard,\n    PackageGuard,\n    ApplicationPropertiesGuard,\n    {\n      provide: HOOK_WIZARD,\n      useValue: {\n        wizardId: 'uploadApplication',\n        component: AddWebApplicationComponent,\n        name: 'Upload web application',\n        c8yIcon: 'upload'\n      },\n      multi: true\n    },\n    {\n      provide: HOOK_WIZARD,\n      useValue: {\n        wizardId: 'uploadPackage',\n        component: AddPackageComponent\n      },\n      multi: true\n    },\n    {\n      provide: HOOK_WIZARD,\n      useValue: {\n        wizardId: 'uploadApplication',\n        component: AddExternalApplicationComponent,\n        name: 'External application',\n        c8yIcon: 'cloud-link'\n      },\n      multi: true\n    },\n    {\n      provide: HOOK_WIZARD,\n      useValue: {\n        wizardId: 'deployPackage',\n        component: DeployApplicationComponent,\n        name: 'Deploy package',\n        c8yIcon: 'big-parcel'\n      },\n      multi: true\n    },\n    {\n      provide: HOOK_WIZARD,\n      useClass: EcosystemWizardFactory,\n      multi: true\n    },\n    {\n      provide: HOOK_WIZARD,\n      useValue: {\n        wizardId: 'uploadApplication',\n        component: DuplicateApplicationComponent,\n        name: 'Duplicate existing application',\n        c8yIcon: 'copy'\n      },\n      multi: true\n    },\n    {\n      provide: HOOK_WIZARD,\n      useValue: {\n        wizardId: 'uploadMicroservice',\n        component: AddMicroserviceComponent\n      },\n      multi: true\n    }\n  ]\n})\nexport class EcosystemModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {ActivityLogComponent as ɵg} from './activity-log/activity-log.component';\nexport {ApplicationPropertiesComponent as ɵe} from './application-properties/application-properties.component';\nexport {ApplicationPropertiesGuard as ɵbd} from './application-properties/application-properties.guard';\nexport {AddExternalApplicationComponent as ɵm} from './applications/add-external-applicaiton/add-external-application.component';\nexport {AddWebApplicationComponent as ɵl} from './applications/add-web-application/add-web-application.component';\nexport {ApplicationListComponent as ɵa} from './applications/application-list/application-list.component';\nexport {ApplicationPluginsComponent as ɵh} from './applications/application-plugins/application-plugins.component';\nexport {ApplicationPluginsGuard as ɵbe} from './applications/application-plugins/application-plugins.guard';\nexport {InstallPluginComponent as ɵj} from './applications/application-plugins/install-plugin.component';\nexport {PluginListItemComponent as ɵi} from './applications/application-plugins/plugin-list-item.component';\nexport {PluginListComponent as ɵk} from './applications/application-plugins/plugin-list.component';\nexport {DuplicateApplicationListComponent as ɵo} from './applications/duplicate-application/duplicate-application-list/duplicate-application-list.component';\nexport {DuplicateApplicationPropertiesComponent as ɵp} from './applications/duplicate-application/duplicate-application-properties/duplicate-application-properties.component';\nexport {DuplicateApplicationComponent as ɵn} from './applications/duplicate-application/duplicate-application.component';\nexport {InstallFromPackageComponent as ɵr} from './applications/install-from-package/install-from-package.component';\nexport {EcosystemNavigationFactory as ɵbc} from './ecosystem-navigation.factory';\nexport {EcosystemTabs as ɵbb} from './ecosystem-tabs.factory';\nexport {EcosystemWizardFactory as ɵbg} from './ecosystem-wizard.factory';\nexport {EcosystemGuard as ɵba} from './ecosystem.guard';\nexport {EcosystemService as ɵb} from './ecosystem.service';\nexport {FeatureListComponent as ɵx} from './features/feature-list.component';\nexport {AddMicroserviceComponent as ɵf} from './microservices/add-microservice.component';\nexport {MicroserviceListComponent as ɵc} from './microservices/microservice-list.component';\nexport {AddPackageComponent as ɵv} from './packages/add-package.component';\nexport {DeployApplicationComponent as ɵu} from './packages/deploy-application/deploy-application.component';\nexport {PackageArchivesComponent as ɵy} from './packages/package-archives/package-archives.component';\nexport {PackageDetailsComponent as ɵt} from './packages/package-details/package-details.component';\nexport {PackagesListComponent as ɵs} from './packages/package-list/packages-list.component';\nexport {PackageGuard as ɵbf} from './packages/package.guard';\nexport {AddApplicationComponent as ɵw} from './shared/add-application.component';\nexport {ApplicationCardComponent as ɵd} from './shared/application-card.component';\nexport {ApplicationPropertiesFormComponent as ɵq} from './shared/application-properties-form.component';\nexport {UploadArchiveComponent as ɵz} from './shared/upload-archive.component';"],"names":["gettext","EventEmitter","BehaviorSubject","groupBy","ApplicationType","get","debounceTime","take","pick","Status","saveAs","kebabCase","cloneDeep","Injectable","ModalService","AlertService","HumanizeAppNamePipe","TranslateService","ApplicationService","AppStateService","ZipService","TenantService","Component","Validators","FormBuilder","Input","WizardComponent","ViewChild","Output","BsModalRef","C8yStepper","tap","switchMap","shareReplay","WizardService","combineLatest","map","ActivatedRoute","BsModalService","PluginsService","Isolation","BillingMode","ViewContext","Router","InventoryService","Permissions","OptionsService","markedLexer","markedParser","FetchClient","DropAreaComponent","NgModule","CoreModule","BsDropdownModule","TooltipModule","FormsModule","ReactiveFormsModule","RouterModule","PopoverModule","HOOK_TABS","HOOK_NAVIGATOR_NODES","HOOK_ROUTE","HOOK_WIZARD"],"mappings":"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"}