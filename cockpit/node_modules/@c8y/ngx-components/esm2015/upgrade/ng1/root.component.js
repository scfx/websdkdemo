const rootComponent = {
    template: `
  <c8y-bootstrap>
    <div id="c8y-legacy-view">
      <div ng-view ng-if="vm.widthSet && vm.authState.hasAuth"></div>
    </div>
  </c8y-bootstrap>`,
    controller: c8yUiRootController,
    controllerAs: 'vm'
};
function c8yUiRootController($rootScope, $timeout, c8yBase, c8yNavigator, c8yApplication, c8yHeaderService) {
    'ngInject';
    const vm = this;
    Object.assign(vm, {
        $onInit,
        navOpen: false
    });
    ////////////
    function $onInit() {
        c8yHeaderService.map((states) => states.nav.open).subscribe((isOpen) => {
            vm.navOpen = isOpen;
        });
        c8yHeaderService.configNavigator({ canToggle: true });
        $rootScope.$on('authStateChange', onAuthStateChange);
        vm.rootNodes = c8yNavigator.rootNodes;
        c8yApplication.currentAppCached().then(onAppInfo);
        vm.navHiddenOnStartup = c8yBase.appOption('hide_navigator');
        checkReady();
    }
    function onAuthStateChange(evt, data) {
        vm.authState = data;
    }
    function onAppInfo() {
        vm.tabsHorizontal = c8yBase.appOption('tabsHorizontal');
    }
    function checkReady() {
        const element = document.querySelector('#c8y-legacy-view');
        const hasWidth = element && element.clientWidth;
        if (hasWidth) {
            vm.widthSet = true;
        }
        else {
            $timeout(checkReady);
        }
    }
}
export { rootComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm9vdC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi91cGdyYWRlL25nMS9yb290LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLGFBQWEsR0FBRztJQUNwQixRQUFRLEVBQUU7Ozs7O21CQUtPO0lBQ2pCLFVBQVUsRUFBRSxtQkFBbUI7SUFDL0IsWUFBWSxFQUFFLElBQUk7Q0FDbkIsQ0FBQztBQUVGLFNBQVMsbUJBQW1CLENBQzFCLFVBQVUsRUFDVixRQUFRLEVBQ1IsT0FBTyxFQUNQLFlBQVksRUFDWixjQUFjLEVBQ2QsZ0JBQWdCO0lBRWhCLFVBQVUsQ0FBQztJQUNYLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQztJQUVoQixNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRTtRQUNoQixPQUFPO1FBQ1AsT0FBTyxFQUFFLEtBQUs7S0FDZixDQUFDLENBQUM7SUFFSCxZQUFZO0lBRVosU0FBUyxPQUFPO1FBQ2QsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ3JFLEVBQUUsQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1FBQ3RCLENBQUMsQ0FBQyxDQUFDO1FBQ0gsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLEVBQUMsU0FBUyxFQUFFLElBQUksRUFBQyxDQUFDLENBQUM7UUFDcEQsVUFBVSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO1FBQ3JELEVBQUUsQ0FBQyxTQUFTLEdBQUcsWUFBWSxDQUFDLFNBQVMsQ0FBQztRQUN0QyxjQUFjLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDbEQsRUFBRSxDQUFDLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUM1RCxVQUFVLEVBQUUsQ0FBQztJQUNmLENBQUM7SUFFRCxTQUFTLGlCQUFpQixDQUFDLEdBQUcsRUFBRSxJQUFJO1FBQ2xDLEVBQUUsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO0lBQ3RCLENBQUM7SUFFRCxTQUFTLFNBQVM7UUFDaEIsRUFBRSxDQUFDLGNBQWMsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUVELFNBQVMsVUFBVTtRQUNqQixNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDM0QsTUFBTSxRQUFRLEdBQUcsT0FBTyxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUM7UUFDaEQsSUFBSSxRQUFRLEVBQUU7WUFDWixFQUFFLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztTQUNwQjthQUFNO1lBQ0wsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztBQUNILENBQUM7QUFDRCxPQUFPLEVBQUUsYUFBYSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByb290Q29tcG9uZW50ID0ge1xuICB0ZW1wbGF0ZTogYFxuICA8Yzh5LWJvb3RzdHJhcD5cbiAgICA8ZGl2IGlkPVwiYzh5LWxlZ2FjeS12aWV3XCI+XG4gICAgICA8ZGl2IG5nLXZpZXcgbmctaWY9XCJ2bS53aWR0aFNldCAmJiB2bS5hdXRoU3RhdGUuaGFzQXV0aFwiPjwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2M4eS1ib290c3RyYXA+YCxcbiAgY29udHJvbGxlcjogYzh5VWlSb290Q29udHJvbGxlcixcbiAgY29udHJvbGxlckFzOiAndm0nXG59O1xuXG5mdW5jdGlvbiBjOHlVaVJvb3RDb250cm9sbGVyKFxuICAkcm9vdFNjb3BlLFxuICAkdGltZW91dCxcbiAgYzh5QmFzZSxcbiAgYzh5TmF2aWdhdG9yLFxuICBjOHlBcHBsaWNhdGlvbixcbiAgYzh5SGVhZGVyU2VydmljZVxuKSB7XG4gICduZ0luamVjdCc7XG4gIGNvbnN0IHZtID0gdGhpcztcblxuICBPYmplY3QuYXNzaWduKHZtLCB7XG4gICAgJG9uSW5pdCxcbiAgICBuYXZPcGVuOiBmYWxzZVxuICB9KTtcblxuICAvLy8vLy8vLy8vLy9cblxuICBmdW5jdGlvbiAkb25Jbml0KCkge1xuICAgIGM4eUhlYWRlclNlcnZpY2UubWFwKChzdGF0ZXMpID0+IHN0YXRlcy5uYXYub3Blbikuc3Vic2NyaWJlKChpc09wZW4pID0+IHtcbiAgICAgIHZtLm5hdk9wZW4gPSBpc09wZW47XG4gICAgfSk7XG4gICAgYzh5SGVhZGVyU2VydmljZS5jb25maWdOYXZpZ2F0b3Ioe2NhblRvZ2dsZTogdHJ1ZX0pO1xuICAgICRyb290U2NvcGUuJG9uKCdhdXRoU3RhdGVDaGFuZ2UnLCBvbkF1dGhTdGF0ZUNoYW5nZSk7XG4gICAgdm0ucm9vdE5vZGVzID0gYzh5TmF2aWdhdG9yLnJvb3ROb2RlcztcbiAgICBjOHlBcHBsaWNhdGlvbi5jdXJyZW50QXBwQ2FjaGVkKCkudGhlbihvbkFwcEluZm8pO1xuICAgIHZtLm5hdkhpZGRlbk9uU3RhcnR1cCA9IGM4eUJhc2UuYXBwT3B0aW9uKCdoaWRlX25hdmlnYXRvcicpO1xuICAgIGNoZWNrUmVhZHkoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQXV0aFN0YXRlQ2hhbmdlKGV2dCwgZGF0YSkge1xuICAgIHZtLmF1dGhTdGF0ZSA9IGRhdGE7XG4gIH1cblxuICBmdW5jdGlvbiBvbkFwcEluZm8oKSB7XG4gICAgdm0udGFic0hvcml6b250YWwgPSBjOHlCYXNlLmFwcE9wdGlvbigndGFic0hvcml6b250YWwnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrUmVhZHkoKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjOHktbGVnYWN5LXZpZXcnKTtcbiAgICBjb25zdCBoYXNXaWR0aCA9IGVsZW1lbnQgJiYgZWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICBpZiAoaGFzV2lkdGgpIHtcbiAgICAgIHZtLndpZHRoU2V0ID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRpbWVvdXQoY2hlY2tSZWFkeSk7XG4gICAgfVxuICB9XG59XG5leHBvcnQgeyByb290Q29tcG9uZW50IH07XG4iXX0=