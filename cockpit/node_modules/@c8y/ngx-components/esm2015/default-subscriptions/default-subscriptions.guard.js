import { __awaiter } from "tslib";
import { Injectable } from '@angular/core';
import { TenantUiService } from '@c8y/ngx-components';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@c8y/ngx-components';
export class DefaultSubscriptionsGuard {
    constructor(tenantUiService) {
        this.tenantUiService = tenantUiService;
    }
    /**
     * Checks if default subscriptions feature should be active,
     * i.e. whether the current tenant is the management or an enterprise tenant.
     * **Note: the check is executed only once in the runtime.**
     *
     * @returns True, if the feature should be active.
     */
    canActivate() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.active === undefined) {
                this.active =
                    (yield this.tenantUiService.isManagementTenant()) ||
                        (yield this.tenantUiService.isEnterpriseTenant());
            }
            return this.active;
        });
    }
}
DefaultSubscriptionsGuard.ɵfac = function DefaultSubscriptionsGuard_Factory(t) { return new (t || DefaultSubscriptionsGuard)(ɵngcc0.ɵɵinject(ɵngcc1.TenantUiService)); };
DefaultSubscriptionsGuard.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: DefaultSubscriptionsGuard, factory: DefaultSubscriptionsGuard.ɵfac });
DefaultSubscriptionsGuard.ctorParameters = () => [
    { type: TenantUiService }
];
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(DefaultSubscriptionsGuard, [{
        type: Injectable
    }], function () { return [{ type: ɵngcc1.TenantUiService }]; }, null); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdC1zdWJzY3JpcHRpb25zLmd1YXJkLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9kZWZhdWx0LXN1YnNjcmlwdGlvbnMvZGVmYXVsdC1zdWJzY3JpcHRpb25zLmd1YXJkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQzs7O0FBR3RELE1BQU0sT0FBTyx5QkFBeUI7QUFBRyxJQUd2QyxZQUFvQixlQUFnQztBQUFJLFFBQXBDLG9CQUFlLEdBQWYsZUFBZSxDQUFpQjtBQUFDLElBQUUsQ0FBQztBQUMxRCxJQUNFO0FBQ0Y7QUFDRTtBQUNFO0FBRUg7QUFBTztBQUVKLE9BREM7QUFDTCxJQUFRLFdBQVc7QUFBSztBQUVqQixZQURILElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxTQUFTLEVBQUU7QUFDbkMsZ0JBQU0sSUFBSSxDQUFDLE1BQU07QUFDakIsb0JBQVEsQ0FBQyxNQUFNLElBQUksQ0FBQyxlQUFlLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztBQUN6RCx3QkFBUSxDQUFDLE1BQU0sSUFBSSxDQUFDLGVBQWUsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLENBQUM7QUFDMUQsYUFBSztBQUNMLFlBQUksT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQ3ZCLFFBQUUsQ0FBQztBQUVILEtBRkc7QUFDSDtxREFyQkMsVUFBVTt5SkFDVDtBQUFDO0FBQW1ELFlBSDdDLGVBQWU7QUFBRzs7O2dGQUFFO0FBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDYW5BY3RpdmF0ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBUZW5hbnRVaVNlcnZpY2UgfSBmcm9tICdAYzh5L25neC1jb21wb25lbnRzJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIERlZmF1bHRTdWJzY3JpcHRpb25zR3VhcmQgaW1wbGVtZW50cyBDYW5BY3RpdmF0ZSB7XG4gIHByaXZhdGUgYWN0aXZlOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgdGVuYW50VWlTZXJ2aWNlOiBUZW5hbnRVaVNlcnZpY2UpIHt9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBkZWZhdWx0IHN1YnNjcmlwdGlvbnMgZmVhdHVyZSBzaG91bGQgYmUgYWN0aXZlLFxuICAgKiBpLmUuIHdoZXRoZXIgdGhlIGN1cnJlbnQgdGVuYW50IGlzIHRoZSBtYW5hZ2VtZW50IG9yIGFuIGVudGVycHJpc2UgdGVuYW50LlxuICAgKiAqKk5vdGU6IHRoZSBjaGVjayBpcyBleGVjdXRlZCBvbmx5IG9uY2UgaW4gdGhlIHJ1bnRpbWUuKipcbiAgICpcbiAgICogQHJldHVybnMgVHJ1ZSwgaWYgdGhlIGZlYXR1cmUgc2hvdWxkIGJlIGFjdGl2ZS5cbiAgICovXG4gIGFzeW5jIGNhbkFjdGl2YXRlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmFjdGl2ZSA9XG4gICAgICAgIChhd2FpdCB0aGlzLnRlbmFudFVpU2VydmljZS5pc01hbmFnZW1lbnRUZW5hbnQoKSkgfHxcbiAgICAgICAgKGF3YWl0IHRoaXMudGVuYW50VWlTZXJ2aWNlLmlzRW50ZXJwcmlzZVRlbmFudCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlO1xuICB9XG59XG4iXX0=