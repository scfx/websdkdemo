import { Component } from '@angular/core';
import { BsModalService } from 'ngx-bootstrap/modal';
import { CookieBannerPreferencesModalComponent } from './cookie-banner-preferences-modal/cookie-banner-preferences-modal.component';
import { CookieBannerService } from './cookie-banner.service';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from 'ngx-bootstrap/modal';
import * as ɵngcc2 from './cookie-banner.service';
import * as ɵngcc3 from '@angular/common';
import * as ɵngcc4 from '../../i18n/c8y-translate.pipe';

function CookieBannerComponent_div_2_div_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 15);
    ɵngcc0.ɵɵelementStart(1, "h3");
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵpipe(3, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(4, "div", 10);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 1, ctx_r1.settings.cookieBannerTitle));
} }
function CookieBannerComponent_div_2_div_13_Template(rf, ctx) { if (rf & 1) {
    const _r5 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 9);
    ɵngcc0.ɵɵelement(1, "div", 13);
    ɵngcc0.ɵɵelementStart(2, "button", 16);
    ɵngcc0.ɵɵlistener("click", function CookieBannerComponent_div_2_div_13_Template_button_click_2_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(2); return ctx_r4.onConfigurePreferences(); });
    ɵngcc0.ɵɵtext(3);
    ɵngcc0.ɵɵpipe(4, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("disabled", ctx_r2.shouldDisable);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(4, 2, "Configure preferences"), " ");
} }
function CookieBannerComponent_div_2_a_16_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "a", 17);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵpropertyInterpolate("href", ctx_r3.settings.policyUrl, ɵngcc0.ɵɵsanitizeUrl);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 2, "Privacy policy"), " ");
} }
function CookieBannerComponent_div_2_Template(rf, ctx) { if (rf & 1) {
    const _r7 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 3);
    ɵngcc0.ɵɵtemplate(1, CookieBannerComponent_div_2_div_1_Template, 5, 3, "div", 4);
    ɵngcc0.ɵɵelementStart(2, "div", 5);
    ɵngcc0.ɵɵelementStart(3, "div", 6);
    ɵngcc0.ɵɵtext(4);
    ɵngcc0.ɵɵpipe(5, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(6, "div", 7);
    ɵngcc0.ɵɵelementStart(7, "div", 8);
    ɵngcc0.ɵɵelementStart(8, "div", 9);
    ɵngcc0.ɵɵelement(9, "div", 10);
    ɵngcc0.ɵɵelementStart(10, "button", 11);
    ɵngcc0.ɵɵlistener("click", function CookieBannerComponent_div_2_Template_button_click_10_listener() { ɵngcc0.ɵɵrestoreView(_r7); const ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.acceptCookies(); });
    ɵngcc0.ɵɵtext(11);
    ɵngcc0.ɵɵpipe(12, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(13, CookieBannerComponent_div_2_div_13_Template, 5, 4, "div", 12);
    ɵngcc0.ɵɵelementStart(14, "div", 9);
    ɵngcc0.ɵɵelement(15, "div", 13);
    ɵngcc0.ɵɵtemplate(16, CookieBannerComponent_div_2_a_16_Template, 3, 4, "a", 14);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.settings.cookieBannerTitle);
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(5, 6, ctx_r0.settings.cookieBannerText), " ");
    ɵngcc0.ɵɵadvance(6);
    ɵngcc0.ɵɵproperty("disabled", ctx_r0.shouldDisable);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(12, 8, "Agree and proceed"), " ");
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", !!ctx_r0.cookiePreferences);
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.settings.policyUrl);
} }
export class CookieBannerComponent {
    constructor(bsModalService, cookieBannerService) {
        this.bsModalService = bsModalService;
        this.cookieBannerService = cookieBannerService;
        this.shouldDisable = false;
    }
    ngOnInit() {
        this.settings = this.cookieBannerService.getCookieBannerSettings();
        this.cookiePreferences = this.cookieBannerService.getCookiePreferencesConfig();
        this.shouldShowCookieBanner();
    }
    onConfigurePreferences() {
        this.disableButtons(true);
        const initialState = {
            configCookiePreferences: this.cookiePreferences
        };
        const modalRef = this.bsModalService.show(CookieBannerPreferencesModalComponent, {
            initialState
        });
        modalRef.content.closeSubject.subscribe((userCookiePreferences) => {
            this.disableButtons(false);
            if (userCookiePreferences) {
                this.cookieBannerService.setCookies(userCookiePreferences);
                this.setCookieBannerVisibility(false);
            }
        });
    }
    acceptCookies() {
        this.cookieBannerService.setCookies(this.cookiePreferences || { required: true });
        this.setCookieBannerVisibility(false);
    }
    shouldShowCookieBanner() {
        this.setCookieBannerVisibility(this.cookieBannerService.shouldShowCookieBanner());
    }
    disableButtons(shouldDisable) {
        this.shouldDisable = shouldDisable;
    }
    setCookieBannerVisibility(shouldShow) {
        this.showBanner = shouldShow;
        this.cookieBannerService.isCookieBannerShowed$.next(shouldShow);
    }
}
CookieBannerComponent.ɵfac = function CookieBannerComponent_Factory(t) { return new (t || CookieBannerComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.BsModalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.CookieBannerService)); };
CookieBannerComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: CookieBannerComponent, selectors: [["c8y-cookie-banner"]], decls: 3, vars: 1, consts: [[1, "c8y-cookie-banner"], [1, "container"], ["class", "row p-t-16 p-b-16", 4, "ngIf"], [1, "row", "p-t-16", "p-b-16"], ["class", "col-md-2", 4, "ngIf"], [1, "col-md-7"], [1, "cookie-banner-content", "text-pre-line"], [1, "col-md-3"], [1, "row"], [1, "col-sm-6", "col-md-12"], [1, "p-b-16", "visible-sm", "visible-xs"], [1, "btn", "btn-primary", "btn-block", 3, "disabled", "click"], ["class", "col-sm-6 col-md-12", 4, "ngIf"], [1, "p-b-16"], ["class", "btn btn-default btn-block", "target", "_blank", 3, "href", 4, "ngIf"], [1, "col-md-2"], [1, "btn", "btn-default", "btn-block", 3, "disabled", "click"], ["target", "_blank", 1, "btn", "btn-default", "btn-block", 3, "href"]], template: function CookieBannerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵtemplate(2, CookieBannerComponent_div_2_Template, 17, 10, "div", 2);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showBanner);
    } }, directives: [ɵngcc3.NgIf], pipes: [ɵngcc4.C8yTranslatePipe], encapsulation: 2 });
CookieBannerComponent.ctorParameters = () => [
    { type: BsModalService },
    { type: CookieBannerService }
];
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CookieBannerComponent, [{
        type: Component,
        args: [{
                selector: 'c8y-cookie-banner',
                template: "<div class=\"c8y-cookie-banner\">\n  <div class=\"container\">\n    <div class=\"row p-t-16 p-b-16\" *ngIf=\"showBanner\">\n      <div class=\"col-md-2\" *ngIf=\"settings.cookieBannerTitle\">\n        <h3>{{ settings.cookieBannerTitle | translate }}</h3>\n        <div class=\"p-b-16 visible-sm visible-xs\"></div>\n      </div>\n      <div class=\"col-md-7\">\n        <div class=\"cookie-banner-content text-pre-line\">\n          {{ settings.cookieBannerText | translate }}\n        </div>\n      </div>\n      <div class=\"col-md-3\">\n        <div class=\"row\">\n          <div class=\"col-sm-6 col-md-12\">\n            <div class=\"p-b-16 visible-sm visible-xs\"></div>\n            <button\n              class=\"btn btn-primary btn-block\"\n              (click)=\"acceptCookies()\"\n              [disabled]=\"shouldDisable\"\n            >\n              {{ 'Agree and proceed' | translate }}\n            </button>\n          </div>\n          <div class=\"col-sm-6 col-md-12\" *ngIf=\"!!cookiePreferences\">\n            <div class=\"p-b-16\"></div>\n            <button\n              class=\"btn btn-default btn-block\"\n              (click)=\"onConfigurePreferences()\"\n              [disabled]=\"shouldDisable\"\n            >\n              {{ 'Configure preferences' | translate }}\n            </button>\n          </div>\n          <div class=\"col-sm-6 col-md-12\">\n            <div class=\"p-b-16\"></div>\n            <a\n              class=\"btn btn-default btn-block\"\n              href=\"{{ settings.policyUrl }}\"\n              target=\"_blank\"\n              *ngIf=\"settings.policyUrl\"\n            >\n              {{ 'Privacy policy' | translate }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"
            }]
    }], function () { return [{ type: ɵngcc1.BsModalService }, { type: ɵngcc2.CookieBannerService }]; }, null); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29va2llLWJhbm5lci5jb21wb25lbnQuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2NvcmUvYm9vdHN0cmFwL2Nvb2tpZS1iYW5uZXIvY29va2llLWJhbm5lci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUNsRCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDckQsT0FBTyxFQUFFLHFDQUFxQyxFQUFFLE1BQU0sNkVBQTZFLENBQUM7QUFFcEksT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0seUJBQXlCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNOUQsTUFBTSxPQUFPLHFCQUFxQjtBQUFHLElBS25DLFlBQ1UsY0FBOEIsRUFDOUIsbUJBQXdDO0FBQ2pELFFBRlMsbUJBQWMsR0FBZCxjQUFjLENBQWdCO0FBQUMsUUFDL0Isd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFxQjtBQUNwRCxRQUxFLGtCQUFhLEdBQVksS0FBSyxDQUFDO0FBQ2pDLElBSUssQ0FBQztBQUNOLElBQ0UsUUFBUTtBQUNWLFFBQUksSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztBQUN2RSxRQUFJLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsMEJBQTBCLEVBQUUsQ0FBQztBQUNuRixRQUFJLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0FBQ2xDLElBQUUsQ0FBQztBQUNILElBQ0Usc0JBQXNCO0FBQ3hCLFFBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM5QixRQUNJLE1BQU0sWUFBWSxHQUFHO0FBQ3pCLFlBQU0sdUJBQXVCLEVBQUUsSUFBSSxDQUFDLGlCQUFpQjtBQUNyRCxTQUFLLENBQUM7QUFDTixRQUNJLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLHFDQUFxQyxFQUFFO0FBQ3JGLFlBQU0sWUFBWTtBQUNsQixTQUFLLENBQUMsQ0FBQztBQUNQLFFBQ0ksUUFBUSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUMscUJBQXdDLEVBQUUsRUFBRTtBQUN6RixZQUFNLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDakMsWUFBTSxJQUFJLHFCQUFxQixFQUFFO0FBQ2pDLGdCQUFRLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLENBQUMscUJBQXFCLENBQUMsQ0FBQztBQUNuRSxnQkFBUSxJQUFJLENBQUMseUJBQXlCLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDOUMsYUFBTztBQUNQLFFBQUksQ0FBQyxDQUFDLENBQUM7QUFDUCxJQUFFLENBQUM7QUFDSCxJQUNFLGFBQWE7QUFDZixRQUFJLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLENBQ2pDLElBQUksQ0FBQyxpQkFBaUIsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FDN0MsQ0FBQztBQUNOLFFBQUksSUFBSSxDQUFDLHlCQUF5QixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzFDLElBQUUsQ0FBQztBQUNILElBQ1Usc0JBQXNCO0FBQ2hDLFFBQUksSUFBSSxDQUFDLHlCQUF5QixDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDLENBQUM7QUFDdEYsSUFBRSxDQUFDO0FBQ0gsSUFDVSxjQUFjLENBQUMsYUFBc0I7QUFDL0MsUUFBSSxJQUFJLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQztBQUN2QyxJQUFFLENBQUM7QUFDSCxJQUNVLHlCQUF5QixDQUFDLFVBQW1CO0FBQ3ZELFFBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7QUFDakMsUUFBSSxJQUFJLENBQUMsbUJBQW1CLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3BFLElBQUUsQ0FBQztBQUNIO2lEQTNEQyxTQUFTLFNBQUMsa0JBQ1QsUUFBUSxFQUFFLG1CQUFtQixrQkFDN0I7Ozs7Ozs7Ozs7MEZBRUc7QUFBQztBQUErQyxZQVQ1QyxjQUFjO0FBQUksWUFHbEIsbUJBQW1CO0FBQUc7Ozs7O2tEQUlnQixjQUM5Qzs7cUhBTGdDO0FBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQnNNb2RhbFNlcnZpY2UgfSBmcm9tICduZ3gtYm9vdHN0cmFwL21vZGFsJztcbmltcG9ydCB7IENvb2tpZUJhbm5lclByZWZlcmVuY2VzTW9kYWxDb21wb25lbnQgfSBmcm9tICcuL2Nvb2tpZS1iYW5uZXItcHJlZmVyZW5jZXMtbW9kYWwvY29va2llLWJhbm5lci1wcmVmZXJlbmNlcy1tb2RhbC5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ29va2llQmFubmVyU2V0dGluZ3MsIENvb2tpZVByZWZlcmVuY2VzIH0gZnJvbSAnLi9jb29raWUtYmFubmVyLm1vZGVsJztcbmltcG9ydCB7IENvb2tpZUJhbm5lclNlcnZpY2UgfSBmcm9tICcuL2Nvb2tpZS1iYW5uZXIuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2M4eS1jb29raWUtYmFubmVyJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2Nvb2tpZS1iYW5uZXIuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIENvb2tpZUJhbm5lckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIHNldHRpbmdzOiBDb29raWVCYW5uZXJTZXR0aW5ncztcbiAgc2hvd0Jhbm5lcjogYm9vbGVhbjtcbiAgc2hvdWxkRGlzYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xuICBjb29raWVQcmVmZXJlbmNlczogQ29va2llUHJlZmVyZW5jZXM7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgYnNNb2RhbFNlcnZpY2U6IEJzTW9kYWxTZXJ2aWNlLFxuICAgIHByaXZhdGUgY29va2llQmFubmVyU2VydmljZTogQ29va2llQmFubmVyU2VydmljZVxuICApIHt9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHRoaXMuY29va2llQmFubmVyU2VydmljZS5nZXRDb29raWVCYW5uZXJTZXR0aW5ncygpO1xuICAgIHRoaXMuY29va2llUHJlZmVyZW5jZXMgPSB0aGlzLmNvb2tpZUJhbm5lclNlcnZpY2UuZ2V0Q29va2llUHJlZmVyZW5jZXNDb25maWcoKTtcbiAgICB0aGlzLnNob3VsZFNob3dDb29raWVCYW5uZXIoKTtcbiAgfVxuXG4gIG9uQ29uZmlndXJlUHJlZmVyZW5jZXMoKSB7XG4gICAgdGhpcy5kaXNhYmxlQnV0dG9ucyh0cnVlKTtcblxuICAgIGNvbnN0IGluaXRpYWxTdGF0ZSA9IHtcbiAgICAgIGNvbmZpZ0Nvb2tpZVByZWZlcmVuY2VzOiB0aGlzLmNvb2tpZVByZWZlcmVuY2VzXG4gICAgfTtcblxuICAgIGNvbnN0IG1vZGFsUmVmID0gdGhpcy5ic01vZGFsU2VydmljZS5zaG93KENvb2tpZUJhbm5lclByZWZlcmVuY2VzTW9kYWxDb21wb25lbnQsIHtcbiAgICAgIGluaXRpYWxTdGF0ZVxuICAgIH0pO1xuXG4gICAgbW9kYWxSZWYuY29udGVudC5jbG9zZVN1YmplY3Quc3Vic2NyaWJlKCh1c2VyQ29va2llUHJlZmVyZW5jZXM6IENvb2tpZVByZWZlcmVuY2VzKSA9PiB7XG4gICAgICB0aGlzLmRpc2FibGVCdXR0b25zKGZhbHNlKTtcbiAgICAgIGlmICh1c2VyQ29va2llUHJlZmVyZW5jZXMpIHtcbiAgICAgICAgdGhpcy5jb29raWVCYW5uZXJTZXJ2aWNlLnNldENvb2tpZXModXNlckNvb2tpZVByZWZlcmVuY2VzKTtcbiAgICAgICAgdGhpcy5zZXRDb29raWVCYW5uZXJWaXNpYmlsaXR5KGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFjY2VwdENvb2tpZXMoKSB7XG4gICAgdGhpcy5jb29raWVCYW5uZXJTZXJ2aWNlLnNldENvb2tpZXMoXG4gICAgICB0aGlzLmNvb2tpZVByZWZlcmVuY2VzIHx8IHsgcmVxdWlyZWQ6IHRydWUgfVxuICAgICk7XG4gICAgdGhpcy5zZXRDb29raWVCYW5uZXJWaXNpYmlsaXR5KGZhbHNlKTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkU2hvd0Nvb2tpZUJhbm5lcigpIHtcbiAgICB0aGlzLnNldENvb2tpZUJhbm5lclZpc2liaWxpdHkodGhpcy5jb29raWVCYW5uZXJTZXJ2aWNlLnNob3VsZFNob3dDb29raWVCYW5uZXIoKSk7XG4gIH1cblxuICBwcml2YXRlIGRpc2FibGVCdXR0b25zKHNob3VsZERpc2FibGU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnNob3VsZERpc2FibGUgPSBzaG91bGREaXNhYmxlO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRDb29raWVCYW5uZXJWaXNpYmlsaXR5KHNob3VsZFNob3c6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnNob3dCYW5uZXIgPSBzaG91bGRTaG93O1xuICAgIHRoaXMuY29va2llQmFubmVyU2VydmljZS5pc0Nvb2tpZUJhbm5lclNob3dlZCQubmV4dChzaG91bGRTaG93KTtcbiAgfVxufVxuIl19