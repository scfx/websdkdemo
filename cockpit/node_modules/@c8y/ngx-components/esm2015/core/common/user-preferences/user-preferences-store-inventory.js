import { __awaiter } from "tslib";
export class UserPreferencesStorageInventory {
    constructor(inventory) {
        this.inventory = inventory;
        this.TYPE = 'c8y_UserPreference';
    }
    get(key) {
        return __awaiter(this, void 0, void 0, function* () {
            const { data } = yield this.inventory.list({ fragmentType: key });
            return data.length ? data[0][key] : undefined;
        });
    }
    set(key, value) {
        return __awaiter(this, void 0, void 0, function* () {
            const { data } = yield this.inventory.list({ fragmentType: key });
            const updateMo = { [key]: value, type: this.TYPE };
            let out;
            if (data.length) {
                updateMo.id = data[0].id;
                out = this.inventory.update(updateMo);
            }
            else {
                out = this.inventory.create(updateMo);
            }
            return out;
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci1wcmVmZXJlbmNlcy1zdG9yZS1pbnZlbnRvcnkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9jb3JlL2NvbW1vbi91c2VyLXByZWZlcmVuY2VzL3VzZXItcHJlZmVyZW5jZXMtc3RvcmUtaW52ZW50b3J5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFFQSxNQUFNLE9BQU8sK0JBQStCO0lBRzFDLFlBQ1UsU0FBMkI7UUFBM0IsY0FBUyxHQUFULFNBQVMsQ0FBa0I7UUFIckMsU0FBSSxHQUFHLG9CQUFvQixDQUFDO0lBSXpCLENBQUM7SUFFRSxHQUFHLENBQUMsR0FBRzs7WUFDWCxNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUcsTUFBTSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFDLFlBQVksRUFBRSxHQUFHLEVBQUMsQ0FBQyxDQUFDO1lBQ2hFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7UUFDaEQsQ0FBQztLQUFBO0lBRUssR0FBRyxDQUFDLEdBQUcsRUFBRSxLQUFLOztZQUNsQixNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUcsTUFBTSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFDLFlBQVksRUFBRSxHQUFHLEVBQUMsQ0FBQyxDQUFDO1lBQ2hFLE1BQU0sUUFBUSxHQUFRLEVBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUMsQ0FBQztZQUN0RCxJQUFJLEdBQUcsQ0FBQztZQUVSLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtnQkFDZixRQUFRLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7Z0JBQ3pCLEdBQUcsR0FBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUN4QztpQkFBTTtnQkFDTCxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDdkM7WUFDRCxPQUFPLEdBQUcsQ0FBQztRQUNiLENBQUM7S0FBQTtDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW52ZW50b3J5U2VydmljZSB9IGZyb20gJ0BjOHkvY2xpZW50JztcblxuZXhwb3J0IGNsYXNzIFVzZXJQcmVmZXJlbmNlc1N0b3JhZ2VJbnZlbnRvcnkge1xuICBUWVBFID0gJ2M4eV9Vc2VyUHJlZmVyZW5jZSc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBpbnZlbnRvcnk6IEludmVudG9yeVNlcnZpY2VcbiAgKSB7fVxuXG4gIGFzeW5jIGdldChrZXkpIHtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHRoaXMuaW52ZW50b3J5Lmxpc3Qoe2ZyYWdtZW50VHlwZToga2V5fSk7XG4gICAgcmV0dXJuIGRhdGEubGVuZ3RoID8gZGF0YVswXVtrZXldIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgYXN5bmMgc2V0KGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHRoaXMuaW52ZW50b3J5Lmxpc3Qoe2ZyYWdtZW50VHlwZToga2V5fSk7XG4gICAgY29uc3QgdXBkYXRlTW86IGFueSA9IHtba2V5XTogdmFsdWUsIHR5cGU6IHRoaXMuVFlQRX07XG4gICAgbGV0IG91dDtcblxuICAgIGlmIChkYXRhLmxlbmd0aCkge1xuICAgICAgdXBkYXRlTW8uaWQgPSBkYXRhWzBdLmlkO1xuICAgICAgb3V0ID0gIHRoaXMuaW52ZW50b3J5LnVwZGF0ZSh1cGRhdGVNbyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dCA9IHRoaXMuaW52ZW50b3J5LmNyZWF0ZSh1cGRhdGVNbyk7XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG4gIH1cbn1cbiJdfQ==