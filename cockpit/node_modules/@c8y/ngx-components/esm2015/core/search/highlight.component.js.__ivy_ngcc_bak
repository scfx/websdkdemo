import { Component, ElementRef, Input, ViewChild } from '@angular/core';
import { escape, escapeRegExp } from 'lodash-es';
export class HighlightComponent {
    constructor() {
        this.pattern = '';
        this.text = '';
        this.elementClass = 'text-info';
        this.highlightedText = '';
    }
    ngOnChanges() {
        const textNoHtml = escape(this.text || '');
        const patternNoHtml = escape(this.pattern || '');
        const patternForRegex = escapeRegExp(patternNoHtml).replace(/\\\*/g, '.*');
        this.highlightedText = textNoHtml.replace(new RegExp(patternForRegex, 'i'), `<strong class="${this.elementClass}">$&</strong>`);
    }
}
HighlightComponent.decorators = [
    { type: Component, args: [{
                selector: 'c8y-highlight',
                template: '<span [innerHTML]="highlightedText"></span>'
            },] }
];
HighlightComponent.propDecorators = {
    container: [{ type: ViewChild, args: ['text', { read: ElementRef, static: true },] }],
    pattern: [{ type: Input }],
    text: [{ type: Input }],
    elementClass: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlnaGxpZ2h0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2NvcmUvc2VhcmNoL2hpZ2hsaWdodC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxVQUFVLEVBQ1YsS0FBSyxFQUNMLFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLFdBQVcsQ0FBQztBQU1qRCxNQUFNLE9BQU8sa0JBQWtCO0lBSi9CO1FBU0UsWUFBTyxHQUFXLEVBQUUsQ0FBQztRQUdyQixTQUFJLEdBQVcsRUFBRSxDQUFDO1FBR2xCLGlCQUFZLEdBQVcsV0FBVyxDQUFDO1FBRW5DLG9CQUFlLEdBQVcsRUFBRSxDQUFDO0lBVy9CLENBQUM7SUFUQyxXQUFXO1FBQ1QsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLENBQUM7UUFDM0MsTUFBTSxhQUFhLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLElBQUksRUFBRSxDQUFDLENBQUM7UUFDakQsTUFBTSxlQUFlLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDM0UsSUFBSSxDQUFDLGVBQWUsR0FBRyxVQUFVLENBQUMsT0FBTyxDQUN2QyxJQUFJLE1BQU0sQ0FBQyxlQUFlLEVBQUUsR0FBRyxDQUFDLEVBQ2hDLGtCQUFrQixJQUFJLENBQUMsWUFBWSxlQUFlLENBQ25ELENBQUM7SUFDSixDQUFDOzs7WUEzQkYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxlQUFlO2dCQUN6QixRQUFRLEVBQUUsNkNBQTZDO2FBQ3hEOzs7d0JBRUUsU0FBUyxTQUFDLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtzQkFHcEQsS0FBSzttQkFHTCxLQUFLOzJCQUdMLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIElucHV0LFxuICBWaWV3Q2hpbGRcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBlc2NhcGUsIGVzY2FwZVJlZ0V4cCB9IGZyb20gJ2xvZGFzaC1lcyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2M4eS1oaWdobGlnaHQnLFxuICB0ZW1wbGF0ZTogJzxzcGFuIFtpbm5lckhUTUxdPVwiaGlnaGxpZ2h0ZWRUZXh0XCI+PC9zcGFuPidcbn0pXG5leHBvcnQgY2xhc3MgSGlnaGxpZ2h0Q29tcG9uZW50IHtcbiAgQFZpZXdDaGlsZCgndGV4dCcsIHsgcmVhZDogRWxlbWVudFJlZiwgc3RhdGljOiB0cnVlIH0pXG4gIGNvbnRhaW5lcjogRWxlbWVudFJlZjtcblxuICBASW5wdXQoKVxuICBwYXR0ZXJuOiBzdHJpbmcgPSAnJztcblxuICBASW5wdXQoKVxuICB0ZXh0OiBzdHJpbmcgPSAnJztcblxuICBASW5wdXQoKVxuICBlbGVtZW50Q2xhc3M6IHN0cmluZyA9ICd0ZXh0LWluZm8nO1xuXG4gIGhpZ2hsaWdodGVkVGV4dDogc3RyaW5nID0gJyc7XG5cbiAgbmdPbkNoYW5nZXMoKTogdm9pZCB7XG4gICAgY29uc3QgdGV4dE5vSHRtbCA9IGVzY2FwZSh0aGlzLnRleHQgfHwgJycpO1xuICAgIGNvbnN0IHBhdHRlcm5Ob0h0bWwgPSBlc2NhcGUodGhpcy5wYXR0ZXJuIHx8ICcnKTtcbiAgICBjb25zdCBwYXR0ZXJuRm9yUmVnZXggPSBlc2NhcGVSZWdFeHAocGF0dGVybk5vSHRtbCkucmVwbGFjZSgvXFxcXFxcKi9nLCAnLionKTtcbiAgICB0aGlzLmhpZ2hsaWdodGVkVGV4dCA9IHRleHROb0h0bWwucmVwbGFjZShcbiAgICAgIG5ldyBSZWdFeHAocGF0dGVybkZvclJlZ2V4LCAnaScpLFxuICAgICAgYDxzdHJvbmcgY2xhc3M9XCIke3RoaXMuZWxlbWVudENsYXNzfVwiPiQmPC9zdHJvbmc+YFxuICAgICk7XG4gIH1cbn1cbiJdfQ==