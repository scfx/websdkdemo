import { __awaiter } from "tslib";
import { Component, Input } from '@angular/core';
import { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';
import { BulkOperationsService } from '@c8y/ngx-components/operations/bulk-operations-service';
export class BulkOperationWrapperComponent {
    constructor(bulkOperationsService, modalRef, modalService) {
        this.bulkOperationsService = bulkOperationsService;
        this.modalRef = modalRef;
        this.modalService = modalService;
    }
    // openDetails function needs to be defined in the both places (component and the service) to avoid circular dependency.
    // BulkOperationsService is a downgraded service, thus we can't just use other approach where we could pass
    // BulkOperationWrapperComponent as a second argument in the bulkOperationsService.openDetails(bulkOperationId, BulkOperationWrapperComponent).
    openDetails(bulkOperationId) {
        return __awaiter(this, void 0, void 0, function* () {
            const bulkOperation = (yield this.bulkOperationsService.getBulkOperationById(bulkOperationId)).data;
            const initialState = { bulkOperation };
            this.modalService.show(BulkOperationWrapperComponent, {
                initialState,
                class: 'modal-lg'
            });
        });
    }
}
BulkOperationWrapperComponent.decorators = [
    { type: Component, args: [{
                selector: 'c8y-bulk-operations-wrapper',
                template: "<div class=\"viewport-modal\">\n  <div class=\"modal-header\">\n    <h3>{{ 'Bulk operation details' | translate }}</h3>\n  </div>\n\n  <div class=\"modal-inner-scroll\">\n    <c8y-bulk-operation-list-item\n      [bulkOperation]=\"bulkOperation\"\n      [detailsCollapsed]=\"false\"\n      [readOnly]=\"true\"\n      (showFailedOperation)=\"openDetails($event)\"\n    ></c8y-bulk-operation-list-item>\n  </div>\n\n  <div class=\"modal-footer\">\n    <button title=\"{{ 'Close' | translate }}\" class=\"btn btn-default\" (click)=\"modalRef.hide()\">\n      {{ 'Close' | translate }}\n    </button>\n  </div>\n</div>\n"
            },] }
];
BulkOperationWrapperComponent.ctorParameters = () => [
    { type: BulkOperationsService },
    { type: BsModalRef },
    { type: BsModalService }
];
BulkOperationWrapperComponent.propDecorators = {
    bulkOperation: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVsay1vcGVyYXRpb24td3JhcHBlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9vcGVyYXRpb25zL2J1bGstb3BlcmF0aW9ucy1saXN0L2J1bGstb3BlcmF0aW9uLXdyYXBwZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUVqRCxPQUFPLEVBQUUsVUFBVSxFQUFFLGNBQWMsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2pFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHdEQUF3RCxDQUFDO0FBTS9GLE1BQU0sT0FBTyw2QkFBNkI7SUFHeEMsWUFDUyxxQkFBNEMsRUFDNUMsUUFBb0IsRUFDbkIsWUFBNEI7UUFGN0IsMEJBQXFCLEdBQXJCLHFCQUFxQixDQUF1QjtRQUM1QyxhQUFRLEdBQVIsUUFBUSxDQUFZO1FBQ25CLGlCQUFZLEdBQVosWUFBWSxDQUFnQjtJQUNuQyxDQUFDO0lBRUosd0hBQXdIO0lBQ3hILDJHQUEyRztJQUMzRywrSUFBK0k7SUFDekksV0FBVyxDQUFDLGVBQWdDOztZQUNoRCxNQUFNLGFBQWEsR0FBbUIsQ0FBQyxNQUFNLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxvQkFBb0IsQ0FDMUYsZUFBZSxDQUNoQixDQUFDLENBQUMsSUFBSSxDQUFDO1lBQ1IsTUFBTSxZQUFZLEdBQUcsRUFBRSxhQUFhLEVBQUUsQ0FBQztZQUN2QyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyw2QkFBNkIsRUFBRTtnQkFDcEQsWUFBWTtnQkFDWixLQUFLLEVBQUUsVUFBVTthQUNsQixDQUFDLENBQUM7UUFDTCxDQUFDO0tBQUE7OztZQXpCRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLDZCQUE2QjtnQkFDdkMsbW5CQUFzRDthQUN2RDs7O1lBTFEscUJBQXFCO1lBRHJCLFVBQVU7WUFBRSxjQUFjOzs7NEJBUWhDLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBJT3BlcmF0aW9uQnVsayB9IGZyb20gJ0BjOHkvY2xpZW50JztcbmltcG9ydCB7IEJzTW9kYWxSZWYsIEJzTW9kYWxTZXJ2aWNlIH0gZnJvbSAnbmd4LWJvb3RzdHJhcC9tb2RhbCc7XG5pbXBvcnQgeyBCdWxrT3BlcmF0aW9uc1NlcnZpY2UgfSBmcm9tICdAYzh5L25neC1jb21wb25lbnRzL29wZXJhdGlvbnMvYnVsay1vcGVyYXRpb25zLXNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjOHktYnVsay1vcGVyYXRpb25zLXdyYXBwZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vYnVsay1vcGVyYXRpb24td3JhcHBlci5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgQnVsa09wZXJhdGlvbldyYXBwZXJDb21wb25lbnQge1xuICBASW5wdXQoKSBidWxrT3BlcmF0aW9uOiBQYXJ0aWFsPElPcGVyYXRpb25CdWxrPjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgYnVsa09wZXJhdGlvbnNTZXJ2aWNlOiBCdWxrT3BlcmF0aW9uc1NlcnZpY2UsXG4gICAgcHVibGljIG1vZGFsUmVmOiBCc01vZGFsUmVmLFxuICAgIHByaXZhdGUgbW9kYWxTZXJ2aWNlOiBCc01vZGFsU2VydmljZVxuICApIHt9XG5cbiAgLy8gb3BlbkRldGFpbHMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgZGVmaW5lZCBpbiB0aGUgYm90aCBwbGFjZXMgKGNvbXBvbmVudCBhbmQgdGhlIHNlcnZpY2UpIHRvIGF2b2lkIGNpcmN1bGFyIGRlcGVuZGVuY3kuXG4gIC8vIEJ1bGtPcGVyYXRpb25zU2VydmljZSBpcyBhIGRvd25ncmFkZWQgc2VydmljZSwgdGh1cyB3ZSBjYW4ndCBqdXN0IHVzZSBvdGhlciBhcHByb2FjaCB3aGVyZSB3ZSBjb3VsZCBwYXNzXG4gIC8vIEJ1bGtPcGVyYXRpb25XcmFwcGVyQ29tcG9uZW50IGFzIGEgc2Vjb25kIGFyZ3VtZW50IGluIHRoZSBidWxrT3BlcmF0aW9uc1NlcnZpY2Uub3BlbkRldGFpbHMoYnVsa09wZXJhdGlvbklkLCBCdWxrT3BlcmF0aW9uV3JhcHBlckNvbXBvbmVudCkuXG4gIGFzeW5jIG9wZW5EZXRhaWxzKGJ1bGtPcGVyYXRpb25JZDogc3RyaW5nIHwgbnVtYmVyKSB7XG4gICAgY29uc3QgYnVsa09wZXJhdGlvbjogSU9wZXJhdGlvbkJ1bGsgPSAoYXdhaXQgdGhpcy5idWxrT3BlcmF0aW9uc1NlcnZpY2UuZ2V0QnVsa09wZXJhdGlvbkJ5SWQoXG4gICAgICBidWxrT3BlcmF0aW9uSWRcbiAgICApKS5kYXRhO1xuICAgIGNvbnN0IGluaXRpYWxTdGF0ZSA9IHsgYnVsa09wZXJhdGlvbiB9O1xuICAgIHRoaXMubW9kYWxTZXJ2aWNlLnNob3coQnVsa09wZXJhdGlvbldyYXBwZXJDb21wb25lbnQsIHtcbiAgICAgIGluaXRpYWxTdGF0ZSxcbiAgICAgIGNsYXNzOiAnbW9kYWwtbGcnXG4gICAgfSk7XG4gIH1cbn1cbiJdfQ==