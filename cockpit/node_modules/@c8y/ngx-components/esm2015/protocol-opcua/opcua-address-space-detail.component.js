import { Component, Input, Output, EventEmitter } from '@angular/core';
import { AddressSpaceService } from './address-space.service';
import { omit } from 'lodash-es';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from './address-space.service';
import * as ɵngcc2 from '@angular/common';
import * as ɵngcc3 from '@c8y/ngx-components';

function OpcuaAddressSpaceDetailComponent_tr_23_td_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "td", 11);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "json");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const item_r2 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, item_r2.value), " ");
} }
function OpcuaAddressSpaceDetailComponent_tr_23_td_4_a_1_Template(rf, ctx) { if (rf & 1) {
    const _r10 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "a", 13);
    ɵngcc0.ɵɵlistener("click", function OpcuaAddressSpaceDetailComponent_tr_23_td_4_a_1_Template_a_click_0_listener() { const restoredCtx = ɵngcc0.ɵɵrestoreView(_r10); const value_r8 = restoredCtx.$implicit; const ctx_r9 = ɵngcc0.ɵɵnextContext(3); return ctx_r9.navigateTo(value_r8); });
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "json");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const value_r8 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, value_r8), "");
} }
function OpcuaAddressSpaceDetailComponent_tr_23_td_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "td", 11);
    ɵngcc0.ɵɵtemplate(1, OpcuaAddressSpaceDetailComponent_tr_23_td_4_a_1_Template, 3, 3, "a", 12);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const item_r2 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", item_r2.value);
} }
function OpcuaAddressSpaceDetailComponent_tr_23_td_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "td");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const item_r2 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", item_r2.value, " ");
} }
function OpcuaAddressSpaceDetailComponent_tr_23_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "tr");
    ɵngcc0.ɵɵelementStart(1, "td");
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(3, OpcuaAddressSpaceDetailComponent_tr_23_td_3_Template, 3, 3, "td", 9);
    ɵngcc0.ɵɵtemplate(4, OpcuaAddressSpaceDetailComponent_tr_23_td_4_Template, 2, 1, "td", 9);
    ɵngcc0.ɵɵtemplate(5, OpcuaAddressSpaceDetailComponent_tr_23_td_5_Template, 2, 1, "td", 10);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const item_r2 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(item_r2.key);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", item_r2.key === "absolutePaths");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", item_r2.key === "ancestorNodeIds");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", item_r2.key !== "absolutePaths" && item_r2.key !== "ancestorNodeIds");
} }
function OpcuaAddressSpaceDetailComponent_tr_45_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "tr");
    ɵngcc0.ɵɵelementStart(1, "td");
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(3, "td", 11);
    ɵngcc0.ɵɵtext(4);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const item_r13 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(item_r13.referenceLabel);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(item_r13.targetLabel);
} }
const _c0 = function (a0, a1) { return { fadeInRightBig: a0, fadeOutRightBig: a1 }; };
export class OpcuaAddressSpaceDetailComponent {
    constructor(addressSpaceService) {
        this.addressSpaceService = addressSpaceService;
        this.selected = false;
        this.showDetails = false;
        this.toggleAttrDetail = new EventEmitter();
    }
    set node(n) {
        this._node = n;
        if (n) {
            this.setNodeData(n);
        }
        else {
            // remove details from current view
            this.showDetails = false;
        }
    }
    setNodeData(nodeData) {
        this.showDetails = true;
        const { attributes, references } = nodeData;
        this.nodeDataRef = references;
        const omitList = [
            'attributes',
            'references',
            'children',
            'currentlyLoadingChildren',
            'expanded',
            'browsePath',
            'relativePath',
            'parentNode'
        ];
        this.nodeDataAttr = Object.assign({}, attributes, omit(nodeData, omitList));
    }
    toggleDetail(node) {
        this.showDetails = !this.showDetails;
        this.toggleAttrDetail.emit(node);
    }
    navigateTo(ancestors) {
        const nodeNavData = {
            node: this._node,
            selectedAncestorIds: ancestors
        };
        this.toggleDetail(this._node);
        this.addressSpaceService.triggerNodeToOpen(nodeNavData);
    }
}
OpcuaAddressSpaceDetailComponent.ɵfac = function OpcuaAddressSpaceDetailComponent_Factory(t) { return new (t || OpcuaAddressSpaceDetailComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.AddressSpaceService)); };
OpcuaAddressSpaceDetailComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: OpcuaAddressSpaceDetailComponent, selectors: [["opcua-address-space-detail"]], inputs: { node: "node" }, outputs: { toggleAttrDetail: "toggleAttrDetail" }, decls: 46, vars: 33, consts: [[1, "card", "flex-scroll", "m-b-4", "split-row-2", "animated", "fast", 2, "pointer-events", "all", 3, "ngClass"], [1, "card-header", "separator"], [1, "close", "flex-item-right", "visible-sm", "visible-xs", 3, "title", "click"], [1, "card-inner-scroll"], [1, "card-block"], [1, "table", "table-striped", "table-condensed"], ["width", "50%"], [4, "ngFor", "ngForOf"], [1, "card", "flex-scroll", "split-row-2", "animated", "fast", 2, "pointer-events", "all", 3, "ngClass"], ["class", "text-break-word", 4, "ngIf"], [4, "ngIf"], [1, "text-break-word"], [3, "click", 4, "ngFor", "ngForOf"], [3, "click"]], template: function OpcuaAddressSpaceDetailComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵelementStart(2, "h4");
        ɵngcc0.ɵɵtext(3);
        ɵngcc0.ɵɵpipe(4, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(5, "button", 2);
        ɵngcc0.ɵɵlistener("click", function OpcuaAddressSpaceDetailComponent_Template_button_click_5_listener() { return ctx.toggleDetail(ctx.nodeDataAttr); });
        ɵngcc0.ɵɵpipe(6, "translate");
        ɵngcc0.ɵɵtext(7, " \u00D7 ");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(8, "div", 3);
        ɵngcc0.ɵɵelementStart(9, "div", 4);
        ɵngcc0.ɵɵelementStart(10, "table", 5);
        ɵngcc0.ɵɵelementStart(11, "colgroup");
        ɵngcc0.ɵɵelement(12, "col", 6);
        ɵngcc0.ɵɵelement(13, "col", 6);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(14, "thead");
        ɵngcc0.ɵɵelementStart(15, "tr");
        ɵngcc0.ɵɵelementStart(16, "th");
        ɵngcc0.ɵɵtext(17);
        ɵngcc0.ɵɵpipe(18, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(19, "th");
        ɵngcc0.ɵɵtext(20);
        ɵngcc0.ɵɵpipe(21, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(22, "tbody");
        ɵngcc0.ɵɵtemplate(23, OpcuaAddressSpaceDetailComponent_tr_23_Template, 6, 4, "tr", 7);
        ɵngcc0.ɵɵpipe(24, "keyvalue");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(25, "div", 8);
        ɵngcc0.ɵɵelementStart(26, "div", 1);
        ɵngcc0.ɵɵelementStart(27, "h4");
        ɵngcc0.ɵɵtext(28);
        ɵngcc0.ɵɵpipe(29, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(30, "div", 3);
        ɵngcc0.ɵɵelementStart(31, "div", 4);
        ɵngcc0.ɵɵelementStart(32, "table", 5);
        ɵngcc0.ɵɵelementStart(33, "colgroup");
        ɵngcc0.ɵɵelement(34, "col", 6);
        ɵngcc0.ɵɵelement(35, "col", 6);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(36, "thead");
        ɵngcc0.ɵɵelementStart(37, "tr");
        ɵngcc0.ɵɵelementStart(38, "th");
        ɵngcc0.ɵɵtext(39);
        ɵngcc0.ɵɵpipe(40, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(41, "th");
        ɵngcc0.ɵɵtext(42);
        ɵngcc0.ɵɵpipe(43, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(44, "tbody");
        ɵngcc0.ɵɵtemplate(45, OpcuaAddressSpaceDetailComponent_tr_45_Template, 5, 2, "tr", 7);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction2(27, _c0, ctx.showDetails, !ctx.showDetails));
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 11, "Attributes"));
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵpropertyInterpolate("title", ɵngcc0.ɵɵpipeBind1(6, 13, "Close"));
        ɵngcc0.ɵɵadvance(12);
        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(18, 15, "Attribute"));
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(21, 17, "Value"));
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngForOf", ɵngcc0.ɵɵpipeBind1(24, 19, ctx.nodeDataAttr));
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction2(30, _c0, ctx.showDetails, !ctx.showDetails));
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(29, 21, "References"));
        ɵngcc0.ɵɵadvance(11);
        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(40, 23, "Attribute"));
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(43, 25, "Value"));
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.nodeDataRef);
    } }, directives: [ɵngcc2.NgClass, ɵngcc2.NgForOf, ɵngcc2.NgIf], pipes: [ɵngcc3.C8yTranslatePipe, ɵngcc2.KeyValuePipe, ɵngcc2.JsonPipe], encapsulation: 2 });
OpcuaAddressSpaceDetailComponent.ctorParameters = () => [
    { type: AddressSpaceService }
];
OpcuaAddressSpaceDetailComponent.propDecorators = {
    node: [{ type: Input }],
    toggleAttrDetail: [{ type: Output }]
};
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OpcuaAddressSpaceDetailComponent, [{
        type: Component,
        args: [{
                selector: 'opcua-address-space-detail',
                template: "<div\n  class=\"card flex-scroll m-b-4 split-row-2 animated fast\"\n  style=\"pointer-events: all\"\n  [ngClass]=\"{ fadeInRightBig: showDetails, fadeOutRightBig: !showDetails }\"\n>\n  <div class=\"card-header separator \">\n    <h4>{{ 'Attributes' | translate }}</h4>\n    <button\n      class=\"close flex-item-right visible-sm visible-xs\"\n      title=\"{{ 'Close' | translate }}\"\n      (click)=\"toggleDetail(nodeDataAttr)\"\n    >\n      &times;\n    </button>\n  </div>\n  <div class=\"card-inner-scroll\">\n    <div class=\"card-block\">\n      <table class=\"table table-striped table-condensed\">\n        <colgroup>\n          <col width=\"50%\" />\n          <col width=\"50%\" />\n        </colgroup>\n        <thead>\n          <tr>\n            <th>{{ 'Attribute' | translate }}</th>\n            <th>{{ 'Value' | translate }}</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of nodeDataAttr | keyvalue\">\n            <td>{{ item.key }}</td>\n            <td *ngIf=\"item.key === 'absolutePaths'\" class=\"text-break-word\">\n              {{ item.value | json }}\n            </td>\n            <td *ngIf=\"item.key === 'ancestorNodeIds'\" class=\"text-break-word\">\n              <a *ngFor=\"let value of item.value\" (click)=\"navigateTo(value)\">\n                {{ value | json }}</a\n              >\n            </td>\n            <td *ngIf=\"item.key !== 'absolutePaths' && item.key !== 'ancestorNodeIds'\">\n              {{ item.value }}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n<div\n  class=\"card flex-scroll split-row-2 animated fast\"\n  style=\"pointer-events: all\"\n  [ngClass]=\"{ fadeInRightBig: showDetails, fadeOutRightBig: !showDetails }\"\n>\n  <div class=\"card-header separator\">\n    <h4>{{ 'References' | translate }}</h4>\n  </div>\n  <div class=\"card-inner-scroll\">\n    <div class=\"card-block\">\n      <table class=\"table table-striped table-condensed\">\n        <colgroup>\n          <col width=\"50%\" />\n          <col width=\"50%\" />\n        </colgroup>\n        <thead>\n          <tr>\n            <th>{{ 'Attribute' | translate }}</th>\n            <th>{{ 'Value' | translate }}</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of nodeDataRef\">\n            <td>{{ item.referenceLabel }}</td>\n            <td class=\"text-break-word\">{{ item.targetLabel }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n"
            }]
    }], function () { return [{ type: ɵngcc1.AddressSpaceService }]; }, { toggleAttrDetail: [{
            type: Output
        }], node: [{
            type: Input
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BjdWEtYWRkcmVzcy1zcGFjZS1kZXRhaWwuY29tcG9uZW50LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9wcm90b2NvbC1vcGN1YS9vcGN1YS1hZGRyZXNzLXNwYWNlLWRldGFpbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN2RSxPQUFPLEVBQW9CLG1CQUFtQixFQUFzQixNQUFNLHlCQUF5QixDQUFDO0FBQ3BHLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxXQUFXLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTWpDLE1BQU0sT0FBTyxnQ0FBZ0M7QUFDN0MsSUFrQkUsWUFBb0IsbUJBQXdDO0FBQUksUUFBNUMsd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFxQjtBQUFDLFFBUDdELGFBQVEsR0FBWSxLQUFLLENBQUM7QUFDNUIsUUFBRSxnQkFBVyxHQUFZLEtBQUssQ0FBQztBQUMvQixRQUNZLHFCQUFnQixHQUFtQyxJQUFJLFlBQVksRUFBb0IsQ0FBQztBQUNwRyxJQUdpRSxDQUFDO0FBQ2xFLElBbkJFLElBQWEsSUFBSSxDQUFDLENBQUM7QUFDckIsUUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztBQUNuQixRQUFJLElBQUksQ0FBQyxFQUFFO0FBQ1gsWUFBTSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzFCLFNBQUs7QUFBQyxhQUFLO0FBQ1gsWUFBTSxtQ0FBbUM7QUFDekMsWUFBTSxJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztBQUMvQixTQUFLO0FBQ0wsSUFBRSxDQUFDO0FBQ0gsSUFVRSxXQUFXLENBQUMsUUFBUTtBQUN0QixRQUFJLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO0FBQzVCLFFBQUksTUFBTSxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsR0FBRyxRQUFRLENBQUM7QUFDaEQsUUFBSSxJQUFJLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQztBQUNsQyxRQUFJLE1BQU0sUUFBUSxHQUFHO0FBQ3JCLFlBQU0sWUFBWTtBQUNsQixZQUFNLFlBQVk7QUFDbEIsWUFBTSxVQUFVO0FBQ2hCLFlBQU0sMEJBQTBCO0FBQ2hDLFlBQU0sVUFBVTtBQUNoQixZQUFNLFlBQVk7QUFDbEIsWUFBTSxjQUFjO0FBQ3BCLFlBQU0sWUFBWTtBQUNsQixTQUFLLENBQUM7QUFDTixRQUFJLElBQUksQ0FBQyxZQUFZLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUNoRixJQUFFLENBQUM7QUFDSCxJQUNFLFlBQVksQ0FBQyxJQUFJO0FBQ25CLFFBQUksSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7QUFDekMsUUFBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3JDLElBQUUsQ0FBQztBQUNILElBQ0UsVUFBVSxDQUFDLFNBQW1CO0FBQ2hDLFFBQUksTUFBTSxXQUFXLEdBQXVCO0FBQzVDLFlBQU0sSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLO0FBQ3RCLFlBQU0sbUJBQW1CLEVBQUUsU0FBUztBQUNwQyxTQUFLLENBQUM7QUFDTixRQUNJLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2xDLFFBQUksSUFBSSxDQUFDLG1CQUFtQixDQUFDLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzVELElBQUUsQ0FBQztBQUNIOzREQXZEQyxTQUFTLFNBQUMsa0JBQ1QsUUFBUSxFQUFFLDRCQUE0QixrQkFDdEM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRCQUEwRDtXQUMzRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dLQUNJO0FBQUM7QUFDVSxZQVJXLG1CQUFtQjtBQUFHO0FBQUc7QUFDakQsbUJBT0EsS0FBSztBQUFLLCtCQWNWLE1BQU07QUFBSTs7Ozs7Ozs7Ozs7b0JBQUU7QUFBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBZGRyZXNzU3BhY2VOb2RlLCBBZGRyZXNzU3BhY2VTZXJ2aWNlLCBOb2RlTmF2aWdhdGlvbkRhdGEgfSBmcm9tICcuL2FkZHJlc3Mtc3BhY2Uuc2VydmljZSc7XG5pbXBvcnQgeyBvbWl0IH0gZnJvbSAnbG9kYXNoLWVzJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnb3BjdWEtYWRkcmVzcy1zcGFjZS1kZXRhaWwnLFxuICB0ZW1wbGF0ZVVybDogJy4vb3BjdWEtYWRkcmVzcy1zcGFjZS1kZXRhaWwuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIE9wY3VhQWRkcmVzc1NwYWNlRGV0YWlsQ29tcG9uZW50IHtcbiAgQElucHV0KCkgc2V0IG5vZGUobikge1xuICAgIHRoaXMuX25vZGUgPSBuO1xuICAgIGlmIChuKSB7XG4gICAgICB0aGlzLnNldE5vZGVEYXRhKG4pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyByZW1vdmUgZGV0YWlscyBmcm9tIGN1cnJlbnQgdmlld1xuICAgICAgdGhpcy5zaG93RGV0YWlscyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICBub2RlRGF0YUF0dHI6IE1hcDxzdHJpbmcsIHN0cmluZz47XG4gIG5vZGVEYXRhUmVmOiBvYmplY3RbXTtcbiAgc2VsZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgc2hvd0RldGFpbHM6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBAT3V0cHV0KCkgdG9nZ2xlQXR0ckRldGFpbDogRXZlbnRFbWl0dGVyPEFkZHJlc3NTcGFjZU5vZGU+ID0gbmV3IEV2ZW50RW1pdHRlcjxBZGRyZXNzU3BhY2VOb2RlPigpO1xuXG4gIHByaXZhdGUgX25vZGU6IEFkZHJlc3NTcGFjZU5vZGU7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBhZGRyZXNzU3BhY2VTZXJ2aWNlOiBBZGRyZXNzU3BhY2VTZXJ2aWNlKSB7fVxuICBzZXROb2RlRGF0YShub2RlRGF0YSkge1xuICAgIHRoaXMuc2hvd0RldGFpbHMgPSB0cnVlO1xuICAgIGNvbnN0IHsgYXR0cmlidXRlcywgcmVmZXJlbmNlcyB9ID0gbm9kZURhdGE7XG4gICAgdGhpcy5ub2RlRGF0YVJlZiA9IHJlZmVyZW5jZXM7XG4gICAgY29uc3Qgb21pdExpc3QgPSBbXG4gICAgICAnYXR0cmlidXRlcycsXG4gICAgICAncmVmZXJlbmNlcycsXG4gICAgICAnY2hpbGRyZW4nLFxuICAgICAgJ2N1cnJlbnRseUxvYWRpbmdDaGlsZHJlbicsXG4gICAgICAnZXhwYW5kZWQnLFxuICAgICAgJ2Jyb3dzZVBhdGgnLFxuICAgICAgJ3JlbGF0aXZlUGF0aCcsXG4gICAgICAncGFyZW50Tm9kZSdcbiAgICBdO1xuICAgIHRoaXMubm9kZURhdGFBdHRyID0gT2JqZWN0LmFzc2lnbih7fSwgYXR0cmlidXRlcywgb21pdChub2RlRGF0YSwgb21pdExpc3QpKTtcbiAgfVxuXG4gIHRvZ2dsZURldGFpbChub2RlKSB7XG4gICAgdGhpcy5zaG93RGV0YWlscyA9ICF0aGlzLnNob3dEZXRhaWxzO1xuICAgIHRoaXMudG9nZ2xlQXR0ckRldGFpbC5lbWl0KG5vZGUpO1xuICB9XG5cbiAgbmF2aWdhdGVUbyhhbmNlc3RvcnM6IHN0cmluZ1tdKSB7XG4gICAgY29uc3Qgbm9kZU5hdkRhdGE6IE5vZGVOYXZpZ2F0aW9uRGF0YSA9IHtcbiAgICAgIG5vZGU6IHRoaXMuX25vZGUsXG4gICAgICBzZWxlY3RlZEFuY2VzdG9ySWRzOiBhbmNlc3RvcnNcbiAgICB9O1xuXG4gICAgdGhpcy50b2dnbGVEZXRhaWwodGhpcy5fbm9kZSk7XG4gICAgdGhpcy5hZGRyZXNzU3BhY2VTZXJ2aWNlLnRyaWdnZXJOb2RlVG9PcGVuKG5vZGVOYXZEYXRhKTtcbiAgfVxufVxuIl19