{"__symbolic":"module","version":4,"metadata":{"DefaultSubscriptionsModule":{"__symbolic":"class","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"NgModule","line":9,"character":1},"arguments":[{"imports":[{"__symbolic":"reference","module":"@c8y/ngx-components","name":"CoreModule","line":10,"character":12},{"__symbolic":"reference","module":"@angular/forms","name":"ReactiveFormsModule","line":10,"character":24}],"declarations":[{"__symbolic":"reference","name":"DefaultSubscriptionsComponent"}],"entryComponents":[{"__symbolic":"reference","name":"DefaultSubscriptionsComponent"}],"exports":[{"__symbolic":"reference","name":"DefaultSubscriptionsComponent"}],"providers":[{"__symbolic":"reference","name":"DefaultSubscriptionsService"},{"__symbolic":"reference","name":"ɵa"},{"provide":{"__symbolic":"reference","module":"@c8y/ngx-components","name":"HOOK_NAVIGATOR_NODES","line":18,"character":15},"useClass":{"__symbolic":"reference","name":"ɵb"},"multi":true},{"provide":{"__symbolic":"reference","module":"@c8y/ngx-components","name":"HOOK_ROUTE","line":23,"character":15},"useValue":[{"path":"default-subscriptions","component":{"__symbolic":"reference","name":"DefaultSubscriptionsComponent"},"canActivate":[{"__symbolic":"reference","name":"ɵa"}]}],"multi":true}]}]}],"members":{}},"DefaultSubscriptionsService":{"__symbolic":"class","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Injectable","line":20,"character":1}}],"members":{"__ctor__":[{"__symbolic":"constructor","parameters":[{"__symbolic":"reference","module":"@c8y/client","name":"ApplicationService","line":23,"character":32},{"__symbolic":"reference","module":"@c8y/client","name":"TenantService","line":24,"character":27},{"__symbolic":"reference","module":"@c8y/client","name":"TenantOptionsService","line":25,"character":34},{"__symbolic":"reference","module":"@c8y/ngx-components","name":"HumanizeAppNamePipe","line":26,"character":33}]}],"getSubscribableTenantApps":[{"__symbolic":"method"}],"getDefaultSubscriptionsEvaluatedFromParentTenant":[{"__symbolic":"method"}],"getDefaultSubscriptionsFromCurrentTenant":[{"__symbolic":"method"}],"saveDefaultSubscriptionsToCurrentTenant":[{"__symbolic":"method"}],"getDefaultSubscriptions":[{"__symbolic":"method"}],"getTenantOptions":[{"__symbolic":"method"}],"saveOnCreationSubscriptions":[{"__symbolic":"method"}],"saveOnUpgradeSubscriptions":[{"__symbolic":"method"}],"getTenantOption":[{"__symbolic":"method"}],"setTenantOption":[{"__symbolic":"method"}],"unsetTenantOption":[{"__symbolic":"method"}],"namesToPartialApps":[{"__symbolic":"method"}],"partialAppsListToAppsNames":[{"__symbolic":"method"}],"partialAppsToMicroservicesNames":[{"__symbolic":"method"}]}},"DefaultSubscriptionsComponent":{"__symbolic":"class","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Component","line":10,"character":1},"arguments":[{"selector":"c8y-default-subscriptions","template":"<c8y-title>{{ 'Default subscriptions' | translate }}</c8y-title>\n\n<form [formGroup]=\"form\" (ngSubmit)=\"save()\">\n  <div class=\"card card--fullpage col-lg-max\">\n    <div class=\"card-header separator\">\n      <h4 class=\"card-title\" translate>Applications</h4>\n    </div>\n    <div class=\"inner-scroll\">\n      <div class=\"sticky-top separator-bottom\">\n        <div class=\"flex-row\">\n          <div class=\"col-sm-6 col-xs-6 p-l-24 p-l-xs-16\">\n            <p translate>\n              Configure default subscriptions in the platform, both for tenant creation and for\n              platform upgrade. To display a full list of available applications, override inherited\n              settings.\n            </p>\n          </div>\n          <div class=\"col-sm-6 col-xs-6 bg-gray-white p-16 text-center separator-bottom\">\n            <div class=\"row\">\n              <div class=\"col-sm-6 col-xs-6\">\n                <p><strong translate>Subscribed on tenant creation</strong></p>\n                <div>\n                  <label class=\"c8y-switch\" title=\"{{ 'Override inherited' | translate }}\">\n                    <input type=\"checkbox\" formControlName=\"overrideOnCreationSubscriptions\" />\n                    <span></span>\n                    <span>\n                      {{ 'Override inherited' | translate }}\n                    </span>\n                  </label>\n                </div>\n              </div>\n              <div class=\"col-sm-6 col-xs-6\">\n                <p><strong translate>Subscribed on platform upgrade</strong></p>\n                <div>\n                  <label class=\"c8y-switch\" title=\"{{ 'Override inherited' | translate }}\">\n                    <input type=\"checkbox\" formControlName=\"overrideOnUpgradeSubscriptions\" />\n                    <span></span>\n                    <span>\n                      {{ 'Override inherited' | translate }}\n                    </span>\n                  </label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"card-block\" *ngIf=\"loading\"></div>\n      <div class=\"card-block card-block d-flex a-i-center j-c-center d-col\" *ngIf=\"loading\">\n        <c8y-loading></c8y-loading>\n        <span translate>Loading application subscriptions…</span>\n      </div>\n      <div class=\"card-block\" *ngIf=\"loading\"></div>\n\n      <ng-container formArrayName=\"appRows\">\n        <div class=\"bg-gray-white\" *ngIf=\"!loading && isEmptyView()\"></div>\n        <div class=\"card-block bg-white\" *ngIf=\"!loading && isEmptyView()\">\n          <div class=\"c8y-empty-state\">\n            <h1 class=\"c8y-icon c8y-icon-c8y-data c8y-icon-duocolor\"></h1>\n            <h3 translate>No application subscriptions yet.</h3>\n            <p translate>\n              Select \"Override inherited\" to define the list of subscribed applications.\n            </p>\n          </div>\n        </div>\n        <div class=\"bg-gray-white\" *ngIf=\"!loading && isEmptyView()\"></div>\n\n        <div *ngFor=\"let appRowControl of form.get('appRows')['controls']; let i = index\">\n          <ng-container\n            *ngIf=\"shouldShowAppRow(appRowControl.getRawValue())\"\n            formArrayName=\"{{ i }}\"\n          >\n            <div class=\"flex-row a-i-stretch\">\n              <div class=\"col-sm-6 col-xs-6 separator-bottom\">\n                <div class=\"c8y-list__item__block\">\n                  <div class=\"c8y-list__item__appicon\">\n                    <c8y-app-icon\n                      [app]=\"appRowControl.value.app\"\n                      [name]=\"appRowControl.value.app.name\"\n                      [contextPath]=\"appRowControl.value.app.contextPath\"\n                    ></c8y-app-icon>\n                  </div>\n                  <div class=\"c8y-list__item__body\">\n                    <div class=\"content-flex-30\">\n                      <div class=\"col-6\">\n                        <p\n                          class=\"text-truncate\"\n                          title=\"{{ appRowControl.value.app | humanizeAppName | async }}\"\n                        >\n                          {{ appRowControl.value.app | humanizeAppName | async }}\n                        </p>\n                        <small class=\"text-muted\">{{ appRowControl.value.app.contextPath }}</small>\n                      </div>\n                      <div class=\"col-6 text-right-sm\">\n                        <p>\n                          <span class=\"text-label-small m-r-4\" translate> Tenant ID </span>\n                          {{ appRowControl.value.app.owner.tenant.id }}\n                        </p>\n                        <!-- TODO: uncomment when company name is available\n                            <p>\n                            <span class=\"text-label-small m-r-4\" translate>Company</span>\n                            <small class=\"text-muted\">company name</small>\n                          </p> -->\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div\n                class=\"\n                  col-sm-3 col-xs-3\n                  bg-gray-white\n                  separator-bottom\n                  d-flex\n                  j-c-center\n                  a-i-center\n                \"\n              >\n                <label\n                  class=\"c8y-checkbox\"\n                  [ngClass]=\"{ disabled: appRowControl.controls.subscribedOnCreation.disabled }\"\n                >\n                  <input type=\"checkbox\" formControlName=\"subscribedOnCreation\" />\n                  <span *ngIf=\"!appRowControl.controls.subscribedOnCreation.disabled\"></span>\n                  <span\n                    *ngIf=\"appRowControl.controls.subscribedOnCreation.disabled\"\n                    title=\"{{ disabledCheckboxHint | translate }}\"\n                  ></span>\n                </label>\n              </div>\n\n              <div\n                class=\"\n                  col-sm-3 col-xs-3\n                  bg-gray-white\n                  separator-bottom\n                  d-flex\n                  j-c-center\n                  a-i-center\n                \"\n              >\n                <label\n                  class=\"c8y-checkbox\"\n                  [ngClass]=\"{ disabled: appRowControl.controls.subscribedOnUpgrade.disabled }\"\n                >\n                  <input type=\"checkbox\" formControlName=\"subscribedOnUpgrade\" />\n                  <span *ngIf=\"!appRowControl.controls.subscribedOnUpgrade.disabled\"></span>\n                  <span\n                    *ngIf=\"appRowControl.controls.subscribedOnUpgrade.disabled\"\n                    title=\"{{ disabledCheckboxHint | translate }}\"\n                  ></span>\n                </label>\n              </div>\n            </div>\n          </ng-container>\n        </div>\n      </ng-container>\n    </div>\n    <div class=\"card-footer separator\">\n      <button\n        type=\"submit\"\n        class=\"btn btn-primary\"\n        [disabled]=\"form.invalid || form.pristine\"\n        title=\"{{ 'Save default subscriptions' | translate }}\"\n      >\n        {{ 'Save' | translate }}\n      </button>\n    </div>\n  </div>\n</form>\n"}]}],"members":{"__ctor__":[{"__symbolic":"constructor","parameters":[{"__symbolic":"reference","module":"@angular/forms","name":"FormBuilder","line":27,"character":16},{"__symbolic":"reference","name":"DefaultSubscriptionsService"},{"__symbolic":"reference","module":"@c8y/ngx-components","name":"AlertService","line":29,"character":26}]}],"ngOnInit":[{"__symbolic":"method"}],"initForm":[{"__symbolic":"method"}],"shouldShowAppRow":[{"__symbolic":"method"}],"isEmptyView":[{"__symbolic":"method"}],"isSubscribed":[{"__symbolic":"method"}],"save":[{"__symbolic":"method"}],"onOverrideOnCreationSubscriptionsChange":[{"__symbolic":"method"}],"enableSubscribeOnCreationCheckboxes":[{"__symbolic":"method"}],"disableSubscribeOnCreationCheckboxes":[{"__symbolic":"method"}],"restoreSubscribeOnCreationFromParent":[{"__symbolic":"method"}],"onOverrideOnUpgradeSubscriptionsChange":[{"__symbolic":"method"}],"enableSubscribeOnUpgradeCheckboxes":[{"__symbolic":"method"}],"disableSubscribeOnUpgradeCheckboxes":[{"__symbolic":"method"}],"restoreSubscribeOnUpgradeFromParent":[{"__symbolic":"method"}],"loadDefaultSubscriptions":[{"__symbolic":"method"}],"getDefaultSubscriptionsForSave":[{"__symbolic":"method"}]}},"PartialAppsList":{"__symbolic":"interface"},"DefaultSubscriptions":{"__symbolic":"interface"},"DefaultSubscriptionsContext":{"CURRENT_TENANT":0,"PARENT_TENANT":1},"ɵa":{"__symbolic":"class","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Injectable","line":4,"character":1}}],"members":{"__ctor__":[{"__symbolic":"constructor","parameters":[{"__symbolic":"reference","module":"@c8y/ngx-components","name":"TenantUiService","line":8,"character":39}]}],"canActivate":[{"__symbolic":"method"}]}},"ɵb":{"__symbolic":"class","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Injectable","line":4,"character":1}}],"members":{"__ctor__":[{"__symbolic":"constructor","parameters":[{"__symbolic":"reference","name":"ɵa"}]}],"get":[{"__symbolic":"method"}]}}},"origins":{"DefaultSubscriptionsModule":"./default-subscriptions.module","DefaultSubscriptionsService":"./default-subscriptions.service","DefaultSubscriptionsComponent":"./default-subscriptions.component","PartialAppsList":"./default-subscriptions.model","DefaultSubscriptions":"./default-subscriptions.model","DefaultSubscriptionsContext":"./default-subscriptions.model","ɵa":"./default-subscriptions.guard","ɵb":"./default-subscriptions-navigation.factory"},"importAs":"@c8y/ngx-components/default-subscriptions"}