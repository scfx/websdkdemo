{"version":3,"file":"c8y-ngx-components-tenants.js","sources":["../../tenants/tenant-list/tenant-list.guard.ts","../../tenants/tenants.model.ts","../../tenants/tenants-navigation.factory.ts","../../tenants/tenant-list/status.filtering-form-renderer.component.ts","../../tenants/tenant-list/creation-time.filtering-form-renderer.component.ts","../../tenants/tenant-list/tenant-list.component.ts","../../tenants/tenants.module.ts","../../tenants/c8y-ngx-components-tenants.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { CanActivate } from '@angular/router';\nimport { TenantUiService } from '@c8y/ngx-components';\n\n@Injectable()\nexport class TenantListGuard implements CanActivate {\n  private active: boolean;\n\n  constructor(private tenantUiService: TenantUiService) {}\n\n  /**\n   * Checks if tenant list should be active,\n   * i.e. whether the current tenant can read other tenants.\n   * **Note: the check is executed only once in the runtime.**\n   *\n   * @returns True, if the feature should be active.\n   */\n  canActivate(): boolean {\n    if (this.active === undefined) {\n      this.active = this.tenantUiService.canReadTenants();\n    }\n    return this.active;\n  }\n}\n","import { InjectionToken } from '@angular/core';\nimport { NavigatorNode } from '@c8y/ngx-components';\n\nexport const TENANTS_MODULE_CONFIG = new InjectionToken<TenantsModuleConfig>('TenantsModuleConfig');\n\n/**\n * Configuration object for `TenantsModule`.\n */\nexport interface TenantsModuleConfig {\n  /**\n   * Allows for hiding or customizing \"Subtenants\" navigator node:\n   * - `subtenantsNavigatorNode: true` - shows the default navigator node (default),\n   * - `subtenantsNavigatorNode: false` - hides the navigator node,\n   * - `subtenantsNavigatorNode: { label: 'My subtenants' }` - overrides default navigator node,\n   * - `subtenantsNavigatorNode: new NavigatorNode({ label: 'My subtenants' })` - overrides default navigator node.\n   */\n   subtenantsNavigatorNode?: boolean | Partial<NavigatorNode>;\n}\n","import { Inject, Injectable, Optional } from '@angular/core';\nimport { gettext, NavigatorNode, NavigatorNodeFactory } from '@c8y/ngx-components';\nimport { TenantListGuard } from './tenant-list/tenant-list.guard';\nimport { TenantsModuleConfig, TENANTS_MODULE_CONFIG } from './tenants.model';\n\n@Injectable()\nexport class TenantsNavigationFactory implements NavigatorNodeFactory {\n  private navs: NavigatorNode[] = [];\n\n  constructor(\n    private tenantListGuard: TenantListGuard,\n    @Optional() @Inject(TENANTS_MODULE_CONFIG) private config: TenantsModuleConfig\n  ) {}\n\n  async get(): Promise<NavigatorNode[]> {\n    const canActivateTenantList = await this.tenantListGuard.canActivate();\n    if (!this.navs.length) {\n      const subtenantsNavigatorNode = this.config?.subtenantsNavigatorNode ?? true;\n      if (subtenantsNavigatorNode !== false) {\n        this.navs.push(\n          new NavigatorNode({\n            parent: gettext('Tenants'),\n            label: gettext('Subtenants'),\n            icon: 'c8y-sub-tenants',\n            path: 'tenants',\n            routerLinkExact: false,\n            priority: 4000,\n            hidden: !canActivateTenantList,\n            ...(subtenantsNavigatorNode === true ? {} : subtenantsNavigatorNode)\n          })\n        );\n      }\n    }\n    return this.navs;\n  }\n}\n","import { Component } from '@angular/core';\nimport { ITenant, TenantStatus } from '@c8y/client';\nimport { FilteringFormRendererContext } from '@c8y/ngx-components';\n\n@Component({\n  templateUrl: './status.filtering-form-renderer.component.html'\n})\nexport class StatusFilteringFormRendererComponent {\n  model: {\n    active: boolean;\n    suspended: boolean;\n  };\n\n  constructor(public context: FilteringFormRendererContext) {\n    this.model = (this.context.property.externalFilterQuery || {}).model || {};\n  }\n\n  applyFilter() {\n    this.context.applyFilter({\n      externalFilterQuery: {\n        model: this.model\n      },\n      filterPredicate: (tenant: ITenant) =>\n        Boolean(\n          (!this.model.active && !this.model.suspended) ||\n            (this.model.active && tenant.status === TenantStatus.ACTIVE) ||\n            (this.model.suspended && tenant.status === TenantStatus.SUSPENDED)\n        )\n    });\n  }\n\n  resetFilter() {\n    this.context.resetFilter();\n  }\n}\n","import { Component } from '@angular/core';\nimport { ITenant } from '@c8y/client';\nimport { FilteringFormRendererContext } from '@c8y/ngx-components';\n\n@Component({\n  templateUrl: './creation-time.filtering-form-renderer.component.html'\n})\nexport class CreationTimeFilteringFormRendererComponent {\n  model: {\n    dateFrom: Date;\n    dateTo: Date;\n  };\n\n  constructor(public context: FilteringFormRendererContext) {\n    this.model = (this.context.property.externalFilterQuery || {}).model || {};\n  }\n\n  applyFilter() {\n    this.context.applyFilter({\n      externalFilterQuery: {\n        model: this.model\n      },\n      filterPredicate: (tenant: ITenant) => {\n        const creationTime = new Date(tenant.creationTime);\n        let dateFrom;\n        let dateTo;\n\n        if (this.model.dateFrom) {\n          dateFrom = this.model.dateFrom;\n          dateFrom.setHours(0, 0, 0, 0);\n        }\n\n        if (this.model.dateTo) {\n          dateTo = this.model.dateTo;\n          dateTo.setHours(23, 59, 59, 999);\n        }\n\n        return Boolean(\n          (!dateFrom && !dateTo) ||\n            (dateFrom && !dateTo && dateFrom <= creationTime) ||\n            (!dateFrom && dateTo && creationTime <= dateTo) ||\n            (dateFrom && dateTo && dateFrom <= creationTime && creationTime <= dateTo)\n        );\n      }\n    });\n  }\n\n  resetFilter() {\n    this.context.resetFilter();\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Location } from '@angular/common';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BehaviorSubject, from } from 'rxjs';\nimport { expand, reduce, shareReplay, takeWhile } from 'rxjs/operators';\nimport { saveAs } from 'file-saver';\n\nimport { ICurrentTenant, IResultList, ITenant, TenantService, TenantStatus, UserService } from '@c8y/client';\nimport {\n  ActionControl,\n  AlertService,\n  AppStateService,\n  BuiltInActionType,\n  Column,\n  SortOrder,\n  DisplayOptions,\n  gettext,\n  ModalService,\n  Pagination,\n  Status,\n  TenantUiService,\n  PasswordService\n} from '@c8y/ngx-components';\n\nimport { StatusFilteringFormRendererComponent } from './status.filtering-form-renderer.component';\nimport { CreationTimeFilteringFormRendererComponent } from './creation-time.filtering-form-renderer.component';\n\n@Component({\n  selector: 'c8y-tenant-list',\n  templateUrl: './tenant-list.component.html'\n})\nexport class TenantListComponent implements OnInit {\n  tenants$: BehaviorSubject<ITenant[]> = new BehaviorSubject(undefined);\n  currentTenant: ICurrentTenant;\n  isManagementTenant: boolean;\n  TOP_TENANT_NAME: string = 'management';\n\n  title: string = null;\n  loadMoreItemsLabel: string = gettext('Load more tenants');\n  loadingItemsLabel: string = gettext('Loading tenants…');\n\n  displayOptions: DisplayOptions = {\n    bordered: false,\n    striped: true,\n    filter: true,\n    gridHeader: true\n  };\n\n  columns: Column[] = this.getColumns();\n  pagination: Pagination = this.getPagination();\n  showSearch: boolean = true;\n  actionControls: ActionControl[] = this.getActionControls();\n\n  TenantStatus = TenantStatus;\n\n  constructor(\n    public appState: AppStateService,\n    private alertService: AlertService,\n    private modalService: ModalService,\n    private translateService: TranslateService,\n    private tenantService: TenantService,\n    private tenantUiService: TenantUiService,\n    private location: Location,\n    private passwordService: PasswordService,\n    private userService: UserService\n  ) {}\n\n  async ngOnInit() {\n    this.currentTenant = this.appState.currentTenant.value;\n    this.isManagementTenant = await this.tenantUiService.isManagementTenant();\n    this.loadTenants();\n  }\n\n  loadTenants() {\n    this.tenants$.next(undefined);\n    from(this.tenantService.list({ pageSize: 2000, withTotalPages: true, withApps: false }))\n      .pipe(\n        expand(resultList => resultList.paging.nextPage !== null && resultList.paging.next()),\n        takeWhile(resultList => resultList.paging.nextPage !== null, true),\n        reduce(\n          (tenants: ITenant[], resultList: IResultList<ITenant>) => [\n            ...tenants,\n            ...resultList.data\n          ],\n          []\n        ),\n        shareReplay(1)\n      )\n      .subscribe(tenants => this.tenants$.next(tenants));\n  }\n\n  getColumns(): Column[] {\n    return [\n      {\n        name: 'company',\n        header: gettext('Tenant'),\n        path: 'company',\n        filterable: true,\n        sortable: true,\n        sortOrder: 'asc' as SortOrder\n      },\n      {\n        name: 'id',\n        header: gettext('ID'),\n        path: 'id',\n        filterable: true,\n        sortable: true\n      },\n      {\n        name: 'domain',\n        header: gettext('Domain'),\n        path: 'domain',\n        filterable: true,\n        sortable: true\n      },\n      {\n        name: 'parent',\n        header: gettext('Parent tenant'),\n        path: 'parent',\n        filterable: true,\n        sortable: true\n      },\n      {\n        name: 'contactName',\n        header: gettext('Contact name'),\n        path: 'contactName',\n        filterable: true,\n        sortable: true\n      },\n      {\n        name: 'creationTime',\n        header: gettext('Created'),\n        path: 'creationTime',\n        filterable: true,\n        filteringFormRendererComponent: CreationTimeFilteringFormRendererComponent,\n        sortable: true\n      },\n      {\n        name: 'externalReference',\n        header: gettext('External reference'),\n        path: 'customProperties.externalReference',\n        filterable: true,\n        sortable: true\n      },\n      {\n        name: 'status',\n        header: gettext('Status'),\n        path: 'status',\n        filterable: true,\n        filteringFormRendererComponent: StatusFilteringFormRendererComponent,\n        sortable: true\n      }\n    ];\n  }\n\n  getPagination(): Pagination {\n    return {\n      pageSize: 10,\n      currentPage: 1\n    };\n  }\n\n  getActionControls(): ActionControl[] {\n    return [\n      {\n        type: BuiltInActionType.Edit,\n        text: gettext('Edit`tenant`'),\n        callback: tenant => this.goToDetails(tenant)\n      },\n      {\n        type: 'activateTenantAction',\n        icon: 'power-off',\n        text: gettext('Activate`tenant`'),\n        callback: (tenant: ITenant) => this.activateTenant(tenant),\n        showIf: (tenant: ITenant) => this.isSuspended(tenant)\n      },\n      {\n        type: 'suspendTenantAction',\n        icon: 'power-off',\n        text: gettext('Suspend`tenant`'),\n        callback: (tenant: ITenant) => this.suspendTenant(tenant),\n        showIf: (tenant: ITenant) => this.isActive(tenant)\n      },\n      {\n        type: BuiltInActionType.Delete,\n        text: gettext('Delete`tenant`'),\n        callback: tenant => this.delete(tenant),\n        showIf: () => this.isManagementTenant\n      }\n    ];\n  }\n\n  createTenant() {\n    this.location.go('/tenants/new');\n  }\n\n  goToDetails(tenant: ITenant) {\n    this.location.go(`/tenants/${tenant.id}`);\n  }\n\n  async activateTenant(tenant) {\n    try {\n      const { data: savedTenant } = await this.tenantService.update({\n        id: tenant.id,\n        status: TenantStatus.ACTIVE\n      });\n      Object.assign(tenant, savedTenant);\n      this.alertService.success(gettext('Tenant activated.'));\n    } catch (ex) {\n      if (ex) {\n        this.alertService.addServerFailure(ex);\n      }\n    }\n  }\n\n  async suspendTenant(tenant) {\n    const title = gettext('Suspend tenant');\n    const confirmationText = gettext(\n      'You are about to suspend tenant \"{{ company }}\" (ID \"{{ id }}\").'\n    );\n    const proceed = gettext('Do you want to proceed?');\n    const body = [\n      this.translateService.instant(confirmationText, {\n        company: tenant.company,\n        id: tenant.id\n      }),\n      this.translateService.instant(proceed)\n    ].join(' ');\n    const labels = {\n      ok: gettext('Suspend`tenant`')\n    };\n    try {\n      await this.modalService.confirm(title, body, Status.DANGER, labels);\n      const confirmed = await this.passwordService.confirmPassword().toPromise();\n      if (confirmed === true) {\n        const { data: savedTenant } = await this.tenantService.update({\n          id: tenant.id,\n          status: TenantStatus.SUSPENDED\n        });\n        Object.assign(tenant, savedTenant);\n        this.alertService.success(gettext('Tenant suspended.'));\n      }\n    } catch (ex) {\n      if (ex) {\n        this.alertService.addServerFailure(ex);\n      }\n    }\n  }\n\n  async delete(tenant) {\n    const title = gettext('Delete tenant');\n    const confirmationText = gettext(\n      'You are about to delete tenant \"{{ company }}\" (ID \"{{ id }}\").'\n    );\n    const hint = gettext('This operation is irreversible.');\n    const proceed = gettext('Do you want to proceed?');\n    const body = [\n      this.translateService.instant(confirmationText, {\n        company: tenant.company,\n        id: tenant.id\n      }),\n      this.translateService.instant(hint),\n      this.translateService.instant(proceed)\n    ].join(' ');\n    const labels = {\n      ok: gettext('Delete`tenant`')\n    };\n    try {\n      await this.modalService.confirm(title, body, Status.DANGER, labels);\n      const confirmed = await this.passwordService.confirmPassword().toPromise();\n      if (confirmed === true) {\n        await this.tenantService.delete(tenant);\n        const tenantsWithoutRemovedOne = this.tenants$.value.filter(t => t !== tenant);\n        this.tenants$.next(tenantsWithoutRemovedOne);\n        this.alertService.success(\n          gettext('Tenant is being deleted in the background. This might take a while…')\n        );\n      }\n    } catch (ex) {\n      if (ex) {\n        this.alertService.addServerFailure(ex);\n      }\n    }\n  }\n\n  isActive(tenant: ITenant) {\n    return tenant.status === TenantStatus.ACTIVE;\n  }\n\n  isSuspended(tenant: ITenant) {\n    return tenant.status === TenantStatus.SUSPENDED;\n  }\n\n  async downloadNewsletterEmails() {\n    const { res, data } = await this.userService.getNewsletterEmails();\n    const contentType = res.headers.get('content-type');\n    const contentDisposition = res.headers.get('content-disposition');\n    const filename = /filename=\"(.*)\"/.exec(contentDisposition)[1];\n    const blob = new Blob([data], { type: contentType });\n    saveAs(blob, filename);\n  }\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { BsDatepickerModule } from 'ngx-bootstrap/datepicker';\n\nimport { CoreModule, HOOK_NAVIGATOR_NODES, HOOK_ROUTE, Route } from '@c8y/ngx-components';\nimport { TenantsNavigationFactory } from './tenants-navigation.factory';\nimport { TenantListComponent } from './tenant-list/tenant-list.component';\nimport { CreationTimeFilteringFormRendererComponent } from './tenant-list/creation-time.filtering-form-renderer.component';\nimport { StatusFilteringFormRendererComponent } from './tenant-list/status.filtering-form-renderer.component';\nimport { TenantsModuleConfig, TENANTS_MODULE_CONFIG } from './tenants.model';\nimport { TenantListGuard } from './tenant-list/tenant-list.guard';\n\n@NgModule({\n  imports: [\n    RouterModule,\n    BsDatepickerModule,\n    CoreModule\n  ],\n  exports: [],\n  declarations: [\n    TenantListComponent,\n    CreationTimeFilteringFormRendererComponent,\n    StatusFilteringFormRendererComponent\n  ],\n  entryComponents: [\n    TenantListComponent,\n    CreationTimeFilteringFormRendererComponent,\n    StatusFilteringFormRendererComponent\n  ],\n  providers: [\n    TenantListGuard,\n    {\n      provide: HOOK_NAVIGATOR_NODES,\n      useClass: TenantsNavigationFactory,\n      multi: true\n    },\n    {\n      provide: HOOK_ROUTE,\n      useValue: [\n        {\n          path: 'tenants',\n          component: TenantListComponent,\n          canActivate: [TenantListGuard]\n        }\n      ] as Route[],\n      multi: true\n    }\n  ]\n})\nexport class TenantsModule {\n  static config(config: TenantsModuleConfig = {}): ModuleWithProviders<TenantsModule> {\n    return {\n      ngModule: TenantsModule,\n      providers: [\n        {\n          provide: TENANTS_MODULE_CONFIG,\n          useValue: config\n        }\n      ]\n    };\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}